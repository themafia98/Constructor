(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,n){e.exports=n(321)},143:function(e,t,n){},144:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},314:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){},319:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(56),c=n.n(o),i=n(14),s=n(29),l=n(119),u=n(1),p=n(12),m=function(e){return{type:"LOAD_USER_CABINET",active:!0,idUser:e.uid,error:"",projects:Object(p.a)(e.projects)}},d=function(e){return{type:"ERROR_CABINET",error:e}},f={nameEditComponent:null,settingsEditComponent:{}},h={active:!1,idUser:null,projects:[],error:null,dateConnect:new Date(Date.now()).toLocaleString().replace(/\s/gi,"").split(",")},b=Object(s.c)({builder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_CURRENT":return Object(u.a)({},e,{currentEditable:Object(u.a)({},t.currentEditable)});default:return e}},cabinet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER_CABINET":return Object(u.a)({},e,{active:t.active,idUser:t.idUser,projects:t.projects});case"CREATE_PROJECT":return Object(u.a)({},e,{projects:t.projects});case"LOG_OUT_CABINET":return Object(u.a)({},e,{active:!1,idUser:null,projects:[]});case"ERROR_CABINET":return Object(u.a)({},e,{error:t.error});default:return e}}}),v=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):s.d)(Object(s.a)(l.a)),g=Object(s.e)(b,v),E=n(4),j=n(5),O=n(7),C=n(6),y=n(8),P=n(26),w=n(31),k=n(19),N=n.n(k),A=n(30),S=n(2),_=n.n(S),M={apiKey:"AIzaSyBrLv9RyGWXCeEETRqBbBo3EVOcibmnJwU",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_DATABASE_URL,projectId:"constructor-acb61",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_APPID},x=(n(137),n(139),new(function(){function e(){Object(E.a)(this,e),_.a.initializeApp(M),this.auth=_.a.auth(),this.db=_.a.firestore()}return Object(j.a)(e,[{key:"saveSession",value:function(e){return this.auth.setPersistence(_.a.auth.Auth.Persistence[e])}},{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"registration",value:function(e,t){return this.auth.createUserWithEmailAndPassword(e,t)}},{key:"signOut",value:function(){return this.auth.signOut()}},{key:"getCurrentUser",value:function(){return this.auth.currentUser}}]),e}()));x.saveSession("SESSION");var T=x,I=function(e,t){return function(){var n=Object(A.a)(N.a.mark(function n(a){return N.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.login(e,t).then(function(e){T.db.collection("users").doc(e.user.uid).get().then(function(e){var t=e.data();a(m({uid:e.id,projects:Object(p.a)(t.projects)}))})}).catch(function(e){return a(d(e.message))});case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},R=function(e){return function(){var e=Object(A.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.signOut().then(function(e){t({type:"LOG_OUT_CABINET",active:!1,idUser:null,error:"",projects:[]})}).catch(function(e){return t(d(e.message))});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},U=function(e){return function(t){return r.a.createElement(e,Object.assign({firebase:T},t))}},B=n(13),L=function(e){var t=Object(a.useState)(e.path),n=Object(B.a)(t,1)[0];return r.a.createElement("div",{className:"loaderBox"},r.a.createElement("img",{className:"loader",src:n,alt:"loader"}),r.a.createElement("p",null,"Loading ",e.type))},D=new(n(120).EventEmitter),z=(n(143),U(function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={firebase:n.props.firebase,error:null},n.emailRef=null,n.passwordRef=null,n.setRefEmail=function(e){return n.emailRef=e},n.setRefPassword=function(e){return n.passwordRef=e},n.createUser=function(e){var t=n.emailRef.value,a=n.passwordRef.value,r=n.props.firebase;r.registration(t,a).then(function(e){r.db.collection("users").doc(e.user.uid).set({projects:[],email:t}).then(function(){return D.emit("EventRegistrationCorrect",e)})}).catch(function(e){return n.setState({error:e.message})})},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement("div",{className:"RegistrationBox"},r.a.createElement("div",{className:"RegistrationForm"},r.a.createElement("h3",null,"Registration"),r.a.createElement("form",{autoComplete:"off",className:"RegForm"},e?r.a.createElement("p",{className:"error"},e):null,r.a.createElement("span",null,"E-mail"),r.a.createElement("input",{ref:this.setRefEmail,type:"text"}),r.a.createElement("span",null,"Password"),r.a.createElement("input",{autoComplete:"off",ref:this.setRefPassword,type:"password"}),r.a.createElement("input",{onClick:this.createUser,className:"loginButton",type:"button",value:"registration"}))))}}]),t}(r.a.PureComponent))),W=(n(144),function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={title:"Constructor",registrationActive:!1,regStatus:!1,wrongEnter:!1,error:""},n.statusRegistration=function(e){e.additionalUserInfo.isNewUser?n.setState(Object(u.a)({},n.state,{regStatus:!0,registrationActive:!1,error:"Account create!"})):console.log("error registration")},n.showBox=function(e){n.setState(Object(u.a)({},n.state,{registrationActive:!n.state.registrationActive}))},n.authTo=function(e){n.props.dispatch(I(n.emailImput.value,n.passwordImput.value))},n.emailImput=null,n.passwordImput=null,n.emailRef=function(e){return n.emailImput=e},n.passwordRef=function(e){return n.passwordImput=e},n.componentDidMount=function(e){D.on("EventRegistrationCorrect",n.statusRegistration)},n.componentWillUnmount=function(e){D.off("EventRegistrationCorrect",n.statusRegistration)},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){if(this.props.active)return r.a.createElement(w.a,{to:"/Cabinet"});if(this.props.active)return r.a.createElement(L,{path:"/img/loading.gif",type:"session"});var e=this.state.registrationActive;return r.a.createElement("div",{className:"LoginPage flex-column"},r.a.createElement("h1",null,this.state.title),r.a.createElement("div",{className:"LoginBox"},r.a.createElement("div",{className:"LoginForm"},r.a.createElement("h3",null,"Connect form"),this.props.wrongEnter||this.state.regStatus?r.a.createElement("p",{className:"error"},this.props.wrongEnter):null,r.a.createElement("p",null,"E-mail"),r.a.createElement("input",{ref:this.emailRef,type:"text"}),r.a.createElement("p",null,"Password"),r.a.createElement("input",{ref:this.passwordRef,type:"password"}),r.a.createElement("input",{onClick:this.authTo,className:"loginButton",type:"button",value:"enter"}),r.a.createElement("input",{onClick:this.showBox,className:e?"loginButton selected":"loginButton",type:"button",value:"registration"}))),this.state.registrationActive?r.a.createElement(z,{auth:this.props.auth}):null)}}]),t}(r.a.PureComponent)),V=Object(i.b)(function(e){return{active:e.cabinet.active,wrongEnter:e.cabinet.error}})(W),X=function(e){return function(){var t=Object(A.a)(N.a.mark(function t(n){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("middleware"),t.next=3,T.db.collection("users").doc(e.uid).get().then(function(e){return e.data()}).then(function(t){return{id:t.id,projects:t.projects.filter(function(t){return t.id!==e.id})}}).then(function(t){T.db.collection("users").doc(e.uid).update({projects:t.projects}).then(function(e){n(m({uid:t.id,projects:t.projects}))})}).catch(function(e){n(d(e.message))});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};n(146);var H=function(e){var t=Object(a.useState)(e.path),n=Object(B.a)(t,1)[0],o=Object(a.useState)(e.className?e.className:null),c=Object(B.a)(o,1)[0],i=Object(a.useState)(!!e.draggable),s=Object(B.a)(i,1)[0];return r.a.createElement("img",{draggable:s,onClick:e.onClick?e.onClick:null,className:c,title:e.title?e.title:null,src:n,alt:"icon"})},Y=n(59).CabinetIcon,F=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={title:n.props.title},n.logOut=function(e){n.props.dispatch(R(n.props.idUser))},n.redirect=function(e){"/Cabinet/About"!==n.props.location.pathname&&n.props.history.push("/Cabinet/About")},n.add=function(e){D.emit("EventChangeWorkMode",{action:"newProject"})},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"header__CabinetInfo"},r.a.createElement(H,{path:Y}),r.a.createElement(P.b,{to:"/Cabinet"},r.a.createElement("h3",null,this.state.title))),"/Cabinet"===this.props.location.pathname?r.a.createElement("div",{onClick:this.add,className:"header__newProject__AddButton"},r.a.createElement(H,{path:"/img/plus.png"})):null,r.a.createElement("div",{className:"Navigator"},r.a.createElement(H,{onClick:this.redirect,title:"about",path:"/img/about_logo.svg"}),r.a.createElement(H,{onClick:this.logOut,title:"logOut",path:"/img/logOut.svg"})))))}}]),t}(r.a.Component),G=Object(i.b)()(Object(w.g)(F)),J=n(44),K=(n(147),function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={workMode:n.props.workMode,newProject:{validateName:!1,validateType:!1,disabled:!0,name:"",type:"empty"},warning:{lengthMax:"Max length: 20 symbols",lengthMin:"Min length: 4 symbol",type:"Select type of webpage"}},n.inputSelect=null,n.disabledButton=function(e){},n.addNewProject=function(e){var t=n.state[n.state.workMode];t.validateType&&t.validateName&&(D.emit("EventAddProject",{title:n.state[n.state.workMode].name,type:n.state[n.state.workMode].type}),D.emit("EventChangeWorkMode",{action:"default"}))},n.selectOption=function(e){var t=Object(u.a)({},n.state[n.state.workMode]);t.type=e.target.value,t.validateType="empty"!==t.type,t.disabled=!t.validateType||!t.validateName,n.setState(Object(u.a)({},n.state,Object(J.a)({},n.state.workMode,t)))},n.validateName=function(e){var t=Object(u.a)({},n.state[n.state.workMode]);t.name=e.target.value;var a=t.name.length;t.validateName=a>=4&&a<20,t.disabled=!t.validateType||!t.validateName,n.setState(Object(u.a)({},n.state,Object(J.a)({},n.state.workMode,t)))},n.cancel=function(e){D.emit("EventChangeWorkMode",{action:"default"})},n.refSelect=function(e){return n.inputSelect=e},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){switch(this.state.workMode){case"newProject":return r.a.createElement("div",{className:"Modal"},r.a.createElement("h3",null,"Create new Project"),this.state[this.state.workMode].name.length<=3?r.a.createElement("span",{className:"warning"},this.state.warning.lengthMin):null,this.state[this.state.workMode].name.length>=20?r.a.createElement("span",{className:"warning"},this.state.warning.lengthMax):null,r.a.createElement("input",{className:this.state[this.state.workMode].validateName?"ready":"wrong",value:this.state[this.state.workMode].name,onChange:this.validateName,type:"text",placeholder:"Project name"}),this.state[this.state.workMode].validateType?null:r.a.createElement("span",{className:"warning"},this.state.warning.type),r.a.createElement("select",{onChange:this.selectOption},r.a.createElement("option",{value:"empty"},"--------"),r.a.createElement("option",{value:"landing"},"Landing"),r.a.createElement("option",{value:"portfolio"},"Portfolio")),r.a.createElement("input",{onClick:this.addNewProject,className:"acceptButton",disabled:this.state[this.state.workMode].disabled,type:"button",value:"Submit"}),r.a.createElement("input",{onClick:this.cancel,type:"button",value:"Cancel"}));default:return r.a.createElement(a.Fragment,null)}}}]),t}(r.a.PureComponent)),q=function(e,t,n,a){return function(){var r=Object(A.a)(N.a.mark(function r(o){var c,i;return N.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c=Object(p.a)(t),i=c.length?c[c.length-1].id+1:0,c.push({id:i,title:n,type:a,components:{}}),r.next=5,T.db.collection("users").doc(e).update({projects:c}).then(function(){return o((e=c,{type:"CREATE_PROJECT",projects:Object(p.a)(e)}));var e}).catch(function(e){return o(d(e.message))});case 5:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()};n(148);var Q=Object(w.g)(function(e){var t=Object(a.useState)(e.id),n=Object(B.a)(t,1)[0],o=Object(a.useState)(e.name),c=Object(B.a)(o,1)[0],i=Object(a.useState)(e.type),s=Object(B.a)(i,1)[0];return r.a.createElement("div",{className:"item","data-id":n},r.a.createElement("p",{className:"ProjectName"},c),r.a.createElement("p",{className:"ProjectType"},s),r.a.createElement("div",{className:"projectController"},r.a.createElement("input",{onClick:function(t){e.history.push("/Cabinet/Build/".concat(n)),t.stopPropagation()},className:"projectControllerButton_enter",type:"button",value:"enter build"}),r.a.createElement("input",{onClick:function(t){D.emit("EventDeleteItem",{id:e.id,name:e.name,type:e.type}),t.stopPropagation()},className:"projectControllerButton_delete",type:"button",value:"delete"})))}),Z=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={redirect:!1},n.addNewProject=function(e){n.props.idUser?n.props.dispatch(q(n.props.idUser,n.props.list,e.title,e.type)):n.setState(Object(u.a)({},n.state,{redirect:!0}))},n.makeList=function(e){return e.map(function(e){return r.a.createElement(Q,{key:e.id,id:e.id,name:e.title,type:e.type})})},n.componentWillMount=function(){return D.on("EventAddProject",n.addNewProject)},n.componentWillUnmount=function(){return D.off("EventAddProject",n.addNewProject)},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(w.a,{to:"/"}):r.a.createElement("div",{className:"projectsList__list"},this.makeList(Object(p.a)(this.props.list)))}}]),t}(r.a.PureComponent),$=Object(i.b)(function(e){return{idUser:e.cabinet.idUser,list:Object(p.a)(e.cabinet.projects)}})(Z),ee=(n(149),function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"projectsList"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex-column"},r.a.createElement("div",{className:"projectsList__about"},r.a.createElement("h3",null,"Your Projects")),r.a.createElement($,null))))}}]),t}(r.a.PureComponent)),te=(n(150),n(59).title),ne=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={workMode:"default"},n.logOut=function(e){n.props.dispatch(R(n.props.idUser))},n.deletItem=function(e){n.props.dispatch(X(Object(u.a)({},e,{uid:n.props.firebase.getCurrentUser().uid})))},n.changeWorkMode=function(e){n.setState(Object(u.a)({},n.state,{workMode:e.action}))},n.componentDidMount=function(){D.on("EventDeleteItem",n.deletItem),D.on("EventChangeWorkMode",n.changeWorkMode)},n.componentWillUnmount=function(){D.off("EventDeleteItem",n.deletItem),D.off("EventChangeWorkMode",n.changeWorkMode)},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return this.props.active?r.a.createElement(a.Fragment,null,r.a.createElement(G,{title:te,idUser:this.props.idUser}),"newProject"===this.state.workMode?r.a.createElement(K,{workMode:this.state.workMode}):null,r.a.createElement(ee,null)):this.props.firebase.getCurrentUser()?r.a.createElement(L,{path:"/img/loading.gif",type:"Cabinet"}):r.a.createElement(w.a,{to:"/"})}}]),t}(r.a.PureComponent),ae=Object(i.b)(function(e){return{idUser:e.cabinet.idUser,projects:Object(p.a)(e.cabinet.projects),active:e.cabinet.active}})(U(ne)),re=(n(151),U(function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={config:n.props.config},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){if(this.props.firebase.getCurrentUser()){var e=this.state.config;return r.a.createElement(a.Fragment,null,r.a.createElement(G,{title:e.title}),r.a.createElement("section",{className:"About"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"information"},r.a.createElement("img",{alt:"img",className:"logoAbout",src:"./img/about.jpg"}),r.a.createElement("p",{className:"developer"},r.a.createElement("span",null,"Developer:")," ",e.about.developer),r.a.createElement("p",{className:"year"},r.a.createElement("span",null,"Year:")," ",e.about.year))))))}return r.a.createElement(w.a,{to:"/"})}}]),t}(r.a.PureComponent))),oe=n(81),ce=(n(314),function(e){function t(){var e,n;Object(E.a)(this,t);for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(c)))).state={instrumentPanel:Object(u.a)({},n.props.instrumentPanel),sizeTextValue:120,colorPickerAvtive:!1},n.resetAll=function(e){console.log(e.target),e.stopPropagation(),n.state.colorPickerAvtive&&n.setState(Object(u.a)({},n.state,{colorPickerAvtive:!1}))},n.closePanel=function(e){D.emit("EventClosePanel",{close:!1})},n.setSize=function(e){var t=e.target.value>200?200:e.target.value;e.stopPropagation(),n.setState({sizeTextValue:t},function(){D.emit("EventChangeSizeText",{size:n.state.sizeTextValue+"px"})})},n.setContent=function(e){var t=e.target.value;e.stopPropagation(),D.emit("EventChangeContentText",{content:t})},n.setColor=function(e){e.stopPropagation(),n.setState(Object(u.a)({},n.state,{colorPickerAvtive:!n.state.colorPickerAvtive}))},n.handleChangeComplete=function(e){"background"===n.state.instrumentPanel.target?D.emit("EventChangeColor",e):"text"===n.state.instrumentPanel.target&&D.emit("EventChangeColorText",e)},n.makePanelInstruments=function(e){switch(e){case"text":return r.a.createElement(a.Fragment,null,r.a.createElement("p",{className:"titleInstument"},"Color: "),r.a.createElement("input",{onClick:n.setColor,className:"button_switchColor",type:"button",value:"color pick"}),r.a.createElement("p",{className:"titleInstument"},"Text size: "),r.a.createElement("input",{onChange:n.setSize,type:"number",min:"10",max:"200",value:n.state.sizeTextValue}),n.state.colorPickerAvtive?r.a.createElement(oe.SketchPicker,{onChangeComplete:n.handleChangeComplete}):null,r.a.createElement("p",{className:"titleInstument"},"Content: "),r.a.createElement("input",{onChange:n.setContent,maxLength:"20",type:"text",defaultValue:"Title"}));case"background":return r.a.createElement(a.Fragment,null,r.a.createElement("p",{className:"titleInstument"},"Color: "),r.a.createElement("input",{onClick:n.setColor,className:"button_switchColor",type:"button",value:"color pick"}),n.state.colorPickerAvtive?r.a.createElement(oe.SketchPicker,{onChangeComplete:n.handleChangeComplete}):null);default:return r.a.createElement("p",{className:"warningInstruments"},"Select elements for accses edit instruments")}},n.componentDidUpdate=function(e,t){return t.instrumentPanel.target!==n.props.instrumentPanel.target&&n.setState(Object(u.a)({},n.state,{colorPickerAvtive:!1,instrumentPanel:Object(u.a)({},n.props.instrumentPanel)})),!0},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.state.instrumentPanel.instrumentActive;return r.a.createElement("div",{className:"instumentsPanel"},r.a.createElement("button",{onClick:this.closePanel,className:"closeInstrumentsPanel"},r.a.createElement(H,{path:"/img/close.svg"})),r.a.createElement("h3",null,"Instruments"),e?r.a.createElement("p",{className:"titleComponent important"},this.state.instrumentPanel.target):null,e?r.a.createElement("div",{className:"instuments"},this.makePanelInstruments(this.state.instrumentPanel.target)):null)}}]),t}(r.a.PureComponent)),ie=n(37),se=n(38);function le(){var e=Object(ie.a)(["\n    width: 100%;\n"]);return le=function(){return e},e}function ue(){var e=Object(ie.a)(["\n    position: relative;\n    width: 100%;\n    height: 95vh;\n    background: ","\n"]);return ue=function(){return e},e}function pe(){var e=Object(ie.a)(["\n    position: absolute;\n    left: 50%;\n    transform: translate(-50%);\n    font-size: ",";\n    color: ",";\n    text-align: center;\n    margin: 0;\n"]);return pe=function(){return e},e}var me=se.a.h1(pe(),function(e){return e.size},function(e){return e.textColor}),de=se.a.div(ue(),function(e){return e.background}),fe=(se.a.video(le()),function(e){D.emit("EventInstrumentPanel",{target:"background"}),e.stopPropagation()}),he=function(e){D.emit("EventInstrumentPanel",{target:"text"}),e.stopPropagation()},be=function(e){var t=Object(a.useState)(e.color),n=Object(B.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(e.size),s=Object(B.a)(i,2),l=s[0],u=s[1],p=Object(a.useState)(e.children),m=Object(B.a)(p,2),d=m[0],f=m[1],h=function(e){var t=e.rgb,n="rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")");c(n)},b=function(e){var t=e.size;u(t)},v=function(e){var t=e.content;f(t)};return Object(a.useEffect)(function(e){return D.on("EventChangeColorText",h),D.on("EventChangeSizeText",b),D.on("EventChangeContentText",v),function(){D.off("EventChangeColorText",h),D.off("EventChangeSizeText",b),D.off("EventChangeContentText",v)}}),r.a.createElement(me,{onClick:he,textColor:o||"red",size:l||"120px"},d)},ve=function(e){var t=Object(a.useState)(e.background),n=Object(B.a)(t,2),o=n[0],c=n[1],i=function(e){var t=e.rgb,n="rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")");c(n)};return Object(a.useEffect)(function(e){return D.on("EventChangeColor",i),function(){D.off("EventChangeColor",i)}}),r.a.createElement(de,{onClick:fe,background:o},e.children)},ge=(n(317),function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={component:Object(u.a)({},n.props.component),title:"Title"},n.addText=function(e){var t=[];t.push(r.a.createElement(be,{key:"header"},n.state.title)),D.emit("EventBuildHeaderComponents",{target:"Header",type:"text",component:t}),e.stopPropagation()},n.addBackground=function(e){var t=[];t.push(r.a.createElement(ve,{key:"bgHeader"})),D.emit("EventBuildHeaderComponents",{target:"Header",type:"background",component:t}),e.stopPropagation()},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ComponentsMenu"},r.a.createElement("button",{onClick:this.addBackground,className:"ImageTool CompoentnsMenu_button"},r.a.createElement("span",null,"Image")),r.a.createElement("button",{onClick:this.addText,className:"TextTool CompoentnsMenu_button"},r.a.createElement("span",null,"Text")),r.a.createElement("button",{disabled:"Header"===this.state.component.name,className:"ButtonTool CompoentnsMenu_button"},r.a.createElement("span",null,"Button")),r.a.createElement("button",{className:"VideoTool CompoentnsMenu_button"},r.a.createElement("span",null,"Video")))}}]),t}(r.a.PureComponent));function Ee(){var e=Object(ie.a)(["position: absolute;"]);return Ee=function(){return e},e}var je=se.a.div.attrs(function(e){return{style:{left:e.coordX,top:e.coordY}}})(Ee()),Oe=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={viewComponentMenu:!1,shiftX:0,shiftY:0,coordsX:"50%",coordsY:"0"},n.componentMenu=function(e){n.setState({viewComponentMenu:!n.state.viewComponentMenu})},n.saveCoords=function(e){var t=e.target.getBoundingClientRect().left,a=e.target.getBoundingClientRect().top;n.setState(Object(u.a)({},n.state,{shiftX:e.pageX-t,shiftY:e.pageY-a+55})),e.stopPropagation()},n.drag=function(e){n.state.viewComponentMenu||n.setState(Object(u.a)({},n.state,{coordsX:e.pageX-n.state.shiftX+"px",coordsY:e.pageY-n.state.shiftY+"px"})),e.stopPropagation()},n.controlBox=null,n.refControll=function(e){return n.controlBox=e},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,this.props.menuActive?r.a.createElement(je,{ref:this.refControll,className:"ControllersEditComponent",coordX:this.state.coordsX,coordY:this.state.coordsY,draggable:!this.state.viewComponentMenu,onMouseDown:this.saveCoords,onClick:this.componentMenu,onDrag:this.drag,onDragEnd:this.drag},r.a.createElement(H,{draggable:!0,onClick:this.componentMenu,className:"addButton",path:"/img/addButton.png"}),this.state.viewComponentMenu?r.a.createElement(ge,{component:Object(u.a)({},this.props.component)}):null):null)}}]),t}(r.a.PureComponent),Ce=(n(318),function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={idProject:n.props.id,component:Object(u.a)({},n.props.children)},n.changeMode=function(e){n.props.editStart||D.emit("EventModeEdit",Object(u.a)({},n.state))},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{onClick:this.changeMode,className:"Header"},r.a.createElement(ve,{background:"grey"},this.props.children.build.component&&"text"===this.props.children.build.type?this.props.children.build.component:null),this.props.editStart?null:r.a.createElement("p",{className:"warningEdit"},"Click for start edit"),this.state.readyBuild?null:r.a.createElement(Oe,{menuActive:this.props.menuActive,component:Object(u.a)({},this.state.component)})))}}]),t}(r.a.PureComponent)),ye=(n(319),function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={idProject:parseInt(n.props.match.params.param),typeProject:null,editComponent:{name:null,build:{},edit:!1},changeEdit:!1,instrumentPanel:{instrumentActive:!1,target:""},menuActive:!1,editStart:!1},n.workModeEdit=function(e){n.state.editStart&&!n.state.changeEdit||n.setState(Object(u.a)({},n.state,{idProject:e.idProject,editComponent:Object(u.a)({},e.component),menuActive:!0,editStart:!0}))},n.openInstrument=function(e){n.state.editStart&&n.setState(Object(u.a)({},n.state,{instrumentPanel:Object(u.a)({},n.state.instrumentPanel,{instrumentActive:!0,target:e.target})}))},n.closePanel=function(e){n.setState(Object(u.a)({},n.state,{instrumentPanel:Object(u.a)({},n.state.instrumentPanel,{colorPickerAvtive:!1,instrumentActive:e.close})}))},n.addHeaderComponent=function(e){n.setState(Object(u.a)({},n.state,{editComponent:Object(u.a)({},n.state.editComponent,{build:{target:e.target,type:e.type,component:Object(p.a)(e.component)}})}))},n.componentDidMount=function(){D.on("EventBuildHeaderComponents",n.addHeaderComponent),D.on("EventClosePanel",n.closePanel),D.on("EventInstrumentPanel",n.openInstrument),D.on("EventModeEdit",n.workModeEdit)},n.componentWillUnmount=function(){D.off("EventBuildHeaderComponents",n.addHeaderComponent),D.off("EventClosePanel",n.closePanel),D.off("EventInstrumentPanel",n.openInstrument),D.off("EventModeEdit",n.workModeEdit)},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.state.instrumentPanel.instrumentActive;return this.props.active?r.a.createElement(a.Fragment,null,e?r.a.createElement(ce,{editComponent:Object(u.a)({},this.state.editComponent),instrumentPanel:Object(u.a)({},this.state.instrumentPanel)}):null,r.a.createElement(G,{title:"Constructor"}),r.a.createElement(Ce,{editStart:this.state.editStart,menuActive:this.state.menuActive,id:this.state.idProject},Object(u.a)({},this.state.editComponent,{name:"Header"}))):this.props.firebase.getCurrentUser()?r.a.createElement(L,{path:"/img/loading.gif",type:"build"}):r.a.createElement(w.a,{to:"/"})}}]),t}(r.a.PureComponent)),Pe=Object(i.b)(function(e){return Object(u.a)({},e.builder,{active:e.cabinet.active,idUser:e.cabinet.idUser,currentEditable:{}})})(U(ye)),we=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={firebase:n.props.firebase,firebaseLoadState:!1},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth.onAuthStateChanged(function(t){var n;e.state.firebaseLoadState||(t&&e.props.dispatch((n=t.uid,function(){var e=Object(A.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.db.collection("users").doc(n).get().then(function(e){var a=e.data();t(m({uid:n,projects:Object(p.a)(a.projects)}))}).catch(function(e){return t(d(e.message))});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())),e.setState({firebaseLoadState:!0}))})}},{key:"render",value:function(){var e=this;return this.state.firebaseLoadState?r.a.createElement(P.a,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(V,e)}}),r.a.createElement(w.b,{path:"/Cabinet/",exact:!0,component:ae}),r.a.createElement(w.b,{path:"/Cabinet/About",render:function(t){return r.a.createElement(re,Object.assign({},t,{config:e.props.config}))}}),r.a.createElement(w.b,{path:"/Cabinet/Build/:param",component:Pe}),r.a.createElement(w.b,{path:"*",component:V}),";")):r.a.createElement(L,{path:"/img/loading.gif",type:"application"})}}]),t}(r.a.PureComponent),ke=Object(i.b)(function(e){return{active:e.cabinet.active}})(U(we)),Ne=(n(320),n(59));c.a.render(r.a.createElement(i.a,{store:g},r.a.createElement(ke,{config:Ne})),document.getElementById("root"))},59:function(e){e.exports={title:"Constructor",CabinetIcon:"/img/logo.svg",about:{developer:"Pavel Petrovich",year:"2019"}}}},[[127,1,2]]]);
//# sourceMappingURL=main.c735f9f7.chunk.js.map