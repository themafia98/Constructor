(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(t,e,n){t.exports=n(482)},278:function(t,e,n){},285:function(t,e,n){},286:function(t,e,n){},287:function(t,e,n){},288:function(t,e,n){},291:function(t,e,n){},292:function(t,e,n){},296:function(t,e,n){},297:function(t,e,n){},298:function(t,e,n){},299:function(t,e,n){},300:function(t,e,n){},301:function(t,e,n){},302:function(t,e,n){},303:function(t,e,n){},311:function(t,e,n){},474:function(t,e,n){},475:function(t,e,n){},476:function(t,e,n){},477:function(t,e,n){},478:function(t,e,n){},479:function(t,e,n){},480:function(t,e,n){},482:function(t,e,n){"use strict";n.r(e);n(215),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(239),n(240),n(241),n(242),n(254),n(255),n(257),n(259),n(260),n(264),n(266);var a=n(0),o=n.n(a),r=n(42),i=n.n(r),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}var l=n(3),u=n(4),p=n(71),m=n.n(p),d={apiKey:"AIzaSyBrLv9RyGWXCeEETRqBbBo3EVOcibmnJwU",authDomain:"constructor-acb61.firebaseapp.com",databaseURL:"https://constructor-acb61.firebaseio.com",projectId:"constructor-acb61",storageBucket:"",messagingSenderId:"654914699801",appId:"1:654914699801:web:245a75eea5c628d5"},f=n(57),h=(n(273),n(275),new(function(){function t(e){Object(l.a)(this,t),m.a.initializeApp(e),this.auth=m.a.auth(),this.db=m.a.firestore(),"true"===f.firebase.lowConnection&&this.db.enablePersistence().then(function(t){return console.warn(t)}).catch(function(t){return console.error(t)})}return Object(u.a)(t,[{key:"saveSession",value:function(t){return this.auth.setPersistence(m.a.auth.Auth.Persistence[t])}},{key:"login",value:function(t,e){try{return this.auth.signInWithEmailAndPassword(t,e)}catch(n){return console.error(n),null}}},{key:"registration",value:function(t,e){return this.auth.createUserWithEmailAndPassword(t,e)}},{key:"signOut",value:function(){return this.auth.signOut()}},{key:"getCurrentUser",value:function(){return this.auth.currentUser}}]),t}())(d));h.saveSession(f.firebase.session);var g=h,b=n(7),v=n(5),S=n(6),E=n(37),y=n.n(E),O=new E.EventEmitter,j=new E.EventEmitter;j.setMaxListeners(20);var P=O,C=n(48),w=(n(278),function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={redirect:!1},n.update=function(t){n.setState({redirect:!0},function(){return P.emit("EventErrorCatchUpdate")})},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return this.state.redirect?o.a.createElement(C.a,{to:"/"}):o.a.createElement("div",{class:"container"},o.a.createElement("div",{class:"flex-column ErrorPage"},o.a.createElement("h1",null,"Application crash"),o.a.createElement("button",{className:"ErrorPage__button_updateApp",onClick:this.update},"Update")))}}]),e}(o.a.Component)),N=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={hasError:!1},n.updateApplication=function(t){n.setState({hasError:!1})},n.componentDidMount=function(){P.on("EventErrorCatchUpdate",n.updateApplication)},n.componentWillUnmount=function(){P.off("EventErrorCatchUpdate",n.updateApplication)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"componentDidCatch",value:function(t,e){console.error(t+","+e)}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(w,null):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return console.log(t),{hasError:!0}}}]),e}(o.a.PureComponent),x=n(32),k=n(15),D=n(47),I=n(206),z=n(2),B=n(8),M=function(t){return{type:"EXIT_PROJECT",exit:t}},_=function(t){return{type:"LOAD_CURRENT",id:t.id,typeProject:t.typeProject,sectionsProject:t.sectionsProject,components:t.components}},A=function(t){return{type:"LOAD_UPDATE_PROJECT",idProject:t.idProject,sectionsProject:Object(z.a)(t.sectionsProject),components:Object(z.a)(t.components)}},T=function(t){return{type:"LOAD_USER_CABINET",active:!0,idUser:t.uid,error:"",projects:t.projects}},R=function(t){return{type:"ERROR_CABINET",error:t}};function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var W={loadProject:!1,idProject:null,typeProject:null,components:[],sectionsProject:[]};function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var V={active:!1,idUser:null,projects:[],error:null},H=Object(D.c)({builder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOAD_CURRENT":return F({},t,{loadProject:!0,idProject:e.id,typeProject:e.typeProject,components:Object(z.a)(e.components),sectionsProject:Object(z.a)(e.sectionsProject)});case"LOAD_UPDATE_PROJECT":return F({},t,{components:Object(z.a)(e.components),sectionsProject:Object(z.a)(e.sectionsProject)});case"EXIT_PROJECT":return e.exit?F({},t,{loadProject:!1,idProject:null,typeProject:null,components:[],sectionsProject:[]}):t;default:return t}},cabinet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOAD_USER_CABINET":return L({},t,{active:e.active,idUser:e.idUser,projects:Object(z.a)(e.projects)});case"CREATE_PROJECT":return L({},t,{projects:Object(z.a)(e.projects)});case"LOAD_UPDATE_PROJECT":return L({},t,{projects:t.projects.map(function(t){return t.id===e.idProject&&(t.components=Object(z.a)(e.components),t.sectionsProject=Object(z.a)(e.sectionsProject)),t})});case"LOG_OUT_CABINET":return L({},t,{active:!1,idUser:null,projects:[]});case"ERROR_CABINET":return L({},t,{error:e.error});default:return t}}}),J=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):D.d)(Object(D.a)(I.a.withExtraArgument({firebase:g}))),Y=Object(D.e)(H,J),G=n(14),Z=n.n(G),q=n(26),K=function(t,e){return function(){var n=Object(q.a)(Z.a.mark(function n(a,o,r){var i,c;return Z.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.firebase,c=!0,n.next=4,i.login(t,e).then(function(t){i.db.collection("users").doc(t.user.uid).get().then(function(t){var e=t.data();a(T({uid:t.id,projects:Object(z.a)(e.projects)}))})}).catch(function(t){console.error(t.message),a(R(t.message))});case 4:return n.abrupt("return",c);case 5:case"end":return n.stop()}},n)}));return function(t,e,a){return n.apply(this,arguments)}}()},$=function(t){return function(){var t=Object(q.a)(Z.a.mark(function t(e,n,a){var o;return Z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.firebase,t.next=3,o.signOut().then(function(t){e({type:"LOG_OUT_CABINET",active:!1,idUser:null,error:"",projects:[]})}).catch(function(t){console.error(t.message),e(R(t.message))});case 3:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}()},Q=o.a.createContext(g),tt=function(t){return function(e){return o.a.createElement(Q.Consumer,null,function(n){return o.a.createElement(t,Object.assign({},e,{firebase:n}))})}},et=n(12),nt=(n(285),function(t){var e=Object(a.useState)(t.path?"/constructor"+t.path:"/constructor/img/loading.gif"),n=Object(et.a)(e,1)[0],r=Object(a.useState)(!!t.mode&&t.mode),i=Object(et.a)(r,1)[0];return o.a.createElement("div",{className:"loaderBox ".concat(i&&"specialMode")},o.a.createElement("img",{className:"loader",src:n,alt:"loader"}),!i&&o.a.createElement("p",null,"Loading ".concat(t.type)))}),at=n(484),ot=n(483),rt=n(43),it=n(18),ct=n(19);function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ut(){var t=Object(it.a)(["\n    user-select: none;\n    transition: .4s linear all;\n    color: ",";\n"]);return ut=function(){return t},t}var pt=ct.a.h3(ut(),function(t){return"up"===t.dir?"red":"blue"}),mt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={tilteContent:n.props.content.split(""),currentTitle:n.props.content[0],positionTitle:1,directionAnimation:"up",msAnimation:n.props.msAnimation,msTimeout:n.props.msAnimation,msPauseEnd:n.props.msPauseEnd},n._isMounted=!1,n.timerAnimation=null,n.animationTitle=function(t){var e=Object(rt.a)(n);n._isMounted&&setTimeout(function t(){if(e._isMounted){if("up"===e.state.directionAnimation){var n=e.state.tilteContent.length,a=n>e.state.positionTitle?e.state.tilteContent[e.state.positionTitle]:e.state.tilteContent[e.state.positionTitle-1];e.setState(lt({},e.state,{currentTitle:e.state.currentTitle+a,positionTitle:e.state.positionTitle+1,directionAnimation:e.state.positionTitle===n?"down":"up",msAnimation:e.state.positionTitle===n?e.state.msPauseEnd:e.state.msTimeout}))}if("down"===e.state.directionAnimation){var o=e.state.currentTitle,r=e.state.currentTitle.length;o=o.slice(0,r-1),e.setState(lt({},e.state,{currentTitle:o,positionTitle:e.state.positionTitle-1,directionAnimation:2===e.state.positionTitle?"up":"down",msAnimation:2===e.state.positionTitle?e.state.msPauseEnd:e.state.msTimeout}))}setTimeout(t,e.state.msAnimation)}},n.state.msAnimation)},n.componentDidMount=function(t){n._isMounted=!0,n.animationTitle(n.timerAnimation)},n.componentWillUnmount=function(t){n._isMounted=!1,n.timerAnimation&&clearTimeout(n.timerAnimation)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return o.a.createElement(pt,{"data-titlebuild":!0,dir:this.state.directionAnimation},this.state.currentTitle)}}]),e}(o.a.PureComponent),dt=(n(286),tt(function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={firebase:n.props.firebase,error:null},n.emailRef=null,n.passwordRef=null,n.setRefEmail=function(t){return n.emailRef=t},n.setRefPassword=function(t){return n.passwordRef=t},n.createUser=function(t){var e=n.emailRef?n.emailRef.value:null,a=n.passwordRef?n.passwordRef.value:null,o=n.props.firebase;if(!a||!e)return n.setState({error:"invalid user data"});o.registration(e,a).then(function(t){if(!t)throw new Error("Ivaid registration");o.db.collection("users").doc(t.user.uid).set({projects:[],email:e}).then(function(){return n.props.indexStream.emit("EventRegistrationCorrect",t)})}).catch(function(t){console.error(t.message),n.setState({error:t.message})})},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.state.error;return o.a.createElement("div",{className:"RegistrationBox"},o.a.createElement("div",{className:"RegistrationBox__RegistrationForm"},o.a.createElement("h3",null,"Registration"),o.a.createElement("form",{autoComplete:"off",className:"RegistrationForm__RegForm"},t?o.a.createElement("p",{className:"error"},t):null,o.a.createElement("span",null,"E-mail"),o.a.createElement("input",{placeholder:"email",ref:this.setRefEmail,type:"text"}),o.a.createElement("span",null,"Password"),o.a.createElement("input",{className:"password",autoComplete:"off",ref:this.setRefPassword,type:"password",placeholder:"password"}),o.a.createElement("input",{onClick:this.createUser,className:"RegForm__loginButton",type:"button",value:"registration"}))))}}]),e}(o.a.PureComponent)));n(287),n(288);var ft=function(t){var e=Object(a.useState)(t.path),n=Object(et.a)(e,1)[0],r=Object(a.useState)(t.className?t.className:null),i=Object(et.a)(r,1)[0],c=Object(a.useState)(!!t.draggable),s=Object(et.a)(c,1)[0];return o.a.createElement("img",{draggable:s,onClick:t.onClick?t.onClick:null,className:i,title:t.title?t.title:null,src:"/constructor"+n,alt:"icon"})};function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var bt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).indexStream=new y.a,n.state={title:n.props.config.title,tryAuth:!1,registrationActive:!1,regStatus:!1,wrongEnter:!1,error:""},n.emailImput=null,n.passwordImput=null,n.statusRegistration=function(t){t.additionalUserInfo.isNewUser?n.setState(gt({},n.state,{regStatus:!0,registrationActive:!1,error:"Account create!"})):console.error("error registration")},n.showBox=function(t){try{n.setState(gt({},n.state,{registrationActive:!n.state.registrationActive}))}catch(e){console.error("animation fail")}t.stopPropagation()},n.authTo=function(t){n.emailImput&&n.passwordImput&&n.props.dispatch(K(n.emailImput.value,n.passwordImput.value)),t.stopPropagation()},n.emailRef=function(t){return n.emailImput=t},n.passwordRef=function(t){return n.passwordImput=t},n.componentDidUpdate=function(){n.props.active&&n.props.history.push("/Cabinet")},n.componentDidMount=function(t){n.props.active&&n.props.history.push("/Cabinet"),n.indexStream.on("EventRegistrationCorrect",n.statusRegistration)},n.componentWillUnmount=function(t){n.indexStream.off("EventRegistrationCorrect",n.statusRegistration)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return this.props.active?o.a.createElement(nt,{path:"/img/loading.gif",type:"session"}):o.a.createElement("div",{className:"LoginPage flex-column"},o.a.createElement("h1",null,this.state.title),o.a.createElement("div",{className:"LoginPage__LoginBox"},o.a.createElement(mt,{content:"Build your landing page!",msPauseEnd:1e3,msAnimation:150}),o.a.createElement("form",{className:"LoginBox__LoginForm"},o.a.createElement("h3",null,"Connect form"),this.state.tryAuth&&o.a.createElement(ft,{className:"LoginBox__LoginForm__loader",path:"/img/loading.gif"}),!this.props.wrongEnter&&!this.state.regStatus||this.state.tryAuth?null:o.a.createElement("p",{className:"error"},this.props.wrongEnter),o.a.createElement("p",null,"E-mail"),o.a.createElement("input",{autoComplete:"off",placeholder:"email",ref:this.emailRef,type:"text"}),o.a.createElement("p",null,"Password"),o.a.createElement("input",{ref:this.passwordRef,type:"password",autoComplete:"off",placeholder:"password"}),o.a.createElement("input",{onClick:this.authTo,className:"LoginForm__loginButton enterInput",type:"button",value:"enter"}),o.a.createElement("input",{onClick:this.showBox,className:this.state.registrationActive?"LoginForm__loginButton registration selected":"LoginForm__loginButton registration",type:"button",value:"registration"}))),o.a.createElement(at.a,{component:null},this.state.registrationActive&&o.a.createElement(ot.a,{timeout:300,unmountOnExit:!0,classNames:"RegAnim"},o.a.createElement(dt,{indexStream:this.indexStream}))))}}]),e}(o.a.PureComponent),vt=Object(k.b)(function(t){return{active:t.cabinet.active,wrongEnter:t.cabinet.error}})(bt),St=function(t){return function(){var e=Object(q.a)(Z.a.mark(function e(n,a,o){var r;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.firebase,e.next=3,r.db.collection("users").doc(t.uid).get().then(function(t){return t.data()}).then(function(e){var n=Object(z.a)(e.projects).find(function(e){return t.id===e.id});if(!n)throw new Error("No found project");return n.components=n.components.filter(function(e){return e.id!==t.idComponent}),t&&"background"===t.type&&(n.sectionsProject=n.sectionsProject.filter(function(e){return e!==t.idComponent})),{dataUpdate:e,findProject:n}}).then(function(e){var a=e.dataUpdate,o=e.findProject;r.db.collection("users").doc(t.uid).update({projects:a.projects}).then(function(e){n(A({components:Object(z.a)(o.components),idProject:t.id,sectionsProject:Object(z.a)(o.sectionsProject)}))})}).catch(function(t){return console.error(t.message),n(R(t.message)),null});case 3:return e.abrupt("return",t.idComponent);case 4:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()},Et=function(t){return function(){var e=Object(q.a)(Z.a.mark(function e(n,a,o){var r;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.firebase,e.next=3,r.db.collection("users").doc(t.uid).get().then(function(t){return t.data()}).then(function(e){return{id:t.uid,projects:e.projects.filter(function(e){return e.id!==t.id})}}).then(function(e){r.db.collection("users").doc(t.uid).update({projects:e.projects}).then(function(a){n(T({uid:t.uid,projects:e.projects}))})}).catch(function(t){console.error(t.message),n(R(t.message))});case 3:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()},yt=(n(291),n(292),function(t){return o.a.createElement("div",{className:"wrapperConfirm"},o.a.createElement("div",{className:"confirmSave"},o.a.createElement("span",null,"Detected new changes"),o.a.createElement("input",{className:"saveCofirm",onClick:t.cbSaveChanges,type:"button",value:"Save changes"}),o.a.createElement("input",{className:"cancelCofirm",onClick:t.cbCancelSave,type:"button",value:"Cancel"})))}),Ot=n(92),jt=n(93);function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var wt=n(57).CabinetIcon,Nt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={idUser:n.props.idUser,title:n.props.title,isChange:!1,redirectConfirm:!1,redirectAbout:{path:"/Cabinet/About",redirectA:!1},redirectCabinet:{path:"/Cabinet",redirectC:!1},redirectGuide:{path:"/Cabinet/Guide",redirectG:!1}},n.confirm=function(t){"object"!==typeof t?n.setState({isChange:t}):n.setState({isChange:t.false,redirectConfirm:t.confirm})},n.confirmSaveDetectChanges=function(t){P.emit("EventRedirectSaveChanges"),n.setState({redirectConfirm:!1,redirectCabinet:Ct({},n.state.redirectCabinet,{redirectC:!0})})},n.logOut=function(t){n.state.idUser&&n.props.dispatch($(n.props.idUser)),t.stopPropagation()},n.redirectAbout=function(t){n.props.location.pathname!==n.state.redirectAbout.path&&!n.state.isChange?n.props.history.push(n.state.redirectAbout.path):n.state.redirectConfirm||n.setState({redirectConfirm:!0}),t.stopPropagation()},n.redirectGuide=function(t){n.props.location.pathname!==n.state.redirectGuide.path&&!n.state.isChange?n.props.history.push(n.state.redirectGuide.path):n.state.redirectConfirm||n.setState({redirectConfirm:!0}),t.stopPropagation()},n.redirectCabinet=function(t){"cancelMode"!==t?(n.props.location.pathname!==n.state.redirectCabinet.path&&!1===n.state.isChange?n.props.history.push(n.state.redirectCabinet.path):n.state.redirectConfirm||n.setState({redirectConfirm:!0}),t.stopPropagation()):n.setState({redirectConfirm:!1,redirectCabinet:Ct({},n.state.redirectCabinet,{redirectC:!0})})},n.exit=Object(q.a)(Z.a.mark(function t(){return Z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.props.dispatch(M(!0));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),n.add=function(t){n.props.cabinetStream.emit("EventChangeWorkMode",{active:!0,action:"newProject"}),t.stopPropagation()},n.prevProject=function(t){0!==n.props.idProject&&n.props.history.push("/Cabinet/Build/".concat(n.props.idProject-1)),t.stopPropagation()},n.nextProject=function(t){n.props.idProject<n.props.counterProjects&&n.props.history.push("/Cabinet/Build/".concat(n.props.idProject+1))},n.componentDidlMount=function(){P.on("EventRedirectConfirm",n.confirm)},n.componentWillUnmount=function(){P.off("EventRedirectConfirm",n.confirm)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return o.a.createElement(o.a.Fragment,null,this.state.isChange&&this.state.redirectConfirm?o.a.createElement(yt,{cbSaveChanges:this.confirmSaveDetectChanges,cbCancelSave:function(){return t.redirectCabinet("cancelMode")}}):null,o.a.createElement("header",null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"flex-row"},o.a.createElement("div",{onClick:this.redirectCabinet,className:"header__CabinetInfo"},o.a.createElement(ft,{className:"mainIcon",path:wt}),o.a.createElement("h3",{className:"tilteApp"},this.state.title," ")),this.props.location.pathname==="/Cabinet/Build/".concat(this.props.idProject)&&o.a.createElement(Ot.a,{className:" switcher fas fa-2x",icon:jt.b,onClick:this.prevProject}),this.props.location.pathname==="/Cabinet/Build/".concat(this.props.idProject)&&o.a.createElement(Ot.a,{className:" switcher fas fa-2x",icon:jt.c,onClick:this.nextProject}),"/Cabinet"===this.props.location.pathname?o.a.createElement("div",{onClick:this.add,className:"header__newProject__AddButton"},o.a.createElement(ft,{className:"Cabinet",path:"/img/plus.png"})):null,o.a.createElement("div",{className:"Navigator"},o.a.createElement(Ot.a,{className:" about fas fa-2x",icon:jt.a,onClick:this.redirectGuide}),o.a.createElement(ft,{className:"about",onClick:this.redirectAbout,title:"about",path:"/img/about_logo.svg"}),o.a.createElement(ft,{className:"logoutButton",onClick:this.logOut,title:"logOut",path:"/img/logOut.svg"}))))))}}]),e}(o.a.Component),xt=Object(k.b)()(Object(C.g)(Nt)),kt=n(139),Dt=n.n(kt),It=function(t){var e=t.selected,n=Object(a.useState)(t.id),r=Object(et.a)(n,1)[0],i=Object(a.useState)(t.urls.regular),c=Object(et.a)(i,1)[0],s=Object(a.useState)(t.urls.full),l=Object(et.a)(s,1)[0],u=Object(a.useState)(t.isFull),p=Object(et.a)(u,1)[0],m=Object(a.useState)(t.urlContent),d=Object(et.a)(m,1)[0];return o.a.createElement("div",{className:e?"ItemBox selected":"ItemBox"},o.a.createElement("img",{className:"ImageItem",onClick:function(t){P.emit("EventShowMenuImage",{id:r,url:c,urlFull:l,iframe:d}),t.stopPropagation()},src:p?l:c,alt:"item"}))},zt=function(t){var e=t.content,n=e.disabled,a=e.validateName,r=e.name,i=e.validateType,c=r.length,s=c>=4&&c<=20;return o.a.createElement("div",{className:"Modal Modal__create"},o.a.createElement("h3",null,"Create new Project"),c<=3?o.a.createElement("span",{className:"warning"},t.warningLengthMin):null,c>=20?o.a.createElement("span",{className:"warning"},t.warningLengthMax):null,s&&!a?o.a.createElement("span",{className:"warning"},t.warningNumber):null,o.a.createElement("input",{className:a?"ready":"wrong",value:t.name,onChange:t.cbValidateName,type:"text",placeholder:"Project name"}),i?null:o.a.createElement("span",{className:"warning"},t.warningType),o.a.createElement("select",{className:"projectSelect",onChange:t.cbSelectOption},o.a.createElement("option",{value:"empty"},"--------"),o.a.createElement("option",{value:"landing"},"Landing")),o.a.createElement("input",{onClick:t.cbAddNewProject,className:"acceptButton",disabled:n,type:"button",value:"Submit"}),o.a.createElement("input",{onClick:t.cbCancel,type:"button",value:"Cancel"}),t.loading&&o.a.createElement(nt,{mode:"create"}))};function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var Mt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={mode:n.props.modalSearchMode,items:n.props.images},n.search=function(t){var e=n.refSearch?n.refSearch.value:null;n.props.cbSearch(t,e,n.props.modalSearchMode),t.stopPropagation()},n.refSearch=null,n.refSearchFunc=function(t){return n.refSearch=t},n.componentDidUpdate=function(t,e){var a=n.props.content,o=t.content,r=o.images!==a.images&&a.images,i=o.selectedItem!==a.selectedItem;if(r||i){var c=n.props.cbMakeImageResultBox(a.images);n.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n.state,{items:Object(z.a)(c)}))}},n.componentDidMount=function(){P.emit("EventBlockScroll","window")},n.componentWillUnmount=function(){P.emit("EventBlockScroll","default")},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.content;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"Modal Modal-search"},o.a.createElement("h3",null,this.props.modalSearchMode?"Search ".concat(this.props.modalSearchMode):""),this.props.error?o.a.createElement("span",{className:"error"},t.error):null,o.a.createElement("div",{className:"Modal-search__controllers"},o.a.createElement("input",{ref:this.refSearchFunc,type:"text"}),o.a.createElement("input",{disabled:t.dissabled,className:"acceptButton",type:"button",value:"Search",onClick:this.search}),o.a.createElement("input",{onClick:this.props.cbCancel,type:"button",value:"Cancel"})),o.a.createElement("div",{className:"searchResultBox"},this.state.items,this.props.loading?o.a.createElement(nt,{type:"images"}):null)),this.props.menuActive?o.a.createElement("div",{className:"ActionModalSearch"},o.a.createElement("button",{onClick:this.props.cbShowImage,className:"actionModalSearch__view"},o.a.createElement(ft,{path:"/img/view.png"})),o.a.createElement("button",{onClick:this.props.cbSetSelectedImage,className:"actionModalSearch__settings"},o.a.createElement(ft,{path:"/img/settings.png"}))):null)}}]),e}(o.a.PureComponent);n(296);function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function At(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Tt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).state={workMode:n.props.workMode,loading:!1,items:[],images:{loading:!1,buttonSearchDisabled:!1,selectedItem:null,showUrl:null,images:[],urlFull:null,imageBoxView:!1,iframe:null,error:""},newProject:{validateName:!1,validateType:!1,disabled:!0,name:"",type:"empty"},imageMenuActive:!1,warning:{lengthMax:"Max length: 20 laters",warningNumber:"Don't use numbers",lengthMin:"Min length: 4 letters",type:"Select type of webpage"}},n.inputSearch=null,n.inputSelect=null,n.searchData=function(t,e,a){if(t.target.value&&e){n.setState(At({},n.state,{images:At({},n.state.images,{loading:!0,buttonSearchDisabled:!0})}));var o=null;if(o=e||n.inputSearch.value,"media"!==a){var r="https://api.unsplash.com/".concat("search/photos/?page=1&per_page=40&query=");Dt()("".concat(r+o,"&client_id=").concat("421b12ae729e1f6e4a0cac207496874099ab8a738378ec07a8e2598b11201802")).then(function(t){if(t.ok)return t.json();throw new Error("request invalid")}).then(function(t){var e=t.results;if(!e.length)throw new Error("Photos not found");n.setState(At({},n.state,{images:At({},n.state.images,{loading:!1,imageBoxView:!0,error:"",images:Object(z.a)(e),buttonSearchDisabled:!1})}))}).catch(function(t){console.error(t.message),n.setState(At({},n.state,{images:At({},n.state.images,{buttonSearchDisabled:!1,loading:!1,error:t.message}),imageBoxView:!1}))})}else n.searchYouTubeAPI(o)}},n.searchYouTubeAPI=function(t){var e="&maxResults=25&order=date&q=".concat(t),a="&key=".concat("AIzaSyAaGh0iFqVG7ouHG1FEUKxk8TrwDgpo7hw");Dt()("https://www.googleapis.com/youtube/v3/search?part=snippet"+e+a).then(function(t){if(t.ok)return t.json();throw new Error("Error ".concat(t.status))}).then(function(t){var e=[];return t.items.forEach(function(t){e.push({urls:{regular:t.snippet.thumbnails.high.url},videoId:t.id.videoId})}),e}).then(function(t){n.setState(At({},n.state,{images:At({},n.state.images,{loading:!1,imageBoxView:!0,error:"",images:Object(z.a)(t),buttonSearchDisabled:!1})}))}).catch(function(t){return console.error(t)})},n.showMenuImage=function(t){n.setState(At({},n.state,{imageMenuActive:!0,images:At({},n.state.images,{selectedItem:t.id,showUrl:t.url,urlFull:t.urlFull,iframe:t.iframe})}))},n.showImage=function(t){var e=n.state.images,a=e.showUrl,o=e.iframe;n.props.eventStreamBuild.emit("EventView",{action:!0,target:a||null,iframe:o,mode:n.props.modalSearchMode}),t.stopPropagation()},n.setSelectedImage=function(t){var e=At({},n.state.images);"background"===n.props.modalSearchMode?(j.emit("EventSetBackgroundImage".concat(n.props.idComponent),e),P.emit("EventSetBImageInstumentPanel",{images:e,mode:n.props.modalSearchMode})):"image"===n.props.modalSearchMode?(j.emit("EventSetCurrentImage".concat(n.props.idComponent),e),P.emit("EventSetBImageInstumentPanel",{images:e,mode:n.props.modalSearchMode})):"media"===n.props.modalSearchMode&&(j.emit("EventSetContentMedia".concat(n.props.idComponent),{iframe:e.iframe,mode:n.props.modalSearchMode}),P.emit("EventSetIframe",{iframe:e.iframe})),t.stopPropagation()},n.makeImageResultBox=function(t){return t?t.map(function(t,e){return o.a.createElement(It,{key:"item".concat(t.videoId).concat(e),id:e,urlContent:t.videoId?t.videoId:null,selected:n.state.images.selectedItem===e,isFull:!1,urls:t.urls})}):null},n.addNewProject=function(t){var e=n.state[n.state.workMode];e.validateType&&e.validateName&&(n.props.cabinetStream.emit("EventChangeWorkMode",{action:"default",loading:!0}),n.props.cabinetStream.emit("EventAddProject",{title:n.state[n.state.workMode].name,type:n.state[n.state.workMode].type}))},n.selectOption=function(t){var e=At({},n.state[n.state.workMode]);e.type=t.target.value,e.validateType="empty"!==e.type,e.disabled=!e.validateType||!e.validateName,n.setState(At({},n.state,Object(B.a)({},n.state.workMode,e)))},n.validateName=function(t){var e=At({},n.state[n.state.workMode]);e.name=t.target.value,e.validateName=/^\D{4,20}$/i.test(e.name),e.disabled=!e.validateType||!e.validateName,n.setState(At({},n.state,Object(B.a)({},n.state.workMode,e)))},n.cancel=function(t){"Search"===n.state.workMode?n.props.eventStreamBuild.emit("EventModalSearchOn",{action:"offline",mode:null}):n.props.cabinetStream.emit("EventChangeWorkMode",{active:!1,action:"default"})},n.refSelect=function(t){return n.inputSelect=t},n.refSearch=function(t){return n.inputSearch=t},n.componentDidMount=function(t){"Search"===n.state.workMode&&P.on("EventShowMenuImage",n.showMenuImage)},n.componentWillUnmount=function(t){"Search"===n.state.workMode&&P.off("EventShowMenuImage",n.showMenuImage)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){switch(this.state.workMode){case"newProject":return o.a.createElement(zt,{content:this.state[this.state.workMode],warningType:this.state.warning.type,warningNumber:this.state.warning.warningNumber,warningLengthMin:this.state.warning.lengthMin,warningLengthMax:this.state.warning.lengthMax,cbValidateName:this.validateName,cbSelectOption:this.selectOption,cbAddNewProject:this.addNewProject,cbCancel:this.cancel,loading:this.state.loading});case"Search":return o.a.createElement("div",{className:"searchWrapper"},o.a.createElement(Mt,{content:this.state.images,cbCancel:this.cancel,menuActive:this.state.imageMenuActive,cbMakeImageResultBox:this.makeImageResultBox,cbShowImage:this.showImage,cbSetSelectedImage:this.setSelectedImage,modalSearchMode:this.props.modalSearchMode,cbSearch:this.searchData,loader:this.state.loading}));default:return o.a.createElement(a.Fragment,null)}}}]),e}(o.a.PureComponent);var Rt=function(t,e,n,a){return function(){var o=Object(q.a)(Z.a.mark(function o(r,i,c){var s,l,u,p,m;return Z.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return s=c.firebase,l=Object(z.a)(e),u=l.length?l[l.length-1].id+1:0,(p=[]).push("Header"),m={backgroundImage:null,backgroundColor:null,id:"MainBackgroundHeader".concat((i=0,"".concat(Math.floor(i+Math.random()*(1e4-i))))),targetSection:"Header",type:"background"},l.push({id:u,title:n,type:a,components:[m],sectionsProject:[].concat(p)}),o.next=9,s.db.collection("users").doc(t).update({projects:l}).then(function(){return r({type:"CREATE_PROJECT",projects:l})}).catch(function(t){console.error(t.message),r(R(t.message))});case 9:case"end":return o.stop()}var i},o)}));return function(t,e,n){return o.apply(this,arguments)}}()};n(297);var Ut=Object(C.g)(function(t){var e=Object(a.useState)("/Cabinet/Build/".concat(t.id)),n=Object(et.a)(e,1)[0],r=Object(a.useState)("/Cabinet/Build/".concat(t.id,"/Production/")),i=Object(et.a)(r,1)[0],c=Object(a.useState)(!1),s=Object(et.a)(c,2),l=s[0],u=s[1],p=Object(a.useState)(!1),m=Object(et.a)(p,2),d=m[0],f=m[1],h=Object(a.useState)(t.id),g=Object(et.a)(h,1)[0],b=Object(a.useState)(t.name),v=Object(et.a)(b,1)[0],S=Object(a.useState)(t.type),E=Object(et.a)(S,1)[0];return l?o.a.createElement(C.a,{to:n}):d?o.a.createElement(C.a,{to:i}):o.a.createElement("div",{className:"item","data-id":g},o.a.createElement("p",{className:"ProjectName"},v),o.a.createElement("p",{className:"ProjectType"},E),o.a.createElement("div",{className:"projectController"},o.a.createElement("input",{onClick:function(e){t.location.pathname!==n&&u(!0),e.stopPropagation()},className:"projectControllerButton_enter",type:"button",value:"enter build"}),o.a.createElement("input",{onClick:function(e){t.cabinetStream.emit("EventDeleteItem",{id:t.id,name:t.name,type:t.type}),e.stopPropagation()},className:"projectControllerButton_delete",type:"button",value:"delete"})),o.a.createElement("input",{onClick:function(e){t.location.pathname!==n&&f(!0),e.stopPropagation()},className:"productionButton",type:"button",value:"Production"}))});function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var Wt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).state={redirect:!1},n.addNewProject=function(t){n.props.idUser?n.props.dispatch(Rt(n.props.idUser,n.props.list,t.title,t.type)):n.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n.state,{redirect:!0}))},n.makeList=function(t){return t.map(function(t){return o.a.createElement(Ut,{key:t.id,id:t.id,name:t.title,type:t.type,cabinetStream:n.props.cabinetStream})})},n.componentDidMount=function(){n.props.cabinetStream.on("EventAddProject",n.addNewProject)},n.componentWillUnmount=function(){n.props.cabinetStream.off("EventAddProject",n.addNewProject)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return this.state.redirect?o.a.createElement(C.a,{to:"/"}):o.a.createElement("div",{className:"projectsList__list"},this.makeList(Object(z.a)(this.props.list)))}}]),e}(o.a.PureComponent),Xt=Object(k.b)(function(t){return{idUser:t.cabinet.idUser,list:Object(z.a)(t.cabinet.projects)}})(Wt),Lt=(n(298),function(t){return o.a.createElement("section",{className:"projectsList"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"flex-column"},o.a.createElement("div",{className:"projectsList__box"},o.a.createElement("h3",null,"Your Projects")),o.a.createElement(Xt,{cabinetStream:t.cabinetStream}))))});n(299);function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Jt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).cabinetStream=new y.a,n.state={loader:!1,modalActive:!1,workMode:"default"},n.logOut=function(){n.props.dispatch($(n.props.idUser))},n.deletItem=function(t){n.setState(Ht({},n.state,{loader:!0})),n.props.dispatch(Et(Ht({},t,{uid:n.props.firebase.getCurrentUser().uid})))},n.changeWorkMode=function(t){n.setState(Ht({},n.state,{modalActive:t.active,workMode:t.action,loader:t.loading||!1}))},n.componentDidUpdate=function(t){t.projects.length!==n.props.projects.length&&n.setState(Ht({},n.state,{loader:!1}))},n.componentDidMount=function(){n.cabinetStream.on("EventDeleteItem",n.deletItem),n.cabinetStream.on("EventChangeWorkMode",n.changeWorkMode)},n.componentWillUnmount=function(){n.cabinetStream.off("EventDeleteItem",n.deletItem),n.cabinetStream.off("EventChangeWorkMode",n.changeWorkMode)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return this.props.active?o.a.createElement(a.Fragment,null,o.a.createElement(xt,{cabinetStream:this.cabinetStream,title:this.props.config.title,idUser:this.props.idUser}),o.a.createElement("div",{className:"Cabinet"},this.state.loader&&o.a.createElement(nt,{mode:"abinet_action_loader",type:"data",path:"/img/loading.gif"}),o.a.createElement(ot.a,{in:this.state.modalActive,timeout:300,classNames:"modalAnimation",unmountOnExit:!0,appear:!0},o.a.createElement(Tt,{cabinetStream:this.cabinetStream,workMode:this.state.workMode})),o.a.createElement(Lt,{cabinetStream:this.cabinetStream}))):this.props.firebase.getCurrentUser()?o.a.createElement(nt,{path:"/img/loading.gif",type:"Cabinet"}):o.a.createElement(C.a,{to:"/"})}}]),e}(o.a.PureComponent),Yt=Object(k.b)(function(t){return{idUser:t.cabinet.idUser,projects:Object(z.a)(t.cabinet.projects),active:t.cabinet.active}})(tt(Jt));function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function qt(){var t=Object(it.a)(["\n    position: relative;\n    width: ",";\n    height: ",";\n    background-color: ",";\n    ","\n    background-size: cover;\n"]);return qt=function(){return t},t}var Kt=ct.a.div(qt(),function(t){return t.width||"100%"},function(t){return t.height||"100%"},function(t){return t.backgroundColor},function(t){return t.backgroundImage?"background-image: url(".concat(t.backgroundImage,");"):null}),$t=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={id:n.props.id,targetSection:n.props.targetSection,backgroundColor:n.props.background||n.props.color,backgroundImage:n.props.backgroundImage,width:n.props.width,height:n.props.height},n.boxComponent=null,n.boxComponentRef=function(t){return n.boxComponent=t},n.saveDataParent=function(){var t=n.boxComponent.getBoundingClientRect();j.emit("EventSaveWidth".concat(n.state.targetSection),{countSection:n.props.countSection,sectionNumber:n.props.sectionNumber,size:{width:t.width,height:t.height}})},n.openBgInstruments=function(t){var e={id:n.state.id,targetSection:n.state.targetSection,type:"background",backgroundColor:n.state.backgroundColor,backgroundImage:n.state.backgroundImage};P.emit("EventInstrumentPanel",{componentStats:e,targetSection:n.state.targetSection,type:"background",id:n.state.id}),t.stopPropagation()},n.changeColor=function(t){n.setState(Zt({},n.state,{backgroundColor:t.colorRGB}))},n.setBackgroundImage=function(t){var e=t.urlFull;n.setState(Zt({},n.state,{backgroundImage:e}))},n.componentDidUpdate=function(){n.saveDataParent()},n.componentDidMount=function(){n.saveDataParent(),j.on("EventChangeColorBackground".concat(n.state.id),n.changeColor),j.on("EventSetBackgroundImage".concat(n.state.id),n.setBackgroundImage)},n.componentWillUnmount=function(){j.off("EventChangeColorBackground".concat(n.state.id),n.changeColor),j.off("EventSetBackgroundImage".concat(n.state.id),n.setBackgroundImage)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return"dev"===this.props.mode?o.a.createElement(Kt,{key:this.state.id,ref:this.boxComponentRef,onDoubleClick:this.openBgInstruments,"data-name":this.state.targetSection,backgroundColor:this.state.backgroundColor,backgroundImage:this.state.backgroundImage,width:this.state.width,height:this.state.height},this.props.children):"production"===this.props.mode?o.a.createElement(Kt,{key:this.state.id,ref:this.boxComponentRef,"data-name":this.state.targetSection,backgroundColor:this.state.backgroundColor,backgroundImage:this.state.backgroundImage,width:this.state.width,height:this.state.height},this.props.children):void 0}}]),e}(o.a.PureComponent);n(300);function Qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qt(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ee=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={targetSection:n.props.id,editRedy:!1,component:null,children:null},n.changeMode=function(){n.state.editStart&&n.props.id===n.props.editComponentName||n.setState(te({},n.state,{editStart:!0}),function(){return P.emit("EventModeEdit",te({},n.state,{editStart:!0,targetSection:n.state.targetSection}))})},n.refSection=null,n.refSectionFunc=function(t){return t?n.refSection={data:t.getBoundingClientRect(),node:t}:t},n.componentDidMount=function(){if(!n.state.component){var t=n.props.currentProjectsData.components.find(function(t){return t.targetSection===n.props.id}),e=n.props.componentJSX.filter(function(e){return e.targetSection===n.props.id&&e.id!==t.id}).map(function(t){return t.component});n.setState(te({},n.state,{component:t,children:e}))}},n.componentDidUpdate=function(t){var e=n.props.countComponents!==t.countComponents;if(!n.state.component){var a=n.props.currentProjectsData.components.find(function(t){return t.targetSection===n.props.id}),o=n.props.componentJSX.filter(function(t){return t.targetSection===n.props.id}).map(function(t){return t.component});n.setState(te({},n.state,{component:a,children:o}))}if(e){var r=n.props.componentJSX.filter(function(t){return t.targetSection===n.props.id});r&&n.setState(te({},n.state,{children:r.map(function(t){return t.component})}))}},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return"dev"===this.props.mode&&this.state.component?o.a.createElement(a.Fragment,null,o.a.createElement("section",{key:this.props.sectionNumber+this.props.keyMain,className:"element".concat(this.props.sectionNumber),ref:this.refSectionFunc,"data-class":"editable",onClick:this.changeMode},o.a.createElement($t,Object.assign({key:this.props.sectionNumber+this.props.keyMain,mode:this.props.mode,sectionNumber:this.props.sectionNumber,countSection:this.props.countSection},this.state.component),this.state.children||null),!this.state.editStart&&o.a.createElement("div",{className:"warningEdit"},o.a.createElement("p",null,"Click for start edit")))):"production"===this.props.mode&&this.state.component?o.a.createElement(a.Fragment,null,o.a.createElement("section",{key:this.props.sectionNumber,ref:this.refSectionFunc,"data-class":"production"},o.a.createElement($t,Object.assign({key:this.props.sectionNumber,mode:this.props.mode,sectionNumber:this.props.sectionNumber},this.state.component),this.state.children||null))):o.a.createElement(nt,{type:"".concat(this.props.mode," components")})}}]),e}(o.a.PureComponent),ne=function(t){if("dev"===t.mode){var e=t.userData.currentProjectsData;return e.sectionsProject.map(function(n,a){return o.a.createElement(ee,{key:n,componentJSX:t.componentJSX,currentProjectsData:e,editComponentName:t.editComponentName,countComponents:t.componentJSX.length,menuActive:t.menuActive,sizeParentBox:t.sizeParentBox,id:n,countSection:e.sectionsProject.length,sectionNumber:a,mode:t.mode})})}if("production"===t.mode){var n=t.section,a=t.currentProjectsData;return n.map(function(e,n){return o.a.createElement(ee,{key:e,componentJSX:t.componentsProdJSX,currentProjectsData:a,editComponentName:t.editComponentName,countComponents:t.componentsProdJSX.length,sizeParentBox:t.sizeParentBox,id:e,sectionNumber:n,mode:t.mode})})}};function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function re(){var t=Object(it.a)(["\n    left: ",";\n    top:  ",";\n"]);return re=function(){return t},t}function ie(){var t=Object(it.a)(["\n    width: ",";\n    color: white;\n    height: ",";\n    font-size: ",";\n    position: absolute;\n    background-color: ",";\n    border: ",";\n    border-radius: ",";\n    white-space: normal;\n    font-weight: bold;\n    transition: .3s transform linear;\n\n    :active {\n        border: ",";\n        transform: scale(1.05);\n    }\n"]);return ie=function(){return t},t}var ce=ct.a.input.attrs(function(t){if("production"!==t.mode)return{style:{zIndex:t.indexZ?"9999":null,left:t.coordX?t.coordX:"45%",top:t.coordY?t.coordY:"0%"}}})(ie(),function(t){return t.size?t.size.w+"px":null},function(t){return t.size?t.size.h+"px":null},function(t){return t.fontSize?t.fontSize+"px":null},function(t){return t.color||null},function(t){return"1px solid ".concat(t.color)},function(t){return t.borderRadius?t.borderRadius+"px":null},function(t){return"2px dotted ".concat(t.color)}),se=Object(ct.a)(ce)(re(),function(t){return t.coordX?t.coordX:"45%"},function(t){return t.coordY?t.coordY:"0%"}),le=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={id:n.props.id,istrumentsActive:!1,getSizeBool:!1,countSection:0,borderRadius:n.props.borderRadius,sectionNumber:0,typeInput:n.props.typeInput||"button",sizeParentBox:n.props.sizeParentBox,targetSection:n.props.targetSection,size:n.props.size&&n.props.size.w?n.props.size:{w:"100",h:"50"},fontSize:n.props.fontSize||20,color:n.props.color||null,shiftCoords:null,content:n.props.content||"Input",posInput:n.props.coords.x?{x:n.props.coords.x,y:n.props.coords.y}:null,startDragNdrop:!1},n.openInputInstruments=function(t){var e={id:n.state.id,targetSection:n.state.targetSection,typeInput:n.state.typeInput,type:"input",color:n.state.color,borderRadius:n.state.borderRadius,zIndex:null,size:oe({},n.state.size),fontSize:n.state.fontSize,content:n.state.content,coords:oe({},n.state.posInput)};P.emit("EventInstrumentPanel",{componentStats:e,targetSection:n.state.targetSection,id:n.state.id,sizeTextValue:n.state.size}),n.setState(oe({},n.state,{istrumentsActive:!0})),t.stopPropagation()},n.saveCoords=function(t){if(1!==t.nativeEvent.which)return!1;var e=n.refInput.getBoundingClientRect(),a=e.left,o=e.top;e.right,e.left,e.bottom,e.top;n.setState(oe({},n.state,{shiftCoords:{x:t.clientX-a,y:t.clientY-o},startDragNdrop:!n.state.startDragNdrop})),t.stopPropagation()},n.changeSize=function(t){n.setState(oe({},n.state,{size:t.size}))},n.changeColor=function(t){"string"===typeof t&&n.setState(oe({},n.state,{color:t}))},n.changeSizeText=function(t){n.setState(oe({},n.state,{fontSize:t.size}))},n.setBorderRadius=function(t){var e=t.borderRadius>200||t.borderRadius;e=t.borderDown<0?0:t.borderRadius,n.setState(oe({},n.state,{borderRadius:e}))},n.changeContent=function(t){(t.content||""===t.content)&&n.setState(oe({},n.state,{content:t.content}))},n.checkPivotPosition=function(t,e){var a=n.refInput.getBoundingClientRect(),o=800-a.height,r=n.props.sizeParentBox.width-a.width;return e<0&&(e=0),e>o&&(e=o),t<0&&(t=0),t>r&&(t=r),{x:t,y:e}},n.move=function(t,e){return n.setState(oe({},n.state,{posInput:{x:t,y:e}}))},n.moveInput=function(t){if(n.state.startDragNdrop&&n.state.istrumentsActive){var e=n.state.sectionNumber;1===n.state.sectionNumber&&n.state.countSection-1===n.state.sectionNumber&&(e=n.state.sectionNumber+1);var a=t.clientX-n.props.sizeParentBox.left*e,o=t.clientY-n.props.sizeParentBox.top*e,r=a-n.state.shiftCoords.x,i=o-n.state.shiftCoords.y,c=n.checkPivotPosition(r,i),s=100*c.x/n.state.sizeParentBox.width,l=100*c.y/n.state.sizeParentBox.height;n.move(s.toFixed(2)+"%",l.toFixed(2)+"%")}t.stopPropagation()},n.stopDragNdrop=function(t){n.state.startDragNdrop&&(n.setState(oe({},n.state,{startDragNdrop:!1})),j.emit("EventUpdatePosition".concat(n.state.id),n.state.posInput)),t.stopPropagation()},n.saveSize=function(t){var e=t.size;n.state.getSizeBool?j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize):n.setState(oe({},n.state,{getSizeBool:!0,countSection:t.countSection,sectionNumber:t.sectionNumber,sizeParentBox:{width:e.width,height:e.height}}))},n.setWidth=function(t){var e=t.width;n.setState(oe({},n.state,{size:oe({},n.state.size,{w:e})}))},n.setType=function(t){n.setState(oe({},n.state,{typeInput:t}))},n.setHeight=function(t){var e=t.height;n.setState(oe({},n.state,{size:oe({},n.state.size,{h:e})}))},n.refInput=null,n.refInputComponent=function(t){return n.refInput=t},n.componentDidMount=function(){j.on("EventSaveWidth".concat(n.state.targetSection),n.saveSize),j.on("EventSetBorderRadius".concat(n.state.id),n.setBorderRadius),j.on("EventChangecolor".concat(n.state.id),n.changeColor),j.on("EventChangeSize".concat(n.state.id),n.changeSize),j.on("EventChangeSizeText".concat(n.state.id),n.changeSizeText),j.on("EventChangeContentText".concat(n.state.id),n.changeContent),j.on("EventSetWidth".concat(n.state.id),n.setWidth),j.on("EventSetType".concat(n.state.id),n.setType),j.on("EventSetHeight".concat(n.state.id),n.setHeight)},n.componentWillUnmount=function(){j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize),j.off("EventSetBorderRadius".concat(n.state.id),n.setBorderRadius),j.off("EventChangeSize".concat(n.state.id),n.changeSize),j.off("EventChangeSizeText".concat(n.state.id),n.changeSizeText),j.off("EventChangeContentText".concat(n.state.id),n.changeContent),j.off("EventChangecolor".concat(n.state.id),n.changeColor),j.off("EventSetWidth".concat(n.state.id),n.setWidth),j.off("EventSetType".concat(n.state.id),n.setType),j.off("EventSetHeight".concat(n.state.id),n.setHeight)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return"dev"===this.props.mode?o.a.createElement(ce,{type:this.state.typeInput,value:this.state.content,ref:this.refInputComponent,size:this.state.size,color:this.state.color,borderRadius:this.state.borderRadius,fontSize:this.state.fontSize,onClick:this.openInputInstruments,onMouseDown:this.saveCoords,onMouseMove:this.moveInput,onMouseLeave:this.stopDragNdrop,onMouseUp:this.stopDragNdrop,onDragStart:this.stop,coordX:this.state.posInput?this.state.posInput.x:null,coordY:this.state.posInput?this.state.posInput.y:null,indexZ:this.state.startDragNdrop,"data-imagecomponentwrapper":!0}):"production"===this.props.mode?o.a.createElement(se,{type:this.state.typeInput,value:this.state.content,ref:this.refInputComponent,size:this.state.size,color:this.state.color,fontSize:this.state.fontSize,borderRadius:this.state.borderRadius,coordX:this.state.posInput?this.state.posInput.x:null,coordY:this.state.posInput?this.state.posInput.y:null,indexZ:this.state.startDragNdrop,mode:this.props.mode}):void 0}}]),e}(o.a.PureComponent);function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function me(){var t=Object(it.a)(["\n    left: ",";\n    top:  ",";\n"]);return me=function(){return t},t}function de(){var t=Object(it.a)(["\n    width: 100%;\n    height: 100%;\n    z-index: ",";\n"]);return de=function(){return t},t}function fe(){var t=Object(it.a)(["\n    width: ",";\n    height: ",";\n    position: absolute;\n    background: ",";\n    background-size: cover;\n    border: ",";\n    padding: 10px;\n"]);return fe=function(){return t},t}var he=ct.a.div.attrs(function(t){if("production"!==t.mode)return{style:{zIndex:t.indexZ?"9999":null,left:t.coordX?t.coordX:"45%",top:t.coordY?t.coordY:"0%",display:"flex",justifyContent:"center",alignItems:"center",padding:"dev"===t.mode?"40px":null}}})(fe(),function(t){return t.size.w?t.size.w+"%":"30%"},function(t){return t.size.h?t.size.h+"%":"50%"},function(t){return"dev"===t.mode?"url(".concat("/constructor","/img/media.svg)"):null},function(t){return"dev"===t.mode?"1px solid red":null}),ge=ct.a.iframe(de(),function(t){return t.zIndex?"0":"-1"}),be=Object(ct.a)(he)(me(),function(t){return t.coordX?t.coordX:"45%"},function(t){return t.coordY?t.coordY:"0%"}),ve=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={targetSection:n.props.targetSection,id:n.props.id,sizeParentBox:n.props.sizeParentBox,shiftCoords:null,countSection:0,size:n.props.size?n.props.size:{w:null,h:null},posMedia:n.props.coords.x?{x:n.props.coords.x,y:n.props.coords.y}:null,startDragNdrop:!1,istrumentsActive:!1,drawContent:!1,sectionNumber:n.props.sectionNumber,content:n.props.content?n.props.content:null},n.openMediaInstruments=function(t){var e={id:n.state.id,size:n.state.size,targetSection:n.state.targetSection,type:"media",zIndex:null,content:n.state.content,coords:pe({},n.state.posMedia)};P.emit("EventInstrumentPanel",{componentStats:e,targetSection:n.state.targetSection,id:n.state.id,size:n.state.size}),n.setState(pe({},n.state,{istrumentsActive:!0})),t.stopPropagation()},n.saveCoords=function(t){if(1!==t.nativeEvent.which)return!1;var e=n.refMedia.getBoundingClientRect(),a=e.left,o=e.top;e.right,e.left,e.bottom,e.top;n.setState(pe({},n.state,{shiftCoords:{x:t.clientX-a,y:t.clientY-o},startDragNdrop:!n.state.startDragNdrop})),t.stopPropagation()},n.setWidth=function(t){var e=t.width;n.setState(pe({},n.state,{size:pe({},n.state.size,{w:e})}))},n.setHeight=function(t){var e=t.height;n.setState(pe({},n.state,{size:pe({},n.state.size,{h:e})}))},n.checkPivotPosition=function(t,e){var a=n.refMedia.getBoundingClientRect(),o=800-a.height,r=n.props.sizeParentBox.width-a.width;return e<0&&(e=0),e>o&&(e=o),t<0&&(t=0),t>r&&(t=r),{x:t,y:e}},n.move=function(t,e){return n.setState(pe({},n.state,{posMedia:{x:t,y:e}}))},n.moveMedia=function(t){if(n.state.startDragNdrop&&n.state.istrumentsActive){var e=t.clientX-n.props.sizeParentBox.left*n.state.sectionNumber,a=t.clientY-n.props.sizeParentBox.top*n.state.sectionNumber,o=e-n.state.shiftCoords.x,r=a-n.state.shiftCoords.y,i=n.checkPivotPosition(o,r),c=100*i.x/n.state.sizeParentBox.width,s=100*i.y/n.state.sizeParentBox.height;n.move(c.toFixed(2)+"%",s.toFixed(2)+"%")}t.stopPropagation()},n.stopDragNdrop=function(t){n.state.startDragNdrop&&(n.setState(pe({},n.state,{startDragNdrop:!1})),j.emit("EventUpdatePosition".concat(n.state.id),n.state.posMedia)),t.stopPropagation()},n.setContent=function(t){var e=t.iframe;n.setState(pe({},n.state,{content:e}))},n.saveSize=function(t){var e=t.size;n.state.getSizeBool?j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize):n.setState(pe({},n.state,{getSizeBool:!0,countSection:t.countSection,sectionNumber:t.sectionNumber+1,sizeParentBox:{width:e.width,height:e.height}}))},n.refMedia=null,n.refMediaComponent=function(t){return n.refMedia=t},n.componentDidMount=function(){j.on("EventSetContentMedia".concat(n.state.id),n.setContent),j.on("EventSaveWidth".concat(n.state.targetSection),n.saveSize),j.on("EventSetWidth".concat(n.state.id),n.setWidth),j.on("EventSetHeight".concat(n.state.id),n.setHeight)},n.componentWillUnmount=function(){j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize),j.off("EventSetContentMedia".concat(n.state.id),n.setContent),j.off("EventSetWidth".concat(n.state.id),n.setWidth),j.off("EventSetHeight".concat(n.state.id),n.setHeight)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t="https://www.youtube.com/embed/";return"dev"===this.props.mode?o.a.createElement(he,{ref:this.refMediaComponent,onClick:this.openMediaInstruments,onMouseDown:this.saveCoords,onMouseMove:this.moveMedia,onMouseLeave:this.stopDragNdrop,onMouseUp:this.stopDragNdrop,onDragStart:this.stop,mode:this.props.mode,indexZ:this.state.startDragNdrop,coordX:this.state.posMedia?this.state.posMedia.x:null,coordY:this.state.posMedia?this.state.posMedia.y:null,size:this.state.size},this.state.startDragNdrop?null:o.a.createElement(ge,{src:this.state.content?t+this.state.content:null,drawContent:this.state.drawContent,width:this.state.width,height:this.state.height,zIndex:this.state.content,allowfullscreen:!0})):"production"===this.props.mode?o.a.createElement(be,{ref:this.refMediaComponent,indexZ:this.state.startDragNdrop,size:this.state.size,coordX:this.state.posMedia?this.state.posMedia.x:null,coordY:this.state.posMedia?this.state.posMedia.y:null,mode:this.props.mode},this.state.startDragNdrop?null:o.a.createElement(ge,{src:this.state.content?t+this.state.content:null,drawContent:this.state.drawContent,width:this.state.width,height:this.state.height,zIndex:this.state.content,mode:this.props.mode,allowfullscreen:!0})):void 0}}]),e}(o.a.PureComponent);function Se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Se(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Se(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ye(){var t=Object(it.a)(["\n    left: ",";\n    top:  ",";\n    transform: rotate(","deg) scale(",");\n"]);return ye=function(){return t},t}function Oe(){var t=Object(it.a)(["\n    width: 100%;\n    height: 100%;\n    opacity: ",";\n    border-radius: ","px;\n    position: absolute;\n"]);return Oe=function(){return t},t}function je(){var t=Object(it.a)(["\n    width: ",";\n    height: ",";\n    position: absolute;\n"]);return je=function(){return t},t}var Pe=ct.a.div.attrs(function(t){if("production"!==t.mode)return{style:{zIndex:t.indexZ?"9999":null,transform:"rotateZ(".concat(t.rotate,"deg) scale(").concat(t.scale,")"),left:t.coordX?t.coordX:"45%",top:t.coordY?t.coordY:"0",transition:"transform  0.3s linear"}}})(je(),function(t){return t.size?t.size.w+"%":"30%"},function(t){return t.size?t.size.h+"%":"50%"}),Ce=ct.a.img(Oe(),function(t){return t.opacity},function(t){return t.borderRadius}),we=Object(ct.a)(Pe)(ye(),function(t){return t.coordX?t.coordX:"50%"},function(t){return t.coordY},function(t){return t.rotate},function(t){return t.scale}),Ne=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={id:n.props.id,istrumentsActive:!1,getSizeBool:!1,countSection:0,opacity:n.props.opacity||1,transformValue:n.props.rotate||0,scaleValue:n.props.scale||1,sectionNumber:0,borderRadius:n.props.borderRadius||0,sizeParentBox:n.props.sizeParentBox,targetSection:n.props.targetSection,path:n.props.image?n.props.image:n.props.path,size:n.props.size?n.props.size:{w:30,h:50},shiftCoords:null,posImage:n.props.coords.x?{x:n.props.coords.x,y:n.props.coords.y}:null,startDragNdrop:!1},n.openImageInstruments=function(t){var e={id:n.state.id,targetSection:n.state.targetSection,size:Ee({},n.state.size),type:"image",rotate:n.state.transformValue,scale:n.state.scaleValue,borderRadius:n.state.borderRadius,opacity:n.state.opacity,zIndex:null,image:n.state.path,coords:Ee({},n.state.posImage)};P.emit("EventInstrumentPanel",{componentStats:e,targetSection:n.state.targetSection,id:n.state.id,sizeTextValue:n.state.size}),n.setState(Ee({},n.state,{istrumentsActive:!0})),t.stopPropagation()},n.saveCoords=function(t){if(1!==t.nativeEvent.which)return!1;var e=n.refImage.getBoundingClientRect(),a=e.left,o=e.top;e.right,e.left,e.bottom,e.top;n.setState(Ee({},n.state,{shiftCoords:{x:t.clientX-a,y:t.clientY-o},startDragNdrop:!n.state.startDragNdrop})),t.stopPropagation()},n.checkPivotPosition=function(t,e){var a=n.refImage.getBoundingClientRect(),o=800-a.height,r=n.props.sizeParentBox.width-a.width;return e<0&&(e=0),e>o&&(e=o),t<0&&(t=0),t>r&&(t=r),{x:t,y:e}},n.rotateEvent=function(t){var e=t.angle;n.setState(Ee({},n.state,{transformValue:e}))},n.scaleEvent=function(t){var e=t.scale;n.setState(Ee({},n.state,{scaleValue:e}))},n.move=function(t,e){return n.setState(Ee({},n.state,{posImage:{x:t,y:e}}))},n.moveText=function(t){if(n.state.startDragNdrop&&n.state.istrumentsActive){var e=n.refImage.getBoundingClientRect(),a=t.clientX-n.props.sizeParentBox.left*n.state.sectionNumber,o=t.clientY-n.props.sizeParentBox.top*n.state.sectionNumber,r=n.diffAngle(parseInt(n.state.transformValue),e.height,e.width),i=a-n.state.shiftCoords.x+r.xFacotr,c=o-61-n.state.shiftCoords.y+r.yFactor,s=n.checkPivotPosition(i,c),l=100*s.x/n.state.sizeParentBox.width,u=100*s.y/n.state.sizeParentBox.height;n.move(l.toFixed(2)+"%",u.toFixed(2)+"%")}t.stopPropagation()},n.diffAngle=function(t,e,n){var a=Math.pow(e,2),o=Math.pow(n,2),r=Math.sqrt(a+o)/2,i=Math.atan(e/n),c=Math.atan(n/e),s=1,l=1;(t<0||t>180)&&(s=-1),t>90&&t<270&&(l=-1),t*=Math.PI/180;var u=Math.sin(l*c+s*t),p=Math.sin(l*i+s*t);return{xFacotr:r*(-Math.sin(c)+u),yFactor:r*(-Math.sin(i)+p)}},n.stopDragNdrop=function(t){n.state.startDragNdrop&&(n.setState(Ee({},n.state,{startDragNdrop:!1})),j.emit("EventUpdatePosition".concat(n.state.id),n.state.posImage)),t.stopPropagation()},n.setCurrentImage=function(t){var e=t.urlFull;n.setState(Ee({},n.state,{path:e}))},n.setWidth=function(t){var e=t.width;n.setState(Ee({},n.state,{size:Ee({},n.state.size,{w:e})}))},n.setHeight=function(t){var e=t.height;n.setState(Ee({},n.state,{size:Ee({},n.state.size,{h:e})}))},n.saveSize=function(t){var e=t.size;n.state.getSizeBool?j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize):n.setState(Ee({},n.state,{getSizeBool:!0,countSection:t.countSection,sectionNumber:t.sectionNumber,sizeParentBox:{width:e.width,height:e.height}}))},n.setBorderRadius=function(t){var e=t.borderRadius>200||t.borderRadius;e=t.borderDown<0?0:t.borderRadius,n.setState(Ee({},n.state,{borderRadius:e}))},n.setOpacity=function(t){var e=t.opacity>1||t.opacity;e=t.opacity<0?0:t.opacity,n.setState(Ee({},n.state,{opacity:e}))},n.stopDrag=function(t){t.preventDefault()},n.refImage=null,n.refImageComponent=function(t){return n.refImage=t},n.componentDidMount=function(){j.on("EventSetCurrentImage".concat(n.state.id),n.setCurrentImage),j.on("EventSetOpacity".concat(n.state.id),n.setOpacity),j.on("EventSetBorderRadius".concat(n.state.id),n.setBorderRadius),j.on("EventSetWidth".concat(n.state.id),n.setWidth),j.on("EventSetHeight".concat(n.state.id),n.setHeight),j.on("EventResize".concat(n.state.id),n.rotateEvent),j.on("EventScale".concat(n.state.id),n.scaleEvent),j.on("EventSaveWidth".concat(n.state.targetSection),n.saveSize)},n.componentWillUnmount=function(){j.off("EventSetOpacity".concat(n.state.id),n.setOpacity),j.off("EventSetBorderRadius".concat(n.state.id),n.setBorderRadius),j.off("EventSetCurrentImage".concat(n.state.id),n.setCurrentImage),j.off("EventSetWidth".concat(n.state.id),n.setWidth),j.off("EventSetHeight".concat(n.state.id),n.setHeight),j.off("EventResize".concat(n.state.id),n.rotateEvent),j.off("EventScale".concat(n.state.id),n.scaleEvent),j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return"dev"===this.props.mode?o.a.createElement(Pe,{ref:this.refImageComponent,size:this.state.size,rotate:this.state.transformValue,scale:this.state.scaleValue,onClick:this.openImageInstruments,onMouseDown:this.saveCoords,onMouseMove:this.moveText,onMouseLeave:this.stopDragNdrop,onMouseUp:this.stopDragNdrop,onDragStart:this.stopDrag,coordX:this.state.posImage?this.state.posImage.x:null,coordY:this.state.posImage?this.state.posImage.y:null,indexZ:this.state.startDragNdrop,"data-imagecomponentwrapper":!0},o.a.createElement(Ce,{"data-imagecomponent":!0,borderRadius:this.state.borderRadius,onDragStart:this.stopDrag,opacity:this.state.opacity,src:this.state.path,alt:"img"})):"production"===this.props.mode?o.a.createElement(we,{ref:this.refImageComponent,size:this.state.size,rotate:this.state.transformValue,scale:this.state.scaleValue,mode:this.props.mode,coordX:this.state.posImage?this.state.posImage.x:null,coordY:this.state.posImage?this.state.posImage.y:null,indexZ:this.state.startDragNdrop},o.a.createElement(Ce,{borderRadius:this.state.borderRadius,opacity:this.state.opacity,crossOrigin:"anonymous",src:this.state.path,alt:"img"})):void 0}}]),e}(o.a.PureComponent);n(301);function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function De(){var t=Object(it.a)(["\n    left: ",";\n    top:  ",";\n    transform: rotate(","deg) scale(",");\n"]);return De=function(){return t},t}function Ie(){var t=Object(it.a)(["\n    width: 100%;\n    height: 100%;\n    font-family: ",";\n    text-align: center;\n    margin: 0;\n    user-select: none;\n"]);return Ie=function(){return t},t}function ze(){var t=Object(it.a)(["\n    position: absolute;\n    font-size: ",";\n    color: ",";\n    text-align: center;\n    margin: 0;\n    word-break: break-all;\n"]);return ze=function(){return t},t}var Be=ct.a.div.attrs(function(t){if("production"!==t.mode)return{style:{zIndex:t.indexZ?"9999":null,transform:"rotateZ(".concat(t.rotate,"deg) scale(").concat(t.scale,")"),left:t.coordX?t.coordX:"50%",top:t.coordY,transition:"transform  0.3s linear"}}})(ze(),function(t){return t.size?t.size:"120px"},function(t){return t.textColor}),Me=ct.a.p(Ie(),function(t){return t.font}),_e=Object(ct.a)(Be)(De(),function(t){return t.coordX?t.coordX:"50%"},function(t){return t.coordY},function(t){return t.rotate},function(t){return t.scale}),Ae=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).resizeStream=new y.a,n.state={id:n.props.id,istrumentsActive:!1,isHaveSize:!1,parent:n.props.sizeParentBox,targetSection:n.props.targetSection,colorText:n.props.color,sizeText:n.props.fontSize||n.props.size,shiftCoords:null,position:n.props.coords,transformValue:n.props.rotate||0,scaleValue:n.props.scale||1,font:n.props.font?n.props.font:"Arial",startDragNdrop:!1,contentText:n.props.content?n.props.content:null,countSection:0,sectionNumber:0,getSizeBool:!1},n.openTitleInstruments=function(t){var e={id:n.state.id,targetSection:n.state.targetSection,type:"text",rotate:n.state.transformValue,scale:n.state.scaleValue,font:n.state.font,color:n.state.colorText,fontSize:n.state.sizeText||120,content:n.state.contentText,coords:ke({},n.state.position)};P.emit("EventInstrumentPanel",{type:"text",targetSection:n.state.targetSection,id:n.state.id,componentStats:e,sizeTextValue:n.state.sizeText}),n.setState(ke({},n.state,{istrumentsActive:!0})),t.stopPropagation()},n.changeColorText=function(t){"string"===typeof t&&n.setState(ke({},n.state,{colorText:t}))},n.changeSizeText=function(t){n.setState(ke({},n.state,{sizeText:t.size}))},n.saveSize=function(t){var e=t.size;n.state.getSizeBool?j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize):n.setState(ke({},n.state,{getSizeBool:!0,countSection:t.countSection,sectionNumber:t.sectionNumber,parent:{width:e.width,height:e.height}}))},n.changeContentText=function(t){(t.content||""===t.content)&&n.setState(ke({},n.state,{contentText:t.content}))},n.saveCoords=function(t){var e=n.refText.getBoundingClientRect(),a=e.left,o=e.top,r=(e.right,e.left,e.bottom,e.top,"resizeDoted"===t.target.classList[0]);n.setState(ke({},n.state,{shiftCoords:{x:t.clientX-a,y:t.clientY-o},startDragNdrop:!n.state.startDragNdrop,resizeStart:r})),t.stopPropagation()},n.setFont=function(t){n.setState(ke({},n.state,{font:t.font}))},n.checkPivotPosition=function(t,e){var a=n.refText.getBoundingClientRect(),o=800-a.height,r=n.props.sizeParentBox.width-a.width;return e<0&&(e=0),e>o&&(e=o),t<0&&(t=0),t>r&&(t=r),{x:t,y:e}},n.move=function(t,e){return n.setState(ke({},n.state,{position:{x:t,y:e}}))},n.moveText=function(t){if(n.state.startDragNdrop&&n.state.istrumentsActive){var e=n.refText.getBoundingClientRect(),a=0===n.state.sectionNumber?1:n.state.sectionNumber,o=t.clientX-n.props.sizeParentBox.left*a,r=t.clientY-n.props.sizeParentBox.top*a,i=n.diffAngle(parseInt(n.state.transformValue),e.height,e.width),c=o-n.state.shiftCoords.x+i.xFacotr,s=r-n.state.shiftCoords.y+i.yFactor,l=n.checkPivotPosition(c,s),u=100*l.x/n.state.parent.width,p=100*l.y/n.state.parent.height;n.move(u.toFixed(2)+"%",p.toFixed(2)+"%")}t.stopPropagation()},n.rotateEvent=function(t){var e=t.angle;n.setState(ke({},n.state,{transformValue:e}))},n.scaleEvent=function(t){var e=t.scale;n.setState(ke({},n.state,{scaleValue:e}))},n.diffAngle=function(t,e,n){var a=Math.pow(e,2),o=Math.pow(n,2),r=Math.sqrt(a+o)/2,i=Math.atan(e/n),c=Math.atan(n/e),s=1,l=1;(t<0||t>180)&&(s=-1),t>90&&t<270&&(l=-1),t*=Math.PI/180;var u=Math.sin(l*c+s*t),p=Math.sin(l*i+s*t);return{xFacotr:r*(-Math.sin(c)+u),yFactor:r*(-Math.sin(i)+p)}},n.stopDragNdrop=function(t){n.state.startDragNdrop&&n.setState(ke({},n.state,{startDragNdrop:!1}),function(){return j.emit("EventUpdatePosition".concat(n.state.id),n.state.position)}),t.stopPropagation()},n.stopDrag=function(t){t.preventDefault()},n.refText=null,n.refTextComponent=function(t){return n.refText=t},n.componentDidMount=function(){j.on("EventChangeColorText".concat(n.state.id),n.changeColorText),j.on("EventSetFont".concat(n.state.id),n.setFont),j.on("EventChangeSize".concat(n.state.id),n.changeSizeText),j.on("EventChangeContentText".concat(n.state.id),n.changeContentText),j.on("EventSaveWidth".concat(n.state.targetSection),n.saveSize),j.on("EventResize".concat(n.state.id),n.rotateEvent),j.on("EventScale".concat(n.state.id),n.scaleEvent)},n.componentWillUnmount=function(){j.off("EventChangeColorText".concat(n.state.id),n.changeColorText),j.off("EventSetFont".concat(n.state.id),n.setFont),j.off("EventChangeSize".concat(n.state.id),n.changeSizeText),j.off("EventChangeContentText".concat(n.state.id),n.changeContentText),j.off("EventSaveWidth".concat(n.state.targetSection),n.saveSize),j.off("EventResize".concat(n.state.id),n.rotateEvent),j.off("EventScale".concat(n.state.id),n.scaleEvent)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return"dev"===this.props.mode?o.a.createElement(Be,{ref:this.refTextComponent,onClick:this.openTitleInstruments,textColor:this.state.colorText?this.state.colorText:"red",size:this.state.sizeText?this.state.sizeText+"px":"120px",onMouseDown:this.saveCoords,onMouseMove:this.moveText,onMouseLeave:this.stopDragNdrop,onMouseUp:this.stopDragNdrop,rotate:this.state.transformValue,onDragStart:this.stopDrag,scale:this.state.scaleValue,coordX:this.state.position?this.state.position.x:null,coordY:this.state.position?this.state.position.y:null,indexZ:this.state.startDragNdrop,"data-textcomponent":!0},o.a.createElement(Me,{font:this.state.font},this.state.contentText)):"production"===this.props.mode?o.a.createElement(_e,{ref:this.refTextComponent,mode:this.props.mode,scale:this.state.scaleValue,rotate:this.state.transformValue,textColor:this.state.colorText?this.state.colorText:"red",size:this.state.sizeText?this.state.sizeText+"px":"120px",coordX:this.state.position?this.state.position.x:null,coordY:this.state.position?this.state.position.y:null,indexZ:this.state.startDragNdrop},o.a.createElement(Me,{font:this.state.font},this.state.contentText)):void 0}}]),e}(o.a.PureComponent),Te=function(t){return function(e){return"background"===t.type?e=$t:"input"===t.type?e=le:"media"===t.type?e=ve:"image"===t.type?e=Ne:"text"===t.type&&(e=Ae),o.a.createElement(e,Object.assign({key:"".concat(t.type).concat(t.id)},t.props))}};n(302);function Re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Re(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Re(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Fe=function(t){function e(){var t,n;Object(l.a)(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).state={idProject:parseInt(n.props.match.params.param),mode:"production",projectEmpty:!1,isLoadComponents:!0,componentsProdJSX:[]},n.makeProduction=function(t){var e=n.state.componentsProdJSX,o=[];t.forEach(function(t){var e={props:Ue({},t,{mode:"production"}),type:t.type,id:t.id},n={id:t.id,targetSection:t.targetSection,component:Te(e)(a.Fragment)};o.push(n)}),n.setState(Ue({},n.state,{isLoadComponents:!1,componentsProdJSX:[].concat(Object(z.a)(e),o)}))},n.prodRef=null,n.mainProductionRef=function(t){return t?n.prodRef={data:t.getBoundingClientRect(),node:t}:t},n.componentDidUpdate=function(){var t=n.props.userData,e=t.currentProjectsData;if(t.active&&!e.loadProject){var a=t.projects.find(function(t){return t.id===n.state.idProject});a?n.props.dispatch(_({id:a.id,typeProject:a.type,sectionsProject:Object(z.a)(a.sectionsProject),components:Object(z.a)(a.components)})):n.setState(Ue({},n.state,{projectEmpty:!0}))}n.state.isLoadComponents&&e.loadProject&&n.makeProduction(e.components)},n.componentDidMount=function(){var t=n.props.userData,e=t.currentProjectsData;if(t.active&&!e.loadProject){var a=t.projects.find(function(t){return t.id===n.state.idProject});n.props.dispatch(_({id:a.id,sectionsProject:Object(z.a)(a.sectionsProject),typeProject:a.type,components:Object(z.a)(a.components)}))}},n.componentWillUnmount=function(){n.props.userData.active&&n.props.dispatch(M(!0))},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.userData,e=t.currentProjectsData,n=e.sectionsProject;return this.state.projectEmpty?o.a.createElement(C.a,{to:"/Cabinet"}):t.active&&e.loadProject?o.a.createElement(a.Fragment,null,o.a.createElement(xt,{key:"Header",title:"Constructor",idUser:t.idUser}),o.a.createElement("div",{ref:this.mainProductionRef,className:"Production",key:"Production"},this.state.isLoadComponents?null:n.length&&o.a.createElement(ne,{key:"section",mode:this.state.mode,currentProjectsData:e,componentsProdJSX:this.state.componentsProdJSX,section:n}))):this.props.firebase.getCurrentUser()?o.a.createElement(nt,{key:"Loader",path:"/img/loading.gif",type:"production"}):o.a.createElement(C.a,{to:"/"})}}]),e}(o.a.PureComponent),We=Object(k.b)(function(t){return{userData:{active:t.cabinet.active,idUser:t.cabinet.idUser,projects:Object(z.a)(t.cabinet.projects),currentProjectsData:Ue({},t.builder)}}})(tt(Fe)),Xe=(n(303),function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={config:n.props.config},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.firebase.getCurrentUser();if(t&&this.props.idUser){var e=this.state.config;return o.a.createElement(a.Fragment,null,o.a.createElement(xt,{title:e.title,idUser:t.uid}),o.a.createElement("section",{className:"About"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"About__information"},o.a.createElement("img",{alt:"img",className:"information__logoAbout",src:"/constructor/img/about.jpg"}),o.a.createElement("p",{className:"developer"},o.a.createElement("span",null,"Developer:"),e.about.developer),o.a.createElement("p",{className:"year"},o.a.createElement("span",null,"Year:")," ",e.about.year))))))}return t?o.a.createElement(nt,{path:"/img/loading.gif",type:"About"}):o.a.createElement(C.a,{to:"/"})}}]),e}(o.a.PureComponent)),Le=Object(k.b)(function(t){return{idUser:t.cabinet.idUser}})(tt(Xe)),Ve=n(140),He=n.n(Ve),Je=function(t){return function(){var e=Object(q.a)(Z.a.mark(function e(n,a,o){var r,i;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.firebase,i=t.projects.map(function(e){return e.id===t.idProject&&(e.components=Object(z.a)(t.components),e.sectionsProject=Object(z.a)(t.sectionsProject)),e}),e.next=4,r.db.collection("users").doc(t.uid).update({projects:JSON.parse(JSON.stringify(i))}).then(function(e){var a=t.projects.find(function(e){return e.id===t.idProject});n(A({components:Object(z.a)(a.components),idProject:t.idProject,sectionsProject:t.sectionsProject}))}).catch(function(t){return n(R(t.message))});case 4:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()},Ye=n(94);function Ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ge(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ge(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var qe=function(t){return function(e){function n(){var t,e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=Object(b.a)(this,(t=Object(v.a)(n)).call.apply(t,[this].concat(o)))).state={mode:"default",scrollConfig:{duration:1e3,delay:50,smooth:!0,offset:-60},position:0,positionCount:null},e.setStates=function(t){e.setState(Ze({},e.state,{positionCount:t}))},e.blockMove=function(t){e.setState(Ze({},e.state,{mode:t}))},e.moveLocation=function(t){if("default"===e.state.mode){var n=e.state.positionCount,a=e.state.position<n&&t.deltaY>0,o=t.deltaY<0&&e.state.position>0;P.emit("EventClosePanel",{close:!1}),a?e.setState({position:e.state.position+1},function(){return Ye.scroller.scrollTo("element".concat(e.state.position),e.state.scrollConfig)}):o&&(1===e.state.position&&e.setState({position:e.state.position-1},function(){return Ye.animateScroll.scrollToTop()}),1!==e.state.position&&e.setState({position:e.state.position-1},function(){return Ye.scroller.scrollTo("element".concat(e.state.position),e.state.scrollConfig)}))}},e.componentDidMount=function(){P.on("EventBlockScroll",e.blockMove),P.on("EventSetState",e.setStates)},e.componentWillUnmount=function(){P.off("EventBlockScroll",e.blockMove),P.off("EventSetState",e.setStates)},e}return Object(S.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{key:"moveScroll",onWheel:this.moveLocation,onTouchStart:function(){return!1}},o.a.createElement(t,this.props)))}}]),n}(o.a.PureComponent)};n(311);var Ke=function(t){var e=Object(a.useState)(t.mode),n=Object(et.a)(e,1)[0],r=Object(a.useState)(t.path),i=Object(et.a)(r,1)[0];return o.a.createElement("div",{onClick:function(e){t.eventStreamBuild.emit("EventView",{action:!1,target:null}),e.stopPropagation()},className:"Viewer"},"image"===n||"background"===n?o.a.createElement("img",{src:i,alt:"fullImage"}):o.a.createElement("iframe",{src:"https://www.youtube.com/embed/".concat(t.iframe),title:"youtube",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))},$e=n(58),Qe=function(t){var e=t.instrumentPanel.colorPickerActive,n=t.componentStats.content,r=t.componentStats.fontSize,i=t.componentStats.coords,c=t.componentStats.size,s=""!==n?"Input":"";return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Position: "),o.a.createElement("span",{className:"textCoordsPanel"},i.x?i.x+" / "+i.y:" drop for active"),o.a.createElement("p",{className:"titleInstument"},"Color: "),o.a.createElement("div",{className:"controllersText"},o.a.createElement("input",{onClick:t.cbSetColor,className:"button_switch color_switch",type:"button",value:"color pick"})),e?o.a.createElement("div",{className:"wrapperColorPicker"},o.a.createElement($e.SketchPicker,{onChangeComplete:t.cbHandleChangeComplete,color:t.color?t.color:"white"})):null,o.a.createElement("p",{className:"titleInstument"},"Size (%):"),o.a.createElement("div",{className:"controllersText"},o.a.createElement("input",{className:"button_switch",onChange:t.cbSetWidth,type:"number",min:"10",max:"200",value:c.w?c.w:100}),o.a.createElement("input",{className:"button_switch",onChange:t.cbSetHeight,type:"number",min:"10",max:"200",value:c.h?c.h:50})),o.a.createElement("p",{className:"titleInstument"},"Text size: "),o.a.createElement("input",{className:"button_switch",onChange:t.cbSetSize,type:"number",min:"10",max:"200",value:r||21}),o.a.createElement("p",{className:"titleInstument"},"Border radius: "),o.a.createElement("input",{onChange:t.cbSetBorderRadius,className:"button_switch radius",type:"number",value:t.componentStats.borderRadius?t.componentStats.borderRadius:10,min:"10",max:"200"}),o.a.createElement("p",{className:"titleInstument"},"Type input: "),o.a.createElement("select",{value:t.componentStats.typeInput,onChange:t.cbSetType,className:"button_switch button_switch_type"},o.a.createElement("option",null,"button"),o.a.createElement("option",null,"text"),o.a.createElement("option",null,"password")),o.a.createElement("p",{className:"titleInstument"},"Content: "),o.a.createElement("input",{className:"button_switch",onChange:t.cbSetContent,maxLength:"100",type:"text",value:n||s}),o.a.createElement("input",{onClick:t.cbDelete,className:"instrumentPanel__deleteComponentButton",type:"button",value:"delete"}))},tn=function(t){var e=t.componentStats.size,n=t.componentStats.coords;return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Position: "),o.a.createElement("span",{className:"textCoordsPanel"},n.x?n.x+" / "+n.y:" drop for active"),o.a.createElement("p",{className:"titleInstument"},"Size (%):"),o.a.createElement("div",{className:"controllersText media"},o.a.createElement("input",{className:"button_switch",onChange:t.cbSetWidth,type:"number",min:"10",max:"100",value:e.w?e.w:30}),o.a.createElement("input",{className:"button_switch",onChange:t.cbSetHeight,type:"number",min:"10",max:"100",value:e.h?e.h:50})),o.a.createElement("p",{className:"titleInstument"},"Content: "),o.a.createElement("input",{onClick:t.cbSearch,className:"ImageSearchButton",type:"button",value:"search media"}),o.a.createElement("input",{onClick:t.cbDelete,className:"instrumentPanel__deleteComponentButton",type:"button",value:"delete"}))},en=function(t){var e=t.componentStats.coords,n=t.componentStats.size,r=t.componentStats.rotate,i=t.componentStats.scale,c=o.a.createRef();return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Position: "),o.a.createElement("span",{className:"textCoordsPanel"},e.x?e.x+" / "+e.y:" drop for active"),o.a.createElement("p",{className:"titleInstument"},"Size (%):"),o.a.createElement("div",{className:"controllersText"},o.a.createElement("input",{className:"button_switch size",onChange:t.cbSetWidth,type:"number",min:"10",max:"100",value:n.w?n.w:30}),o.a.createElement("input",{className:"button_switch size",onChange:t.cbSetHeight,type:"number",min:"10",max:"100",value:n.h?n.h:30})),o.a.createElement("p",{className:"titleInstument"},"Rotate/Scale:"),o.a.createElement("div",{className:"controllersText"},o.a.createElement("input",{className:"button_switch rotate",onChange:t.cbRotate,type:"number",min:"0",max:"360",value:r||0}),o.a.createElement("input",{className:"button_switch scale",onChange:t.cbScale,type:"number",step:"0.1",min:"0",max:"2",value:i||1})),o.a.createElement("p",{className:"titleInstument"},"Border radius: "),o.a.createElement("input",{onChange:t.cbSetBorderRadius,className:"button_switch radius",type:"number",value:t.componentStats.borderRadius?t.componentStats.borderRadius:10,min:"10",max:"200"}),o.a.createElement("p",{className:"titleInstument titleInstrument__opacity"},"Opacity: "),o.a.createElement("input",{onChange:t.cbSetOpacity,className:"ImageSearchButton",type:"number",value:t.componentStats.opacity?t.componentStats.opacity:1,step:"0.1",min:"0",max:"1"}),o.a.createElement("p",{className:"titleInstument titleInstrument__opacity"},"Loader: "),o.a.createElement("div",{className:"controllersText"},o.a.createElement("div",{className:"fileLoader"},o.a.createElement("input",{onClick:t.cbSearch,className:"ImageSearchButton file",type:"button",value:"search image"}),o.a.createElement("input",{ref:c,className:"fileInput",onChange:t.cbLoadFile,accept:"image/*",type:"file"}),o.a.createElement("input",{className:"ImageSearchButton file",type:"button",value:"loading file"}))),o.a.createElement("input",{onClick:t.cbDelete,className:"instrumentPanel__deleteComponentButton",type:"button",value:"delete"}))},nn=function(t){var e=t.componentStats.targetSection;return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Color: "),o.a.createElement("input",{onClick:t.cbSetColor,className:"button_switch Color",type:"button",value:"color pick"}),t.colorPickerActive?o.a.createElement($e.SketchPicker,{onChangeComplete:t.cbHandleChangeComplete,color:t.color?t.color:"white"}):null,o.a.createElement("input",{onClick:t.cbSearch,className:"ImageSearchButton",type:"button",value:"background-image"}),o.a.createElement("input",{disabled:"Header"===e,onClick:t.cbDelete,className:"instrumentPanel__deleteComponentButton",type:"button",value:"delete"}))},an=function(t){var e=t.instrumentPanel.colorPickerActive,n=t.componentStats.content,r=t.componentStats.fontSize,i=t.componentStats.coords,c=t.componentStats.rotate,s=t.componentStats.scale,l=""!==n?"Title":"";return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Position: "),o.a.createElement("span",{className:"textCoordsPanel"},i.x?i.x+" / "+i.y:" drop for active"),o.a.createElement("p",{className:"titleInstument"},"Rotate/Scale:"),o.a.createElement("div",{className:"controllersText"},o.a.createElement("input",{className:"button_switch rotate",onChange:t.cbRotate,type:"number",min:"0",max:"360",value:c||0}),o.a.createElement("input",{className:"button_switch scale",onChange:t.cbScale,type:"number",step:"0.1",min:"0",max:"2",value:s||1})),o.a.createElement("p",{className:"titleInstument"},"Color: "),o.a.createElement("input",{onClick:t.cbSetColor,className:"button_switch color",type:"button",value:"color pick"}),o.a.createElement("p",{className:"titleInstument"},"Text size: "),o.a.createElement("input",{className:"button_switch size",onChange:t.cbSetSize,type:"number",min:"10",max:"200",value:r||120}),e?o.a.createElement("div",{className:"wrapperColorPicker text"},o.a.createElement($e.SketchPicker,{onChangeComplete:t.cbHandleChangeComplete,color:t.color?t.color:"red"})):null,o.a.createElement("p",{className:"titleInstument"},"Font: "),o.a.createElement("select",{value:t.componentStats.font,onChange:t.cbSetFont,className:"button_switch font"},o.a.createElement("option",null,"Arial"),o.a.createElement("option",null,"Times"),o.a.createElement("option",null,"Georgia"),o.a.createElement("option",null,"Impact"),o.a.createElement("option",null,"Tahoma"),o.a.createElement("option",null,"Verdana"),o.a.createElement("option",null,"Comic")),o.a.createElement("p",{className:"titleInstument"},"Content: "),o.a.createElement("input",{className:"button_switch content",onChange:t.cbSetContent,maxLength:"100",type:"text",value:n||l}),o.a.createElement("input",{onClick:t.cbDelete,className:"instrumentPanel__deleteComponentButton",type:"button",value:"delete"}))};n(474);function on(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?on(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):on(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var cn=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).state={instrumentPanel:rn({},n.props.instrumentPanel),componentStats:n.props.componentStats,images:null},n.closePanel=function(t){n.props.eventStreamBuild.emit("EventClosePanel",{close:!1})},n.setSize=function(t){var e=n.state.componentStats.id,a=t.target.value>200?200:t.target.value;"input"!==n.state.componentStats.type?n.setState(rn({},n.state,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats,{fontSize:a})}),function(){return j.emit("EventChangeSize".concat(e),{targetSection:n.state.editComponentName,size:a})}):n.setState(rn({},n.state,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats,{fontSize:a})}),function(){return j.emit("EventChangeSizeText".concat(e),{size:a})})},n.setFont=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats,{font:a})}),function(){return j.emit("EventSetFont".concat(e),{targetSection:n.state.editComponentName,font:a})})},n.rotate=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats,{rotate:a})}),function(){return j.emit("EventResize".concat(e),{angle:a})}),t.stopPropagation()},n.scale=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats,{scale:a})}),function(){return j.emit("EventScale".concat(e),{scale:a})}),t.stopPropagation()},n.setIframeContent=function(t){n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{content:t.iframe})}))},n.setContent=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats,{content:a})}),function(){return j.emit("EventChangeContentText".concat(e),{targetSection:n.state.editComponentName,content:a})}),t&&t.stopPropagation()},n.setWidth=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{size:rn({},n.state.componentStats.size,{w:a})})}),function(){return j.emit("EventSetWidth".concat(e),{width:a})}),t&&t.stopPropagation()},n.setHeight=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{size:rn({},n.state.componentStats.size,{h:a})})}),function(){return j.emit("EventSetHeight".concat(e),{height:a})}),t&&t.stopPropagation()},n.updatePosition=function(t){t&&n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{coords:rn({},n.state.componentStats.coords,{x:t.x,y:t.y})})}))},n.setColor=function(t){n.setState(rn({},n.state,{instrumentPanel:rn({},n.state.instrumentPanel,{colorPickerActive:!n.state.instrumentPanel.colorPickerActive})})),t&&t.stopPropagation()},n.setType=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{typeInput:a})}),function(){return j.emit("EventSetType".concat(e),a)}),t&&t.stopPropagation()},n.setOpacity=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{opacity:a})}),function(){return j.emit("EventSetOpacity".concat(e),{opacity:a})})},n.setBorderRadius=function(t){var e=n.state.componentStats.id,a=t.target.value;n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{borderRadius:a})}),function(){return j.emit("EventSetBorderRadius".concat(e),{borderRadius:a})})},n.updateBimageStats=function(t){var e=t.images;"image"!==t.mode?n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{backgroundImage:e.urlFull})})):n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{image:e.urlFull})}))},n.handleChangeComplete=function(t){var e=t.rgb,a="rgb(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")"),o=n.state.componentStats.id;"background"===n.state.componentStats.type?n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{color:a})}),function(){return j.emit("EventChangeColorBackground".concat(o),{colorRGB:n.state.componentStats.color})}):"text"===n.state.componentStats.type?n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{color:a})}),function(){return j.emit("EventChangeColorText".concat(o),a)}):"input"===n.state.componentStats.type&&n.setState(rn({},n.state,{componentStats:rn({},n.state.componentStats,{color:a})}),function(){return j.emit("EventChangecolor".concat(o),a)})},n.redirectSaveChanges=function(t){n.props.eventStreamBuild.emit("EventSaveChangesComponent",rn({},n.state.componentStats,{id:n.state.componentStats.id,type:n.state.componentStats.type,ms:0})),t&&t.stopPropagation()},n.saveChanges=function(t){n.props.eventStreamBuild.emit("EventSaveChangesComponent",rn({},n.state.componentStats,{id:n.state.componentStats.id,type:n.state.componentStats.type,ms:1500})),P.emit("EventRedirectConfirm",!0),t&&t.stopPropagation()},n.deleteComponent=function(t){n.props.eventStreamBuild.emit("EventDeleteComponent",{id:n.state.componentStats.id,targetSection:n.state.componentStats.targetSection,type:n.state.componentStats.type})},n.search=function(t){var e=n.state.componentStats.id;n.props.eventStreamBuild.emit("EventModalSearchOn",{idComponent:e,mode:n.state.componentStats.type}),t.stopPropagation()},n.loadFile=function(t){var e=n.state.componentStats.id;try{var a=t.target.files[0],o=new FileReader;if("i"!==a.type[0])throw new Error("Invalid file");o.readAsDataURL(a),o.onload=function(t){j.emit("EventSetCurrentImage".concat(e),{urlFull:o.result}),n.updateBimageStats({images:{urlFull:o.result},mode:"image"}),t.stopPropagation()},o.onerror=function(){console.error(o.error)}}catch(r){console.error(r.message)}t.stopPropagation()},n.makePanelInstruments=function(t){switch(t){case"text":return o.a.createElement(an,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats),cbSetColor:n.setColor,cbSetSize:n.setSize,cbHandleChangeComplete:n.handleChangeComplete,cbSetContent:n.setContent,cbSetFont:n.setFont,cbSetOpacity:n.setOpacity,color:n.state.componentStats.color,cbDelete:n.deleteComponent,cbRotate:n.rotate,cbScale:n.scale});case"background":return o.a.createElement(nn,{colorPickerActive:n.state.instrumentPanel.colorPickerActive,componentStats:rn({},n.state.componentStats),cbSetColor:n.setColor,color:n.state.componentStats.color,cbHandleChangeComplete:n.handleChangeComplete,cbSearch:n.search,cbDelete:n.deleteComponent});case"image":return o.a.createElement(en,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats),cbSearch:n.search,cbSetSize:n.setSize,cbSetBorderRadius:n.setBorderRadius,cbSetOpacity:n.setOpacity,cbSetWidth:n.setWidth,cbSetHeight:n.setHeight,cbLoadFile:n.loadFile,cbDelete:n.deleteComponent,cbRotate:n.rotate,cbScale:n.scale});case"media":return o.a.createElement(tn,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats),cbSearch:n.search,cbSetWidth:n.setWidth,cbSetHeight:n.setHeight,cbDelete:n.deleteComponent});case"input":return o.a.createElement(Qe,{instrumentPanel:rn({},n.state.instrumentPanel),componentStats:rn({},n.state.componentStats),cbSetColor:n.setColor,cbSetBorderRadius:n.setBorderRadius,cbHandleChangeComplete:n.handleChangeComplete,cbSetSize:n.setSize,cbSetWidth:n.setWidth,cbSetHeight:n.setHeight,color:n.state.componentStats.color,cbSetContent:n.setContent,cbSetType:n.setType,cbDelete:n.deleteComponent});default:return o.a.createElement("p",{className:"warningInstruments"},"No found element")}},n.componentDidUpdate=function(t,e){e.componentStats!==n.state.componentStats&&n.saveChanges()},n.componentDidMount=function(t){P.on("EventRedirectSaveChanges",n.redirectSaveChanges),P.on("EventSetBImageInstumentPanel",n.updateBimageStats),P.on("EventSetIframe",n.setIframeContent),j.on("EventUpdatePosition".concat(n.state.componentStats.id),n.updatePosition)},n.componentWillUnmount=function(t){n.timer&&clearTimeout(n.timer),P.off("EventRedirectSaveChanges",n.redirectSaveChanges),P.off("EventSetBImageInstumentPanel",n.updateBimageStats),P.off("EventSetIframe",n.setIframeContent),j.off("EventUpdatePosition".concat(n.state.componentStats.id),n.updatePosition)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.state.instrumentPanel.instrumentActive;return o.a.createElement("div",{className:"instumentsPanel"},o.a.createElement("button",{onClick:this.closePanel,className:"closeInstrumentsPanel"},o.a.createElement(ft,{path:"/img/close.svg"})),o.a.createElement("h3",null,"Instruments"),t?o.a.createElement("p",{className:"TextComponent"},this.state.componentStats.type):null,t?o.a.createElement("div",{className:"instuments"},this.makePanelInstruments(this.state.componentStats.type)):null)}}]),e}(o.a.PureComponent);function sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function ln(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sn(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var un=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={modal:{modalSearch:!1,modalSearchMode:null},modalViewer:{action:!1,image:null,mode:null},instrumentPanel:{colorPickerActive:!1,instrumentActive:!1},componentStats:{},editComponentName:n.props.editComponentName},n.modalSearchOn=function(t){n.setState(ln({},n.state,{modal:ln({},n.state.modal,{modalSearch:!n.state.modal.modalSearch,modalSearchMode:t.mode||null})}))},n.ViewerSwitch=function(t){n.setState(ln({},n.state,{modalViewer:ln({},n.state.modalViewer,{action:t.action,target:t.target,mode:t.mode,iframe:t.iframe})}))},n.openInstrument=function(t){n.state.componentStats.id===t.componentStats.id&&n.state.instrumentPanel.instrumentActive||n.setState(ln({},n.state,{editComponentName:t.targetSection,componentStats:ln({},n.state.componentStats,{},t.componentStats),instrumentPanel:ln({},n.state.instrumentPanel,{instrumentActive:!0})}))},n.closePanel=function(t){n.setState(ln({},n.state,{instrumentPanel:ln({},n.state.instrumentPanel,{colorPickerActive:!1,instrumentActive:t.close})}))},n.componentDidMount=function(){n.props.eventStreamBuild.on("EventModalSearchOn",n.modalSearchOn),n.props.eventStreamBuild.on("EventView",n.ViewerSwitch),n.props.eventStreamBuild.on("EventClosePanel",n.closePanel),n.props.eventEmitter.on("EventInstrumentPanel",n.openInstrument)},n.componentWillUnmount=function(){n.props.eventStreamBuild.off("EventModalSearchOn",n.modalSearchOn),n.props.eventEmitter.off("EventInstrumentPanel",n.openInstrument),n.props.eventStreamBuild.off("EventView",n.ViewerSwitch),n.props.eventStreamBuild.off("EventClosePanel",n.closePanel)},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props;return this.state.instrumentPanel.instrumentActive?o.a.createElement(a.Fragment,{key:"AdditionalBuild"},o.a.createElement(ot.a,{in:this.state.modalViewer.action,timeout:300,classNames:"modalAnimation",unmountOnExit:!0,appear:!0},o.a.createElement(Ke,{key:"ImageViewer",eventStreamBuild:t.eventStreamBuild,mode:this.state.modalViewer.mode,path:this.state.modalViewer.target,iframe:this.state.modalViewer.iframe})),o.a.createElement(ot.a,{in:this.state.modal.modalSearch,timeout:300,classNames:"modalAnimation",unmountOnExit:!0,appear:!0},o.a.createElement(Tt,{eventStreamBuild:t.eventStreamBuild,idComponent:this.state.componentStats.id,modalSearchMode:this.state.modal.modalSearchMode,key:"ModalWindow",workMode:"Search"})),o.a.createElement(cn,{key:"InstrumentsPanel".concat(this.state.componentStats.id),eventStreamBuild:t.eventStreamBuild,editComponentName:this.state.editComponentName,componentStats:this.state.componentStats,instrumentPanel:this.state.instrumentPanel})):o.a.createElement(a.Fragment,null)}}]),e}(o.a.PureComponent);n(475);function pn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function mn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pn(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var dn=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).state={mode:n.props.mode,sizeParentBox:mn({},n.props.sizeParentBox),title:"Title"},n.addText=function(t){var e=Math.random().toFixed(3),a={type:"text",font:"Arial",color:null,rotate:0,scale:1,opacity:1,fontSize:null,content:"Title",coords:{x:null,y:null},id:e,targetSection:n.props.editComponentName};n.props.eventStreamBuild.emit("EventBuildComponents",{componentsPattern:a,type:a.type,component:o.a.createElement(Ae,Object.assign({key:"text".concat(e),mode:"dev"},a,{sizeParentBox:mn({},n.props.sizeParentBox),id:e}),"Title")}),t.stopPropagation()},n.addBackground=function(t){var e=Math.random().toFixed(3),a={id:e,type:"background",backgroundColor:null,backgroundImage:null,targetSection:n.state.editComponentName};n.props.eventStreamBuild.emit("EventBuildComponents",{componentsPattern:a,type:a.type,component:o.a.createElement($t,Object.assign({targetSection:n.props.editComponentName},a,{key:"bg".concat(e),id:e}))}),t.stopPropagation()},n.addImage=function(t){var e=Math.random().toFixed(3),a={borderRadius:0,type:"image",size:{w:30,h:50},opacity:1,rotate:0,zIndex:null,image:"/constructor/img/photoPattern.svg",coords:{x:null,y:null},id:e,targetSection:n.props.editComponentName};n.props.eventStreamBuild.emit("EventBuildComponents",{componentsPattern:a,type:a.type,component:o.a.createElement(Ne,Object.assign({key:"image".concat(e),sizeParentBox:n.props.sizeParentBox,id:e,mode:"dev",path:"/img/photoPattern.svg"},a,{type:"image"}))}),t.stopPropagation()},n.addMedia=function(t){var e=Math.random().toFixed(3),a={type:"media",size:{w:null,h:null},content:null,coords:{x:null,y:null},id:e,targetSection:n.props.editComponentName};n.props.eventStreamBuild.emit("EventBuildComponents",{componentsPattern:a,type:a.type,component:o.a.createElement(ve,Object.assign({key:"media".concat(e),targetSection:n.props.editComponentName,sizeParentBox:n.props.sizeParentBox,content:null,id:e,path:"/img/photoPattern.mp4"},a,{type:"media",mode:"dev"}))}),t.stopPropagation()},n.addInput=function(t){var e=Math.random().toFixed(3),a={type:"input",size:{w:null,h:null},typeInput:"button",color:null,fontSize:null,borderRadius:null,content:null,coords:{x:null,y:null},id:e,targetSection:n.props.editComponentName};n.props.eventStreamBuild.emit("EventBuildComponents",{componentsPattern:a,type:a.type,component:o.a.createElement(le,Object.assign({key:"input".concat(e),targetSection:n.props.editComponentName,sizeParentBox:n.props.sizeParentBox,id:e,inputType:"button"},a,{type:"input",mode:"dev"}))}),t.stopPropagation()},n.addSection=function(t){var e=Math.random().toFixed(3),a={backgroundColor:null,backgroundImage:null,targetSection:"Section".concat(e),id:"Section".concat(e),type:"background"};n.props.eventStreamBuild.emit("EventNewSection",{componentsPattern:a,component:o.a.createElement($t,Object.assign({},a,{key:"bg".concat(e),id:e,targetSection:"Section".concat(e),width:"100%",height:"800px",type:"background",mode:"dev"}))}),t.stopPropagation()},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return"build"===this.state.mode?o.a.createElement("div",{className:"ComponentsMenu"},o.a.createElement("button",{onClick:this.addImage,className:"ImageTool CompoentnsMenu_button"},o.a.createElement("span",null,"Image")),o.a.createElement("button",{onClick:this.addText,className:"TextTool CompoentnsMenu_button"},o.a.createElement("span",null,"Text")),o.a.createElement("button",{onClick:this.addInput,disabled:"Header"===this.props.editComponentName,className:"ButtonTool CompoentnsMenu_button"},o.a.createElement("span",null,"Button")),o.a.createElement("button",{onClick:this.addMedia,className:"VideoTool CompoentnsMenu_button"},o.a.createElement("span",null,"Video"))):"section"===this.state.mode?o.a.createElement("div",{className:"sectionMode"},o.a.createElement("button",{onClick:this.addSection,className:"newSectionTool CompoentnsMenu_button"},o.a.createElement("span",null,"New section"))):o.a.createElement(a.Fragment,null)}}]),e}(o.a.PureComponent);n(476);function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var hn=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={viewComponentMenu:!1,editComponentName:n.props.editComponentName,shiftX:0,shiftY:0,coordsX:"50%",coordsY:"0",shadowDisplay:"block"},n.componentMenu=function(t){n.setState({viewComponentMenu:!n.state.viewComponentMenu}),t.stopPropagation()},n.componentDidUpdate=function(){n.props.editComponentName!==n.state.editComponentName&&n.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fn(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n.state,{editComponentName:n.props.editComponentName}))},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return o.a.createElement(a.Fragment,null,o.a.createElement("div",{ref:this.refControll,className:"ControllersEditComponent"},o.a.createElement(ft,{onClick:this.componentMenu,className:"ControllersEditComponent__addButton",path:"/img/addButton.png"}),this.state.viewComponentMenu?o.a.createElement(dn,{key:"buildMenu ".concat(this.state.editComponentName),mode:"build",eventStreamBuild:this.props.eventStreamBuild,editComponentName:this.state.editComponentName,sizeParentBox:this.props.sizeParentBox,countComponents:this.props.countComponents}):null))}}]),e}(o.a.PureComponent);n(477);function gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gn(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var vn=function(t){function e(){var t,n;Object(l.a)(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).state={idProject:parseInt(n.props.match.params.param),editStart:!1,isChange:!1,isLoadComponents:!0,projectEmpty:!1,componentJSX:[],editComponentName:null,menuActive:!1,sizeParentBox:null},n.eventEmitterBuild=new y.a,n.timer=null,n.workModeEdit=function(t){t.editStart&&n.setState(bn({},n.state,{editStart:t.editStart,editComponentName:t.targetSection,menuActive:!0}))},n.deleteComponent=function(t){if("Header"!==t.id||"background"!==t.type){var e=n.props.userData.currentProjectsData,a=n.state.componentJSX,o={id:n.state.idProject,uid:n.props.userData.idUser,idComponent:t.id,sectionsProject:Object(z.a)(e.sectionsProject),type:t.type};n.props.dispatch(St(o)).then(function(t){if(null!==t){var e=a.filter(function(e){return e.id!==t});n.setState(bn({},n.state,{componentJSX:e}))}})}},n.addComponentsFromBD=function(t,e){e||(e=n.state.sizeParentBox);var o=n.state.componentJSX,r=[];t.forEach(function(t){if("background"!==t.type){var n={props:bn({},t,{sizeParentBox:e,mode:"dev"}),type:t.type,id:t.id},o={id:t.id,targetSection:t.targetSection,component:Te(n)(a.Fragment)};r.push(o)}}),n.setState(bn({},n.state,{isLoadComponents:!1,sizeParentBox:bn({},e),componentJSX:[].concat(Object(z.a)(o),r)}))},n.addComponent=function(t){var e=n.state.componentJSX,a=t.componentsPattern,o={id:a.id,targetSection:a.targetSection,component:t.component};n.setState(bn({},n.state,{componentJSX:[].concat(Object(z.a)(e),[o])}))},n.saveChangesComponent=function(t){var e=t.ms;n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){var e=n.props.userData.currentProjectsData,a=n.props.userData,o=!1,r=e.components.map(function(e){return e.id===t.id?(o=!0,bn({},t)):e});o||r.push(t),n.props.dispatch(Je({uid:a.idUser,projects:Object(z.a)(a.projects),components:r,sectionsProject:Object(z.a)(e.sectionsProject),idProject:n.state.idProject})).then(function(){return P.emit("EventRedirectConfirm",{false:!1,confirm:!1})})},e)},n.mainComponent=null,n.mainRefComponent=function(t){return t?n.mainComponent={data:t.getBoundingClientRect(),node:t}:t},n.addNewSection=function(t){var e=n.props.userData,a=e.currentProjectsData;console.log(t),n.props.dispatch(Je({uid:e.idUser,projects:Object(z.a)(e.projects),components:[].concat(Object(z.a)(a.components),[t.componentsPattern]),sectionsProject:[].concat(Object(z.a)(a.sectionsProject),[t.componentsPattern.id]),idProject:n.state.idProject})).then(function(){n.setState(bn({},n.state,{componentJSX:[].concat(Object(z.a)(n.state.componentJSX),[t.component])}),function(){P.emit("EventSetState",a.sectionsProject.length)})})},n.componentDidUpdate=function(t){var e=n.props.userData,a=e.currentProjectsData,o=n.state.isLoadComponents,r=null;if(n.mainComponent&&null===n.state.sizeParentBox&&(r={width:n.mainComponent.data.width,height:n.mainComponent.data.height,top:n.mainComponent.data.top,left:n.mainComponent.data.left}),e.active&&!a.loadProject){var i=e.projects.find(function(t){return t.id===n.state.idProject});i?n.props.dispatch(_({id:i.id,typeProject:i.type,sectionsProject:Object(z.a)(i.sectionsProject),components:Object(z.a)(i.components)})):n.setState(bn({},n.state,{projectEmpty:!0}))}a.loadProject&&o&&(null===n.state.sizeParentBox&&null!==r?n.addComponentsFromBD(Object(z.a)(a.components),r):n.addComponentsFromBD(Object(z.a)(a.components)),P.emit("EventSetState",a.sectionsProject.length-1)),a.sectionsProject.length!==t.userData.currentProjectsData.sectionsProject.length&&P.emit("EventSetState",a.sectionsProject.length-1)},n.componentDidMount=function(){var t=n.props.userData,e=t.currentProjectsData;if(t.active&&!e.loadProject){var a=t.projects.find(function(t){return t.id===n.state.idProject});n.props.dispatch(_({id:a.id,sectionsProject:Object(z.a)(a.sectionsProject),typeProject:a.type,components:Object(z.a)(a.components)})),P.on("EventModeEdit",n.workModeEdit),n.eventEmitterBuild.on("EventBuildComponents",n.addComponent),n.eventEmitterBuild.on("EventDeleteComponent",n.deleteComponent),n.eventEmitterBuild.on("EventNewSection",n.addNewSection),n.eventEmitterBuild.on("EventSaveChangesComponent",n.saveChangesComponent)}},n.componentWillUnmount=function(){n.props.userData.active&&(n.props.dispatch(M(!0)),P.off("EventModeEdit",n.workModeEdit),n.eventEmitterBuild.off("EventBuildComponents",n.addComponent),n.eventEmitterBuild.off("EventDeleteComponent",n.deleteComponent),n.eventEmitterBuild.off("EventNewSection",n.addNewSection),n.eventEmitterBuild.off("EventSaveChangesComponent",n.saveChangesComponent))},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){if(this.state.projectEmpty)return o.a.createElement(C.a,{to:"/Cabinet"});var t=this.props.userData,e=t.currentProjectsData,n=e.sectionsProject;return t.active&&e.loadProject?o.a.createElement(a.Fragment,null,o.a.createElement(xt,{key:"Header",title:"Constructor",idUser:t.idUser})," ",o.a.createElement(He.a,{ie:!0,only:!0},o.a.createElement("h2",{className:"ie"},"All the magic tricks in this app work best in Chrome / Firefox / Opera and other. ",o.a.createElement("hr",null),"Internet explorer deprecated. ")," ")," ",o.a.createElement(He.a,{except:!0,ie:!0},o.a.createElement("div",{ref:this.mainRefComponent,onMouseMove:this.showAddSection,className:"Build",key:"Build"}," ",this.state.editStart&&o.a.createElement(hn,{key:"controllers",eventStreamBuild:this.eventEmitterBuild,editComponentName:this.state.editComponentName,countComponents:e.components.length,menuActive:this.state.menuActive,sizeParentBox:this.state.sizeParentBox})," ",o.a.createElement(dn,{key:"buildMenu",eventStreamBuild:this.eventEmitterBuild,countSection:5*this.state.componentJSX.length,mode:"section",className:"menu"}),o.a.createElement(un,{key:"tools",eventStreamBuild:this.eventEmitterBuild,eventEmitter:P,editComponentName:this.state.editComponentName})," ",n.length&&o.a.createElement(ne,{mode:"dev",key:"section",componentJSX:this.state.componentJSX,editComponentName:this.state.editComponentName,menuActive:this.state.menuActive,sizeParentBox:this.state.sizeParentBox,userData:t})," ")," ")," "):this.props.firebase.getCurrentUser()?o.a.createElement(nt,{key:"Loader",path:"/img/loading.gif",type:"build"}):o.a.createElement(C.a,{to:"/"})}}]),e}(o.a.Component),Sn=Object(k.b)(function(t){return{userData:{active:t.cabinet.active,idUser:t.cabinet.idUser,projects:Object(z.a)(t.cabinet.projects),currentProjectsData:bn({},t.builder)}}})(tt(qe(vn))),En=function(t){return o.a.createElement("div",{className:"guide openPanelGuide"},o.a.createElement("h4",{className:"guide__title"},"Open panel"),o.a.createElement("p",{className:"guide_content"},"If you want to open the toolbar, you should double-click on the background."),o.a.createElement("img",{src:"/constructor/img/guideOpenPanel.gif",alt:"guide"}))},yn=function(t){return o.a.createElement("div",{className:"guide addComponents"},o.a.createElement("h4",{className:"guide__title"},"Search guide"),o.a.createElement("p",{className:"guide_content"},'On the toolbar, click on the "Search" button and enter a keyword in the search field.'),o.a.createElement("img",{src:"/constructor/img/search.gif",alt:"guide"}))},On=function(t){return o.a.createElement("div",{className:"guide addComponents"},o.a.createElement("h4",{className:"guide__title"},"Add components"),o.a.createElement("p",{className:"guide_content"},"Click on the button at the top of the screen and select a component."),o.a.createElement("img",{src:"/constructor/img/add.gif",alt:"guide"}))},jn=function(t){return o.a.createElement("div",{className:"guide addComponents"},o.a.createElement("h4",{className:"guide__title"},"Add components"),o.a.createElement("p",{className:"guide_content"},"If you want to add a new section, click on the button at the bottom of the page."),o.a.createElement("img",{src:"/constructor/img/newSection.gif",alt:"guide"}))},Pn=function(t){return o.a.createElement("div",{className:"guide addComponents"},o.a.createElement("h4",{className:"guide__title"},"Add components"),o.a.createElement("p",{className:"guide_content"},"If you want to create a new project, in your account (/ Cabinet) click on the button at the top of the page."),o.a.createElement("img",{src:"/constructor/img/newProject.gif",alt:"guide"}))};n(478);function Cn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function wn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cn(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Nn=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={mode:"panel"},n.changeWorkMode=function(t){t.target===n.refOP&&n.setState(wn({},n.state,{mode:"panel"})),t.target===n.refSE&&n.setState(wn({},n.state,{mode:"search"})),t.target===n.refADD&&n.setState(wn({},n.state,{mode:"add"})),t.target===n.refSN&&n.setState(wn({},n.state,{mode:"section"})),t.target===n.refPR&&n.setState(wn({},n.state,{mode:"project"})),t.stopPropagation()},n.refOP=null,n.refSE=null,n.refADD=null,n.refSN=null,n.refPR=null,n.refOpenPanel=function(t){return n.refOP=t},n.refSearch=function(t){return n.refSE=t},n.refAdd=function(t){return n.refADD=t},n.refSection=function(t){return n.refSN=t},n.refProject=function(t){return n.refPR=t},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"switchContainer"},o.a.createElement("div",{className:"col--17 col-sm-10 switchContainer__controllers"},o.a.createElement(ft,{className:"switchContainer__menu",path:"/img/Menu_Burder.png"}),o.a.createElement("ul",{className:"guide_list list"},o.a.createElement("li",null,o.a.createElement("input",{onClick:this.changeWorkMode,className:"panel"!==this.state.mode?"switch__button panel":"switch__button panel activeButton",type:"button",ref:this.refOpenPanel,value:"Open panel for edit"})),o.a.createElement("li",null,o.a.createElement("input",{onClick:this.changeWorkMode,className:"search"!==this.state.mode?"switch__button search":"switch__button search activeButton",type:"button",ref:this.refSearch,value:"Search image/media"})),o.a.createElement("li",null,o.a.createElement("input",{onClick:this.changeWorkMode,className:"add"!==this.state.mode?"switch__button add":"switch__button add activeButton",type:"button",ref:this.refAdd,value:"Adding components"})),o.a.createElement("li",null,o.a.createElement("input",{onClick:this.changeWorkMode,className:"section"!==this.state.mode?"switch__button section":"switch__button section activeButton",type:"button",ref:this.refSection,value:"Adding new section"})),o.a.createElement("li",null,o.a.createElement("input",{onClick:this.changeWorkMode,className:"project"!==this.state.mode?"switch__button project":"switch__button project activeButton",type:"button",ref:this.refProject,value:"Create new project"})))),o.a.createElement("div",{className:"col--80--1"},"panel"===this.state.mode&&o.a.createElement(En,null),"search"===this.state.mode&&o.a.createElement(yn,null),"add"===this.state.mode&&o.a.createElement(On,null),"section"===this.state.mode&&o.a.createElement(jn,null),"project"===this.state.mode&&o.a.createElement(Pn,null)))}}]),e}(o.a.PureComponent),xn=(n(479),function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={config:n.props.config},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.firebase.getCurrentUser();if(t&&this.props.idUser){var e=this.state.config;return o.a.createElement(a.Fragment,null,o.a.createElement(xt,{title:e.title,idUser:t.uid}),o.a.createElement("section",{className:"Guide"},o.a.createElement("div",{className:"container guide--flex"},o.a.createElement("div",{className:"Guide__about"},o.a.createElement("h2",null,"Documentation"),o.a.createElement("p",null,"Get started with ",e.title),o.a.createElement("p",{className:"Guide__about__rev"},"The Constructor guides are step-by-step walkthroughs that help you get started using Constructor.")),o.a.createElement(Nn,null))))}return t?o.a.createElement(nt,{path:"/img/loading.gif",type:"About"}):o.a.createElement(C.a,{to:"/"})}}]),e}(o.a.PureComponent)),kn=Object(k.b)(function(t){return{idUser:t.cabinet.idUser}})(tt(xn));n(480);function Dn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dn(n,!0).forEach(function(e){Object(B.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var zn=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(o)))).state={firebase:n.props.firebase,firebaseLoadState:!1,config:n.props.config},n}return Object(S.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.firebase.auth.onAuthStateChanged(function(e){var n;t.state.firebaseLoadState||(e?t.props.dispatch((n=e.uid,function(){var t=Object(q.a)(Z.a.mark(function t(e,a,o){var r,i;return Z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.firebase,i=null,t.next=4,r.db.collection("users").doc(n).get().then(function(t){var a=t.data();e(T({uid:n,projects:Object(z.a)(a.projects)}))}).catch(function(t){console.error(t.message),e(R(t.message)),i=!0});case 4:if(i){t.next=8;break}return t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}())).then(function(e){t.setState(In({},t.state,{firebaseLoadState:e}))}):t.setState(In({},t.state,{firebaseLoadState:!0})))})}},{key:"render",value:function(){var t=this;return this.state.firebaseLoadState?o.a.createElement(C.d,null,o.a.createElement(C.b,{path:"/",exact:!0,render:function(e){return o.a.createElement(vt,Object.assign({},e,{config:t.state.config}))}}),o.a.createElement(C.b,{path:"/Cabinet/",exact:!0,render:function(e){return o.a.createElement(Yt,Object.assign({},e,{config:t.state.config}))}}),o.a.createElement(C.b,{path:"/Cabinet/About",render:function(e){return o.a.createElement(Le,Object.assign({},e,{config:t.state.config}))}}),o.a.createElement(C.b,{path:"/Cabinet/Guide",exact:!0,render:function(e){return o.a.createElement(kn,Object.assign({},e,{config:t.state.config}))}}),o.a.createElement(C.b,{path:"/Cabinet/Build/:param",exact:!0,render:function(t){return o.a.createElement(Sn,t)}}),o.a.createElement(C.b,{path:"/Cabinet/Build/:param/Production",exact:!0,component:We}),o.a.createElement(C.b,{path:"/crashPage",component:w})):o.a.createElement(nt,{path:"/img/loading.gif",type:"application"})}}]),e}(o.a.PureComponent),Bn=Object(k.b)()(tt(zn));n(481);i.a.render(o.a.createElement(x.a,null,o.a.createElement(N,null,o.a.createElement(Q.Provider,{value:g},o.a.createElement(k.a,{store:Y},o.a.createElement(Bn,{config:f}))))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/constructor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/constructor","/service-worker.js");c?(function(t,e){fetch(t).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):s(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):s(e,t)})}}()},57:function(t){t.exports={title:"Constructor",CabinetIcon:"/img/logo.svg",firebase:{session:"SESSION",lowConnection:"true"},about:{developer:"Pavel Petrovich",year:"2019"}}}},[[214,1,2]]]);
//# sourceMappingURL=main.9d73e37b.chunk.js.map