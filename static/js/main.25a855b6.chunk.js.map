{"version":3,"sources":["serviceWorker.js","Firebase/firebaseConfig.js","Firebase/Firebase.js","EventEmitter.js","components/ErrorCatch/ErrorPage.jsx","components/ErrorCatch/ErrorBoundary.jsx","redux/actions.js","redux/reducerBuilder.js","redux/reducerCabinet.js","redux/reducers.js","redux/store.js","redux/middleware/loadUserMiddleware.js","components/firebaseHOC.jsx","components/loading/Loader.jsx","components/Registration/Registration.jsx","Pages/Index/Index.jsx","redux/middleware/middlewareDelete.js","components/Icon/icon.jsx","components/header/Header.jsx","components/imageViewer/imageItem.jsx","components/modalWindow/ModalWindow.jsx","redux/middleware/createProjectMiddleware.js","components/List/Item.jsx","components/List/List.jsx","components/ProjectsSection/ProjectsSection.jsx","Pages/Cabinet/Cabinet.jsx","Pages/About/About.jsx","redux/middleware/updateMiddleware.js","components/buildComponents/components/Text.jsx","components/buildComponents/components/Background.jsx","components/componentsBuilder/BuilderComponents.jsx","components/imageViewer/imageViewer.jsx","components/instrumentsPanel/InstrumentsPanel.jsx","components/componentsBuildMenu/BuildMenu.jsx","components/controllers/controllers.jsx","components/buildComponents/header/headerBuild.jsx","Pages/Build/Build.jsx","App.jsx","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebaseInterface","require","Firebase","Object","classCallCheck","this","firebase","auth","db","rules","setPersistence","Auth","Persistence","email","password","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","currentUser","stream","EventEmitter","ErrorPage","redirect","update","event","_this","setState","eventEmitter","emit","react_default","a","createElement","react_router","to","class","className","onClick","React","Component","ErrorBoundary","hasError","updateApplication","componentDidMount","on","componentWillUnmount","off","info","ErrorCatch_ErrorPage","props","children","PureComponent","exitProjectAction","type","exit","loadCurrentProjectAction","id","typeProject","components","loadUserAction","active","idUser","uid","projects","errorAction","initialState","loadProject","idProject","combineReducers","builder","arguments","length","undefined","action","objectSpread","toConsumableArray","cabinet","map","item","middleware","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","withExtraArgument","reduxCatch","getState","lastAction","dispatch","debug","store","createStore","middlewareLogin","_ref2","asyncToGenerator","regenerator_default","mark","_callee","_ref","wrap","_context","prev","next","login","response","collection","doc","user","get","docUser","data","message","stop","_x","_x2","_x3","apply","middlewareLogOutUser","_ref6","_callee3","_ref5","_context3","_x7","_x8","_x9","withFirebase","assign","Loader","_useState","useState","path","slicedToArray","src","alt","emailRef","passwordRef","setRefEmail","node","setRefPassword","createUser","value","Error","set","autoComplete","ref","Index","title","registrationActive","regStatus","wrongEnter","emailImput","passwordImput","statusRegistration","additionalUserInfo","isNewUser","stopPropagation","showBox","authTo","e","components_Registration_Registration","connect","middlewareDelete","filter","itemdb","Icon","_useState3","_useState5","draggable","iconPath","CabinetIcon","Header","redirectAbout","redirectA","redirectCabinet","redirectC","logOut","pathname","add","icon","withRouter","ImageItem","urls","regular","urlRegular","full","urlFull","_useState7","isFull","selected","url","ModalWindow","workMode","images","buttonSearchDisabled","selectedItem","showUrl","imageBoxView","newProject","validateName","validateType","disabled","name","imageMenuActive","warning","lengthMax","lengthMin","inputSearch","inputSelect","searchBackground","api","concat","search","inages","isFetch","ok","json","results","showMenuImage","showImage","target","setSelectedImage","idComponent","makeImageResultBox","items","i","imageItem","key","addNewProject","mode","selectOption","inputs","defineProperty","lengthInput","cancel","refSelect","refSearch","onChange","placeholder","react","middlewareCreateProject","list","lastProject","lastIndex","push","_useState4","canBuild","setCanBuild","_useState9","data-id","List","makeList","project","List_Item","ProjectsSection","components_List_List","Cabinet","deletItem","getCurrentUser","changeWorkMode","header_Header","modalWindow_ModalWindow","components_ProjectsSection_ProjectsSection","about","developer","year","updateMiddleware","newProjects","JSON","parse","stringify","find","Title","styled","h1","attrs","style","display","shadowDisplay","left","coordX","top","coordY","_templateObject","size","textColor","TextComponent","sizeParenBox","color","_useState6","colorText","setColorText","_useState8","sizeText","setSizeText","content","_useState10","contentText","setText","_useState11","_useState12","shiftCoords","setShiftCoords","_useState13","coords","x","y","_useState14","dragNdrop","setDragNdrop","openTitleInstruments","sizeTextValue","changeColorText","changeSizeText","eventSize","changeContentText","eventContent","moveText","pageX","pageY","convertToPercentX","width","convertToPercentY","height","position","toFixed","useEffect","onMouseDown","rect","getBoundingClientRect","onDragStart","onDrag","onDragEnd","onWheel","shiftKey","deltaY","counter","Background","div","Background_templateObject","backgroundColor","backgroundImage","BackgroundComponent","count","setCount","boxComponent","createRef","background","setBgColor","setImage","changeColor","setBackgroundImage","current","focus","boxInform","saveWidth","BuilderComponents","Text","components_Background","ImageViewer","InstrumentsPanel","instrumentPanel","componentsStats","mainBuilderData","updateSizeText","fontSize","closePanel","close","setSize","setContent","contentValue","updatePosition","eventItem","setColor","colorPickerActive","updateBimageStats","handleChangeComplete","rgb","colorRGB","r","g","b","saveChanges","searchImage","makePanelInstruments","min","max","lib","onChangeComplete","maxLength","defaultValue","componentDidUpdate","oldProps","oldState","targetBool","instrumentActive","BuildMenu","editComponentName","componentsPatternStatus","image","addText","countComponents","component","componentsBuilder_BuilderComponents","addBackground","ControllersBox","controllers_templateObject","Controllers","viewComponentMenu","shiftX","shiftY","coordsX","coordsY","componentMenu","saveCoords","controlBox","drag","refControll","menuActive","componentsBuildMenu_BuildMenu","HeaderBuild","changeMode","editStart","currentTarget","refBox","refBackground","bg","componentJSX","readyBuild","controllers","Build","parseInt","params","param","mainBoxWidth","mainBoxHeight","buildGetComponents","modalSearch","modalImageViewer","modalSearchOn","itemEvent","imageViewerSwitch","workModeEdit","openInstrument","targetEqual","idEqual","instumentActive","addComponentsFromBD","array","componentsFromDB","forEach","addComponent","dataBaseData","saveChangesComponent","userData","_components","currentProjectsData","currentProject","imageViewer_imageViewer","instrumentsPanel_InstrumentsPanel","header_headerBuild","prevProps","_this2","isIncludeComponent","isIncludeComponentJSX","isIclude","App","firebaseLoadState","onAuthStateChanged","_ref4","_callee2","_ref3","_context2","_x4","_x5","_x6","_this3","exact","render","Pages_Index_Index","Pages_About_About","saveSession","ReactDOM","react_router_dom","ErrorCatch_ErrorBoundary","es","src_App","document","getElementById","URL","href","origin","addEventListener","fetch","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.25a855b6.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log('This web app is being served cache-first by a service worker.');\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// setings in root folder / firebase.env\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_APPID\r\n};\r\n\r\nexport default firebaseConfig;","import * as firebase from 'firebase/app';\r\nimport firebaseConfig from './firebaseConfig';\r\n\r\nconst auth = require('firebase/auth');\r\nconst firestore = require('firebase/firestore');\r\n\r\nclass Firebase {\r\n\r\n        constructor(firebaseConfig){\r\n                firebase.initializeApp(firebaseConfig);\r\n                this.auth = firebase.auth();\r\n                this.db = firebase.firestore();\r\n        }\r\n\r\n        saveSession(rules){\r\n                return this.auth.setPersistence(firebase.auth.Auth.Persistence[rules]);\r\n        }\r\n\r\n        login(email, password){\r\n                try {\r\n                return this.auth.signInWithEmailAndPassword(email, password);\r\n                } catch (error) {\r\n                console.error(error);\r\n                return null;\r\n                }\r\n        }\r\n\r\n        registration(email, password){\r\n                return this.auth.createUserWithEmailAndPassword(email, password)\r\n        }\r\n\r\n        signOut(){\r\n                return this.auth.signOut()\r\n        }\r\n\r\n        getCurrentUser() {\r\n                return this.auth.currentUser\r\n        }\r\n}\r\n\r\nlet firebaseInterface = new Firebase(firebaseConfig);\r\n\r\nexport default firebaseInterface;\r\n\r\nexport { auth, firestore };\r\n\r\n","import {EventEmitter} from 'events';\r\n\r\nconst stream = new EventEmitter();\r\nexport default stream;","import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nimport './errorPage.scss';\r\n\r\n\r\nclass ErrorPage extends React.Component {\r\n\r\n    state = {\r\n        redirect: false,\r\n    }\r\n\r\n    update = event => {\r\n       this.setState({redirect: true},\r\n        () => eventEmitter.emit('EventErrorCatchUpdate'));\r\n    }\r\n\r\n    render(){\r\n        if (this.state.redirect) return <Redirect to = '/' />\r\n        return (\r\n        <div class = 'container'>\r\n            <div class = 'flex-column'>\r\n                <h1>Application crash</h1>\r\n                <button className = 'button_updateApp' onClick = {this.update}>Update</button>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ErrorPage;","\r\nimport React from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport ErrorPage from './ErrorPage';\r\n\r\nclass ErrorBoundary extends React.PureComponent {\r\n\r\n      state = { \r\n        hasError: false,\r\n      };\r\n\r\n    static getDerivedStateFromError(error) {\r\n        console.log(error);\r\n      //    ,      UI.\r\n      return { hasError: true};\r\n    }\r\n\r\n    updateApplication = event => {\r\n      this.setState({hasError: false});\r\n    };\r\n  \r\n    componentDidCatch(error, info) {\r\n      //           \r\n     console.error(error + \",\" + info);\r\n    }\r\n  \r\n    render() {\r\n      if (this.state.hasError) return <ErrorPage />\r\n      return this.props.children;\r\n    }\r\n\r\n    componentDidMount = () => {\r\n      eventEmitter.on('EventErrorCatchUpdate',this.updateApplication);\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n      eventEmitter.off('EventErrorCatchUpdate',this.updateApplication);\r\n    }\r\n  }\r\n\r\n  export default ErrorBoundary;","const CREATE_PROJECT = 'CREATE_PROJECT';\r\nconst LOAD_UPDATE_PROJECT = \"LOAD_UPDATE_PROJECT\";\r\nconst LOAD_CURRENT = 'LOAD_CURRENT';\r\nconst LOG_OUT_CABINET = 'LOG_OUT_CABINET';\r\nconst LOAD_USER_CABINET = 'LOAD_USER_CABINET';\r\nconst ERROR_CABINET = 'ERROR_CABINET';\r\nconst EXIT_PROJECT = 'EXIT_PROJECT';\r\n\r\nconst createProjectAction = (state) => {\r\n    return {\r\n        type: CREATE_PROJECT,\r\n        projects: state,\r\n    }\r\n}\r\n\r\nconst exitProjectAction = (state) => {\r\n    return {\r\n        type: EXIT_PROJECT,\r\n        exit: state\r\n    }\r\n}\r\n\r\nconst loadCurrentProjectAction = (state) => {\r\n    return {\r\n        type: LOAD_CURRENT,\r\n        id: state.id,\r\n        typeProject: state.typeProject,\r\n        components: state.components\r\n    }\r\n}\r\nconsole.log('redux');\r\nconst loadUpdateCurrentProject = (state) => {\r\n    console.log(state);\r\n    return {\r\n        type: LOAD_UPDATE_PROJECT,\r\n        idProject: state.idProject,\r\n        components: state.components\r\n    }\r\n}\r\n\r\nconst loadUserAction = (state) => {\r\n    return {\r\n        type: LOAD_USER_CABINET,\r\n        active: true,\r\n        idUser: state.uid,\r\n        error: '',\r\n        projects: state.projects\r\n    }\r\n}\r\n\r\nconst logOutAction = (state) => {\r\n\r\n    return {\r\n        type: LOG_OUT_CABINET,\r\n        active: false,\r\n        idUser: null,\r\n        error: '',\r\n        projects: []\r\n    }\r\n}\r\n\r\nconst errorAction = (state) => {\r\n    return {\r\n        type: ERROR_CABINET,\r\n        error: state\r\n    }\r\n}\r\n\r\nexport {\r\n    CREATE_PROJECT, createProjectAction, /* cabinet */\r\n    LOAD_USER_CABINET, loadUserAction, /* cabinet */\r\n    LOG_OUT_CABINET, logOutAction, /* cabinet */\r\n    LOAD_CURRENT, loadCurrentProjectAction, /* builder */\r\n    LOAD_UPDATE_PROJECT, loadUpdateCurrentProject,\r\n    EXIT_PROJECT, exitProjectAction,\r\n    ERROR_CABINET, errorAction, /* both */\r\n}","import {LOAD_CURRENT,LOAD_UPDATE_PROJECT, EXIT_PROJECT} from './actions';\r\n\r\nconst initialState = {\r\n    loadProject: false,\r\n    idProject: null,\r\n    typeProject: null,\r\n    components: []\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n    switch (action.type){\r\n\r\n        case LOAD_CURRENT: {\r\n            return {\r\n                ...state,\r\n                loadProject: true,\r\n                idProject: action.id,\r\n                typeProject: action.typeProject,\r\n                components: [...action.components]\r\n            }\r\n        }\r\n\r\n        case LOAD_UPDATE_PROJECT: {\r\n            return {\r\n                ...state,\r\n                components: [...action.components],\r\n            }\r\n        }\r\n\r\n        case EXIT_PROJECT: {\r\n            if (action.exit)\r\n            return {\r\n                ...state,\r\n                loadProject: false,\r\n                idProject: null,\r\n                typeProject: null,\r\n                components: []\r\n            }\r\n            else return state;\r\n        }\r\n        default: return state;\r\n    }\r\n};","import {LOAD_USER_CABINET, LOG_OUT_CABINET, ERROR_CABINET, CREATE_PROJECT, LOAD_UPDATE_PROJECT} from './actions';\r\n\r\nconst initialState = {\r\n    active: false,\r\n    idUser: null,\r\n    projects: [],\r\n    error: null,\r\n    //dateConnect: new Date(Date.now()).toLocaleString().replace(/\\s/ig,'').split(','),\r\n};\r\nconsole.log('reduer');\r\nexport default (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case LOAD_USER_CABINET: {\r\n\r\n            return {\r\n                ...state,\r\n                active: action.active,\r\n                idUser: action.idUser,\r\n                projects: [...action.projects]\r\n            }\r\n        }\r\n\r\n        case CREATE_PROJECT: {\r\n            return {\r\n                ...state,\r\n                projects: [...action.projects]\r\n            }\r\n        }\r\n\r\n        case LOAD_UPDATE_PROJECT: {\r\n            return {\r\n                ...state,\r\n                projects: state.projects.map(item => {\r\n                    if (item.id === action.idProject)\r\n                        item.components = [...action.components]\r\n                return item;\r\n                })\r\n            }\r\n        }\r\n\r\n        case LOG_OUT_CABINET: {\r\n            return {\r\n                ...state,\r\n                active: false,\r\n                idUser: null,\r\n                projects: []\r\n            }\r\n        }\r\n\r\n        case ERROR_CABINET: {\r\n            return {\r\n                ...state,\r\n                error: action.error\r\n            }\r\n        }\r\n        default: return state;\r\n    }\r\n}\r\n\r\n","import {combineReducers} from 'redux';\r\nimport reducerBuilder from './reducerBuilder';\r\nimport reducerCabinet from './reducerCabinet';\r\n\r\nexport default combineReducers({\r\n    builder: reducerBuilder,\r\n    cabinet: reducerCabinet,\r\n});","import {createStore, applyMiddleware, compose} from 'redux';\r\nimport firebase from  '../Firebase/Firebase';\r\nimport reduxCatch from 'redux-catch';\r\nimport thunk from 'redux-thunk';\r\nimport combineReducers from './reducers';\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' &&\r\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n    }) : compose;\r\n\r\n    function errorHandler(error, getState, lastAction, dispatch) {\r\n      console.error(error);\r\n      console.debug('current state', getState());\r\n      console.debug('last action was', lastAction);\r\n      // optionally dispatch an action due to the error using the dispatch parameter\r\n    }\r\n\r\nconst middleware = composeEnhancers(\r\n  applyMiddleware(thunk.withExtraArgument({firebase})),\r\n  applyMiddleware(reduxCatch(errorHandler))\r\n);\r\nconst store = createStore(combineReducers, middleware);\r\n\r\n\r\nexport default store;","import {loadUserAction, errorAction, logOutAction} from '../actions';\r\n\r\nconst middlewareLogin = (email,password) => async (dispatch,getState, {firebase}) => {\r\n        await firebase.login(email,password)\r\n        .then(response =>{\r\n            firebase.db.collection(\"users\").doc(response.user.uid).get()\r\n            .then(docUser => {\r\n                let user = docUser.data();\r\n                dispatch(loadUserAction({uid: docUser.id, projects: [...user.projects]}))\r\n            })\r\n        })\r\n        .catch((error) => {\r\n            console.error(error.message);\r\n            dispatch(errorAction(error.message));\r\n        });\r\n    }\r\n\r\nconst middlewareLoadUserData = (uid) => async (dispatch,getState, {firebase}) => {\r\n        await firebase.db.collection(\"users\").doc(uid).get()\r\n        .then(docUser => {\r\n            let user = docUser.data();\r\n            dispatch(loadUserAction({uid: uid, projects: [...user.projects]}))\r\n        })\r\n        .catch((error) => {\r\n            console.error(error.message);\r\n            dispatch(errorAction(error.message));\r\n        });\r\n    }\r\n\r\nconst middlewareLogOutUser = (uid) => async (dispatch,getState, {firebase}) => {\r\n    await firebase.signOut()\r\n    .then (response => {\r\n        dispatch(logOutAction());\r\n    })\r\n    .catch((error) => {\r\n        console.error(error.message);\r\n        dispatch(errorAction(error.message));\r\n    });\r\n}\r\nexport {\r\n    middlewareLogin,middlewareLoadUserData, middlewareLogOutUser\r\n}","import React from 'react';\r\nimport firebase from '../Firebase/Firebase';\r\n\r\nconst withFirebase = Component => props => (\r\n    <Component firebase = {firebase} {...props} />\r\n);\r\n\r\nexport default withFirebase;","import React,{useState} from 'react';\r\n\r\nexport default function(props) {\r\n    const [path] = useState(props.path);\r\n    return (\r\n            <div className = 'loaderBox'>\r\n                <img className = 'loader' src = {path} alt = 'loader'></img> \r\n                <p>Loading {props.type}</p>\r\n            </div>\r\n    )\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport './registration.scss';\r\n\r\nimport withFirebase from '../../components/firebaseHOC';\r\n\r\n\r\nclass Registration extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        firebase: PropTypes.object.isRequired, /** @firebase class for use firebase functions */\r\n    }\r\n\r\n    state = {\r\n        firebase: this.props.firebase,\r\n        error: null,\r\n    }\r\n\r\n    emailRef = null;\r\n    passwordRef = null;\r\n\r\n    setRefEmail = (node) => this.emailRef = node;\r\n    setRefPassword = (node) => this.passwordRef = node;\r\n\r\n    createUser = event => {\r\n\r\n        const email = this.emailRef ? this.emailRef.value : null;\r\n        const password = this.passwordRef ? this.passwordRef.value : null;\r\n        const { firebase } = this.props;\r\n\r\n        if (password && email)\r\n        firebase.registration(email, password)\r\n        .then(response => {\r\n            if (!response) throw new Error('Ivaid registration')\r\n            firebase.db.collection(\"users\").doc(response.user.uid).set({\r\n                'projects': [],\r\n                'email': email,\r\n            }).then(() => eventEmitter.emit('EventRegistrationCorrect', response))\r\n        })\r\n        .catch((error) => {\r\n        console.error(error.message);\r\n        this.setState({error: error.message});\r\n        });\r\n        else  return this.setState({error: 'invalid user data'});\r\n    };\r\n\r\n    render(){\r\n        let  { error } = this.state;\r\n        return (\r\n            <div className = 'RegistrationBox'>\r\n                <div  className = 'RegistrationForm'>\r\n                    <h3>Registration</h3>\r\n                    <form autoComplete = 'off' className = 'RegForm'>\r\n                        { error ?\r\n                            <p className = 'error'>{error}</p>\r\n                            : null\r\n                        }\r\n                        <span>E-mail</span>\r\n                        <input ref = {this.setRefEmail} type = 'text' />\r\n                        <span>Password</span>\r\n                        <input className = 'password' autoComplete = \"off\" ref = {this.setRefPassword} type = 'password' />\r\n                        <input onClick = {this.createUser}\r\n                                className = 'loginButton'\r\n                                type = 'button'\r\n                                value = 'registration'\r\n                        />\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default withFirebase(Registration);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport {middlewareLogin} from '../../redux/middleware/loadUserMiddleware';\r\n\r\nimport Loader from '../../components/loading/Loader';\r\nimport Registration from '../../components/Registration/Registration';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './index.scss';\r\n\r\nclass Index extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        active: PropTypes.bool, /** @active - status firebase auth */\r\n        dispatch: PropTypes.func.isRequired, /** @dispatch - redux */\r\n        history: PropTypes.object.isRequired, /** @Router HTML5 history */\r\n        location: PropTypes.object.isRequired, /** @Router */\r\n        match: PropTypes.object.isRequired, /** @Router */\r\n        wrongEnter: PropTypes.string, /** @Error about invalid enter */\r\n        config: PropTypes.object, /** @config - app settings */\r\n    }\r\n\r\n    state = {\r\n        title:  \"Constructor\",\r\n        registrationActive: false,\r\n        regStatus: false,\r\n        wrongEnter: false,\r\n        error: ''\r\n    }\r\n\r\n    emailImput = null;\r\n    passwordImput = null;\r\n\r\n    statusRegistration = event => {\r\n        event.additionalUserInfo.isNewUser ?\r\n            this.setState({\r\n                ...this.state,\r\n                regStatus: true,\r\n                registrationActive: false,\r\n                error: 'Account create!'\r\n            })\r\n        : console.error('error registration');\r\n        event.stopPropagation();\r\n    }\r\n\r\n    showBox = event => {\r\n        this.setState ({\r\n            ...this.state,\r\n        registrationActive: this.state.registrationActive ? false : true\r\n        });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    authTo = event => {\r\n            if (this.emailImput && this.passwordImput)\r\n            this.props.dispatch(middlewareLogin(this.emailImput.value, this.passwordImput.value));\r\n            event.stopPropagation();\r\n    }\r\n\r\n    emailRef = node => this.emailImput = node;\r\n    passwordRef = node => this.passwordImput = node;\r\n\r\n    render(){\r\n\r\n        if (this.props.active) return <Redirect to = { '/Cabinet'} />\r\n        else if (!this.props.active) {\r\n            return (\r\n                <div className = 'LoginPage flex-column'>\r\n                        <h1>{this.state.title}</h1>\r\n                        <div className = 'LoginBox'>\r\n                            <div className = 'LoginForm'>\r\n                                <h3>Connect form</h3>\r\n                                {\r\n                                    this.props.wrongEnter || this.state.regStatus ?\r\n                                    <p className = 'error'>{this.props.wrongEnter}</p>\r\n                                    : null\r\n                                }\r\n                                <p>E-mail</p>\r\n                                <input ref = {this.emailRef} type = 'text' />\r\n                                <p>Password</p>\r\n                                <input ref = {this.passwordRef} type = 'password' />\r\n                                <input \r\n                                    onClick = {this.authTo} \r\n                                    className = 'loginButton enterInput'\r\n                                    type = 'button'\r\n                                    value = 'enter' />\r\n                                <input\r\n                                    onClick = {this.showBox}\r\n                                    className = {this.state.registrationActive ?\r\n                                        `loginButton registration selected` : 'loginButton registration'}\r\n                                    type = 'button'\r\n                                    value = 'registration'\r\n                                    />\r\n                            </div>\r\n                        </div>\r\n                        {\r\n                            this.state.registrationActive ?\r\n                            <Registration />\r\n                            : null\r\n                        }\r\n                </div>\r\n            )\r\n        } else  return <Loader path = '/img/loading.gif' type = 'session' />\r\n    }\r\n\r\n    componentDidMount = (e) => {\r\n        eventEmitter.on('EventRegistrationCorrect', this.statusRegistration);\r\n    }\r\n    componentWillUnmount = (e) => {\r\n        eventEmitter.off('EventRegistrationCorrect', this.statusRegistration);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        active: state.cabinet.active, \r\n        wrongEnter: state.cabinet.error\r\n    }\r\n  }\r\n\r\nexport default connect(mapStateToProps)(Index);","\r\nimport {errorAction, loadUserAction} from '../actions';\r\n\r\nconst middlewareDelete = item => async (dispatch,getState, {firebase}) => {\r\n    await firebase.db.collection('users').doc(item.uid).get()\r\n    .then(user => user.data())\r\n    .then(data => {\r\n        return {id: data.id, projects: data.projects.filter(itemdb => itemdb.id !== item.id)};\r\n    })\r\n    .then(data => {\r\n        firebase.db.collection(\"users\").doc(item.uid).update({\r\n            \"projects\": data.projects\r\n        })\r\n        .then(response => {\r\n            dispatch(loadUserAction({uid: data.id, projects: data.projects}));\r\n        });\r\n    })\r\n    .catch((error) => {\r\n        console.error(error.message);\r\n        dispatch(errorAction(error.message));\r\n    });\r\n}\r\n\r\nexport default middlewareDelete;\r\n","import React, {useState} from 'react';\r\n\r\n\r\nfunction Icon(props){\r\n    const [path] = useState(props.path);\r\n    const [className] = useState(props.className ? props.className : null);\r\n    const [draggable] = useState(props.draggable ? true : false);\r\n\r\n    return (\r\n    <img\r\n        draggable = {draggable}\r\n        onClick = {props.onClick ? props.onClick : null}\r\n        className = {className}\r\n        title = {props.title ? props.title : null}\r\n        src = {process.env.PUBLIC_URL + path } alt = 'icon'>\r\n    </img>\r\n    )\r\n}\r\n\r\nexport default Icon;","import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport './header.scss';\r\n\r\nimport {middlewareLogOutUser} from '../../redux/middleware/loadUserMiddleware';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\n\r\nimport eventEmitter from '../../EventEmitter.js';\r\nimport Icon from '../Icon/icon';\r\n\r\n\r\nconst iconPath = require('../../config.json').CabinetIcon;\r\n\r\nclass Header extends React.Component {\r\n\r\n    static propTypes = {\r\n        title: PropTypes.string.isRequired, /** @Config title app */\r\n        dispatch: PropTypes.func.isRequired, /** @dispatch redux */\r\n        history: PropTypes.object.isRequired, /** @Router HTML5 history */\r\n        location: PropTypes.object.isRequired, /** @Router */\r\n        match: PropTypes.object.isRequired, /** @Router */\r\n    };\r\n\r\n    state = {\r\n        title: this.props.title,\r\n        redirectAbout: {\r\n            path:  '/Cabinet/About',\r\n            redirectA: false,\r\n        },\r\n        redirectCabinet: {\r\n            path:  '/Cabinet',\r\n            redirectC: false,\r\n        }\r\n    };\r\n\r\n    logOut = event => {\r\n        if (this.props.idUser)\r\n            this.props.dispatch(middlewareLogOutUser(this.props.idUser));\r\n        event.stopPropagation();\r\n    };\r\n\r\n    redirectAbout = event => {\r\n        if (this.props.location.pathname !== this.state.redirectAbout.path)\r\n           this.setState({\r\n               redirectAbout: {\r\n                   ...this.state.redirectAbout,\r\n                   redirectA: true\r\n               }\r\n           });\r\n        event.stopPropagation()\r\n    };\r\n\r\n    redirectCabinet = event => {\r\n        if (this.props.location.pathname !== this.state.redirectCabinet.path)\r\n        this.setState({\r\n            redirectCabinet: {\r\n                ...this.state.redirectCabinet,\r\n                redirectC: true\r\n            }\r\n        });\r\n        event.stopPropagation()\r\n    }\r\n\r\n    add = (e) => {\r\n        eventEmitter.emit('EventChangeWorkMode',{action: 'newProject'});\r\n    };\r\n\r\n    render(){\r\n        let {redirectA} = this.state.redirectAbout;\r\n        let {redirectC} = this.state.redirectCabinet;\r\n\r\n        if (redirectA) return <Redirect to = {this.state.redirectAbout.path} />\r\n        if(redirectC) return <Redirect to = {this.state.redirectCabinet.path} />\r\n\r\n        return (\r\n            <header>\r\n                <div className = 'container'>\r\n                    <div className = 'flex-row'>\r\n                            <div onClick = {this.redirectCabinet} className = 'header__CabinetInfo'>\r\n                                <Icon className ='mainIcon' path = {iconPath} />\r\n                                <h3 className = 'tilteApp'>{this.state.title}</h3>\r\n                            </div>\r\n                            {this.props.location.pathname === '/Cabinet' ?\r\n                                <div onClick = {this.add} className = 'header__newProject__AddButton'>\r\n                                    <Icon className = 'Cabinet' path = '/img/plus.png' />\r\n                                </div>\r\n                                : null\r\n                            }\r\n                                <div  className = 'Navigator'>\r\n                                    <Icon className = 'about' onClick = {this.redirectAbout} title = 'about' path = '/img/about_logo.svg' />\r\n                                    <Icon className = 'logoutButton' onClick = {this.logOut} title = 'logOut' path = '/img/logOut.svg' />\r\n                                </div>\r\n                    </div>\r\n               </div>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect()(withRouter(Header));","import React, {useState} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nconst ImageItem = props => {\r\n\r\n    const [id] = useState(props.id);\r\n    const [urlRegular] = useState(props.urls.regular);\r\n    const [urlFull] = useState(props.urls.full);\r\n    const [isFull] = useState(props.isFull);\r\n\r\n    const showImageMenu = event => {\r\n       eventEmitter.emit(\"EventShowMenuImage\", {id: id, url: urlRegular, urlFull: urlFull});\r\n    }\r\n\r\n\r\n    return (\r\n        <div className = {props.selected ? 'ItemBox selected' : 'ItemBox'}>\r\n            <img\r\n                className = 'ImageItem'\r\n                onClick = {showImageMenu}\r\n                src = {isFull ? urlFull : urlRegular}\r\n                alt = 'item'\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageItem;","import React,{Fragment} from 'react';\r\nimport isFetch from 'isomorphic-fetch';\r\nimport PropTypes from 'prop-types';\r\nimport eventEmitter from '../../EventEmitter.js';\r\n\r\nimport ImageItem from '../imageViewer/imageItem';\r\nimport Icon from '../Icon/icon';\r\n\r\nimport './modal.scss';\r\n\r\nclass ModalWindow extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        workMode: PropTypes.string.isRequired, /** @Mode for modal */\r\n        idComponent: PropTypes.string || PropTypes.number /** @Id current user project */\r\n    }\r\n\r\n    state = {\r\n        workMode: this.props.workMode,\r\n        images: {\r\n            buttonSearchDisabled: false,\r\n            selectedItem: null, \r\n            showUrl: null, \r\n            images: null,\r\n            urlFull: null,\r\n            imageBoxView: false, \r\n            error: ''\r\n        },\r\n        newProject: {\r\n            validateName: false,\r\n            validateType: false,\r\n            disabled: true,\r\n            name: '',\r\n            type: 'empty'\r\n        },\r\n        imageMenuActive: false,\r\n        warning: {\r\n            lengthMax: 'Max length: 20 symbols',\r\n            lengthMin: 'Min length: 4 symbol',\r\n            type: 'Select type of webpage',\r\n        }\r\n    }\r\n\r\n    inputSearch = null;\r\n    inputSelect = null;\r\n\r\n    searchBackground = event => {\r\n        const mode = 'search/photos/?page=1&per_page=40&query=';\r\n        const api = `https://api.unsplash.com/${mode}`;\r\n        const search = this.inputSearch.value;\r\n\r\n        this.setState({...this.state, images: {...this.state.inages, buttonSearchDisabled: true}})\r\n\r\n        isFetch(`${api + search}&client_id=${process.env.REACT_APP_UNSPLASH_TOKEN}`)\r\n        .then(response => {\r\n            if (response.ok) return response.json();\r\n            else throw new Error('request invalid');\r\n        })\r\n        .then(response => {\r\n\r\n            let {results} = response;\r\n            if (results.length)\r\n            this.setState({\r\n                ...this.state,\r\n                images: {\r\n                    ...this.state.images,\r\n                    imageBoxView: true,\r\n                    error: '',\r\n                    images: [...results],\r\n                    buttonSearchDisabled: false\r\n                },\r\n            });\r\n            else throw new Error('Photos not found');\r\n        })\r\n        .catch(error => {\r\n            console.error(error.message);\r\n            this.setState({\r\n                ...this.state,\r\n                images: {...this.state.images, error: error.message},\r\n                imageBoxView: false,\r\n                buttonSearchDisabled: false\r\n            });\r\n        });\r\n    }\r\n\r\n    showMenuImage = event => {\r\n        this.setState({\r\n            ...this.state, \r\n            imageMenuActive: true,\r\n            images: {\r\n                ...this.state.images,\r\n                selectedItem: event.id, \r\n                showUrl: event.url,\r\n                urlFull: event.urlFull\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    showImage = event => {\r\n\r\n        const {showUrl} = this.state.images;\r\n        eventEmitter.emit(\"EventImageView\", {action: true, target: showUrl ? showUrl : null});\r\n        event.stopPropagation();\r\n    }\r\n\r\n    setSelectedImage = event => {\r\n\r\n        let images = {...this.state.images};\r\n        eventEmitter.emit(`EventSetBackgroundImage${this.props.idComponent}`,images);\r\n        eventEmitter.emit(`EventSetBImageInstumentPanel`,images);\r\n        event.stopPropagation();\r\n    };\r\n\r\n    makeImageResultBox = (items) => {\r\n        if (!items) return null;\r\n\r\n        return items.map((item,i) =>{\r\n           return <ImageItem \r\n                key = {`item${i}`} \r\n                id = {i}\r\n                selected = {this.state.images.selectedItem === i ? true : false} \r\n                isFull = {false}\r\n                urls = {{...item.urls}} \r\n            />\r\n        });\r\n    }\r\n\r\n    addNewProject = event => {\r\n        let mode = this.state[this.state.workMode];\r\n        if (mode.validateType &&  mode.validateName) {\r\n            eventEmitter.emit('EventAddProject',\r\n            {\r\n                title: this.state[this.state.workMode].name,\r\n                type: this.state[this.state.workMode].type\r\n            });\r\n\r\n            eventEmitter.emit('EventChangeWorkMode',{action: 'default'});\r\n        }\r\n    }\r\n\r\n    selectOption = event => {\r\n\r\n        let inputs = {...this.state[this.state.workMode]};\r\n        inputs.type = event.target.value;\r\n        inputs.validateType = inputs.type !== 'empty';\r\n        inputs.disabled = inputs.validateType && inputs.validateName ? false : true;\r\n        this.setState({\r\n            ...this.state,\r\n            [this.state.workMode]: inputs\r\n        });\r\n    }\r\n\r\n    validateName = event => {\r\n\r\n        let inputs = {...this.state[this.state.workMode]};\r\n        inputs.name = event.target.value;\r\n        let lengthInput = inputs.name.length;\r\n        inputs.validateName = lengthInput >= 4 && lengthInput < 20 ? true : false;\r\n        inputs.disabled = inputs.validateType && inputs.validateName ? false : true;\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            [this.state.workMode]: inputs\r\n        })\r\n    };\r\n\r\n    cancel = event => {\r\n\r\n        if (this.state.workMode === 'Search')\r\n            eventEmitter.emit(\"EventModalSearchOn\");\r\n        else  eventEmitter.emit('EventChangeWorkMode',{action: 'default'});\r\n    }\r\n\r\n    refSelect = (node) => this.inputSelect = node;\r\n    refSearch = node => this.inputSearch = node;\r\n\r\n    render(){\r\n        switch (this.state.workMode){\r\n            case 'newProject':\r\n                return (\r\n                    <div className = 'Modal'>\r\n                        <h3>Create new Project</h3>\r\n                        { this.state[this.state.workMode].name.length <= 3 ?\r\n                            <span className = 'warning'>{this.state.warning.lengthMin}</span> : null\r\n                        }\r\n                        { this.state[this.state.workMode].name.length >= 20 ?\r\n                            <span className = 'warning'>{this.state.warning.lengthMax}</span> : null\r\n                        }\r\n                        <input\r\n                            className = {this.state[this.state.workMode].validateName ? 'ready' : 'wrong'}\r\n                            value = {this.state[this.state.workMode].name}\r\n                            onChange = {this.validateName}\r\n                            type = 'text'\r\n                            placeholder = \"Project name\"\r\n                        />\r\n                        { !this.state[this.state.workMode].validateType ?\r\n                            <span className = 'warning'>{this.state.warning.type}</span> : null\r\n                        }\r\n                        <select onChange = {this.selectOption} >\r\n                            <option value = 'empty'>--------</option>\r\n                            <option value = 'landing'>Landing</option>\r\n                            <option value = 'portfolio'>Portfolio</option>\r\n                        </select>\r\n                        <input \r\n                            onClick = {this.addNewProject}\r\n                            className = 'acceptButton'\r\n                            disabled = {this.state[this.state.workMode].disabled}\r\n                            type = 'button'\r\n                            value = 'Submit'\r\n                        />\r\n                            <input onClick = {this.cancel} type ='button' value = 'Cancel' />\r\n                    </div>\r\n                )\r\n            case 'Search':\r\n                return (\r\n                    <Fragment>\r\n                        <div className = 'Modal Modal-search'>\r\n                            <h3>Search background image</h3>\r\n                            { this.state.images.error ?\r\n                                <span className = 'error'>{this.state.images.error}</span> : null\r\n                            }\r\n                            <input ref = {this.refSearch} type = 'text' placeholder = \"Photo name\" />\r\n                            <input \r\n                                disabled = {this.state.images.buttonSearchDisabled} \r\n                                className = 'acceptButton' \r\n                                type = 'button' \r\n                                value = 'Search'\r\n                                onClick = {this.searchBackground}\r\n                            />\r\n                            <input onClick = {this.cancel} type ='button' value = 'Cancel' />\r\n                            {\r\n                                this.state.images.imageBoxView ?\r\n                                <div className = 'searchResultBox'>\r\n                                    {this.makeImageResultBox([...this.state.images['images']])}\r\n                                </div>\r\n                                : null\r\n                            }\r\n                        </div>\r\n                        {  this.state.imageMenuActive ?\r\n                            <div className = 'ActionModalSearch'>\r\n                            <button onClick = {this.showImage} className = 'actionModalSearch__view'>\r\n                                <Icon path = '/img/view.png' />\r\n                            </button>\r\n                            <button onClick = {this.setSelectedImage} className = 'actionModalSearch__settings'>\r\n                                <Icon path = '/img/settings.png' />\r\n                            </button>\r\n                            </div>\r\n                            : null\r\n                        }\r\n                    </Fragment>\r\n                )\r\n            default: return <Fragment></Fragment>\r\n        }\r\n    }\r\n\r\n    componentDidMount = event => {\r\n        if (this.state.workMode === 'Search')\r\n            eventEmitter.on('EventShowMenuImage', this.showMenuImage);\r\n    }\r\n\r\n    componentWillUnmount = event => {\r\n        if (this.state.workMode === 'Search')\r\n            eventEmitter.off('EventShowMenuImage', this.showMenuImage);\r\n    }\r\n}\r\n\r\nexport default ModalWindow;\r\n\r\n","import {createProjectAction, errorAction} from '../actions';\r\n\r\n\r\nconst middlewareCreateProject = (uid, list, title, type) => async (dispatch,getState, {firebase}) => {\r\n    let lastProject = [...list];\r\n    const lastIndex = lastProject.length  ? lastProject[lastProject.length-1].id + 1 : 0;\r\n    lastProject.push({\"id\": lastIndex, \"title\": title, \"type\": type, components: []});\r\n\r\n    await firebase.db.collection(\"users\").doc(uid).update({\r\n        'projects': lastProject,\r\n    })\r\n    .then (() => dispatch(createProjectAction(lastProject)))\r\n    .catch(error => {\r\n        console.error(error.message);\r\n        dispatch(errorAction(error.message));\r\n    })\r\n};\r\n\r\nexport {\r\n    middlewareCreateProject\r\n}","import React, {useState} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport {withRouter, Redirect} from 'react-router-dom';\r\n\r\nfunction Item(props) {\r\n\r\n    const [path] = useState( `/Cabinet/Build/${props.id}`);\r\n\r\n    let [canBuild,setCanBuild] = useState(false);\r\n\r\n    const [id] = useState(props.id);\r\n    const [name] = useState(props.name);\r\n    const [type] = useState(props.type);\r\n\r\n\r\n    const build = event => {\r\n        if(props.location.pathname !== path)\r\n            setCanBuild(true);\r\n        event.stopPropagation();\r\n    };\r\n\r\n    const deleteItem = event => {\r\n        eventEmitter.emit('EventDeleteItem',{\r\n            id: props.id,\r\n            name: props.name,\r\n            type: props.type\r\n        });\r\n        event.stopPropagation();\r\n    };\r\n\r\n    const showProduction =event => {\r\n        event.stopPropagation();\r\n    }\r\n\r\n    if (canBuild) return <Redirect to = {path} />\r\n    else return (\r\n            <div className = 'item' data-id = {id}>\r\n                <p className = 'ProjectName'>{name}</p>\r\n                <p className = 'ProjectType'>{type}</p>\r\n                <div className = 'projectController'>\r\n                    <input \r\n                        onClick = {build} \r\n                        className = 'projectControllerButton_enter' \r\n                        type = 'button' \r\n                        value = 'enter build' />\r\n                    <input onClick = {deleteItem} \r\n                        className = 'projectControllerButton_delete' \r\n                        type = 'button' \r\n                        value = 'delete' />\r\n                </div>\r\n                <input onClick = {showProduction} \r\n                    className = 'productionButton' \r\n                    type = 'button' \r\n                    value = 'Show demo' />\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default withRouter(Item);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {middlewareCreateProject} from '../../redux/middleware/createProjectMiddleware';\r\n\r\nimport './list.scss';\r\n\r\nimport Item from './Item';\r\nimport eventEmitter from '../../EventEmitter.js';\r\n\r\nclass List extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        dispatch: PropTypes.func.isRequired, /** @dispatch redux */\r\n        idUser: PropTypes.string.isRequired, /** @UID current user */\r\n        list: PropTypes.array.isRequired, /** @List user projects */\r\n    }\r\n\r\n    state = {\r\n        redirect: false,\r\n    }\r\n\r\n    addNewProject = (item) => {\r\n        if (this.props.idUser) {\r\n            this.props.dispatch(middlewareCreateProject(this.props.idUser, this.props.list, item.title, item.type));\r\n        } else this.setState({...this.state, redirect: true});\r\n    }\r\n\r\n\r\n    makeList = (list) => {\r\n\r\n        return list.map (project => {\r\n\r\n            return(\r\n                <Item\r\n                    key = {project.id}\r\n                    id = {project.id}\r\n                    name = {project.title}\r\n                    type = {project.type}\r\n                />\r\n            )\r\n        });\r\n    }\r\n\r\n    render(){\r\n        if (this.state.redirect)\r\n            return <Redirect to = { '/'} />\r\n            else return (\r\n                    <div className = 'projectsList__list'>\r\n                        {this.makeList([...this.props.list])}\r\n                    </div>\r\n                )\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        eventEmitter.on('EventAddProject',this.addNewProject);\r\n    }\r\n\r\n      componentWillUnmount = () => {\r\n        eventEmitter.off('EventAddProject',this.addNewProject);\r\n      }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.cabinet.idUser,\r\n        list: [...state.cabinet.projects]\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(List);","import React from 'react';\r\n\r\nimport List from '../List/List.jsx';\r\n\r\nimport './ProjectsSection.scss';\r\n\r\nconst ProjectsSection = props => {\r\n\r\n        return (\r\n                <section className = 'projectsList'>\r\n                    <div className = 'container'>\r\n                        <div className = 'flex-column'>\r\n                            <div className = 'projectsList__about'>\r\n                                <h3>Your Projects</h3>\r\n                            </div>\r\n                            {List ? <List /> : null}\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n        )\r\n\r\n}\r\n\r\nexport default ProjectsSection;","import React,{Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport eventEmitter from '../../EventEmitter.js';\nimport {Redirect} from 'react-router-dom';\nimport withFirebase from '../../components/firebaseHOC';\n\nimport {middlewareLogOutUser} from '../../redux/middleware/loadUserMiddleware';\nimport middlewareDelete from '../../redux/middleware/middlewareDelete';\nimport Loader from '../../components/loading/Loader';\nimport {connect} from 'react-redux';\n\nimport Header from '../../components/header/Header';\nimport Modal from '../../components/modalWindow/ModalWindow';\nimport ProjectsSection from '../../components/ProjectsSection/ProjectsSection';\n\nimport './Cabinet.scss';\n\nconst title = require('../../config.json').title;\n\nclass Cabinet extends React.PureComponent {\n\n  static propTypes = {\n    firebase: PropTypes.object.isRequired, /** @firebase class for use firebase functions */\n    active: PropTypes.bool, /** @active - status firebase auth */\n    dispatch: PropTypes.func.isRequired, /** @dispatch - redux */\n    history: PropTypes.object.isRequired, /** @Router HTML5 history */\n    location: PropTypes.object.isRequired, /** @Router */\n    match: PropTypes.object.isRequired, /** @Router */\n    idUser: PropTypes.string, /** @Session user id from redux */\n    projects: PropTypes.arrayOf(PropTypes.object).isRequired /** @Projects array with user projects from redux */\n  }\n\n  state = {\n    workMode: 'default',\n  }\n\n  logOut = event => {\n    this.props.dispatch(middlewareLogOutUser(this.props.idUser));\n  }\n\n  deletItem = event => {\n    this.props.dispatch(middlewareDelete({...event, uid: this.props.firebase.getCurrentUser().uid}));\n  }\n\n  changeWorkMode = event => {\n    this.setState ({\n      ...this.state,\n      workMode: event.action,\n    });\n  }\n\n  render(){\n\n    if (this.props.active){\n      return (\n        <Fragment>\n          <Header title = {title} idUser = {this.props.idUser} />\n          {(this.state.workMode === 'newProject') ? <Modal workMode = {this.state.workMode} /> : null}\n            <ProjectsSection />\n        </Fragment>\n      )\n    } else if (!this.props.firebase.getCurrentUser()) return <Redirect to = { '/'} />\n    else return <Loader path = '/img/loading.gif' type = 'Cabinet' />\n  }\n\n\n  componentDidMount = () => {\n    eventEmitter.on('EventDeleteItem', this.deletItem);\n    eventEmitter.on('EventChangeWorkMode', this.changeWorkMode);\n  }\n\n  componentWillUnmount = () => {\n    eventEmitter.off('EventDeleteItem', this.deletItem);\n    eventEmitter.off('EventChangeWorkMode', this.changeWorkMode);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    idUser: state.cabinet.idUser,\n    projects: [...state.cabinet.projects],\n    active: state.cabinet.active\n  }\n}\n\nexport default connect(mapStateToProps)(withFirebase(Cabinet));\n","import React, {Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport withFirebase from '../../components/firebaseHOC';\r\nimport Header from '../../components/header/Header';\r\n\r\nimport './about.scss';\r\n\r\nclass About extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        config: PropTypes.object.isRequired, /** @Config app */\r\n        firebase: PropTypes.object.isRequired, /** @firebase class for use firebase functions */\r\n        history: PropTypes.object, /** @Router HTML5 history */\r\n        location: PropTypes.object, /** @Router */\r\n        match: PropTypes.object, /** @Router */\r\n    }\r\n\r\n    state = {\r\n        config: this.props.config\r\n    };\r\n\r\n    render(){\r\n        if (this.props.firebase.getCurrentUser()) {\r\n            const { config } = this.state;\r\n            return (\r\n                <Fragment>\r\n                    <Header title = {config.title} />\r\n                    <section className = 'About'>\r\n                        <div className = 'container'>\r\n                            <div className = 'col-12'>\r\n                                <div className = 'information'>\r\n                                <img alt = 'img' className = 'logoAbout' src = {process.env.PUBLIC_URL + '/img/about.jpg'}/>\r\n                                    <p className ='developer'><span>Developer:</span> {config.about.developer}</p>\r\n                                    <p className = 'year'><span>Year:</span> {config.about.year}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n                </Fragment>\r\n            )\r\n        } else return <Redirect to = { '/'} />\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default withFirebase(About);","import {errorAction, loadUpdateCurrentProject} from '../actions';\r\n\r\nconst updateMiddleware = (item) => async (dispatch,getState, {firebase}) => {\r\n    console.log('updatae');\r\n    let newProjects = item.projects.map(project => {\r\n        if (project.id === item.idProject) { project.components = [...item.components] }\r\n        return project;\r\n    });\r\n    await firebase.db.collection(\"users\").doc(item.uid).update({\r\n        'projects': JSON.parse(JSON.stringify(newProjects))\r\n    })\r\n    .then(response => {\r\n        let project = item.projects.find(itemdb => itemdb.id === item.idProject);\r\n        dispatch(loadUpdateCurrentProject({components: [...project.components], idProject: item.idProject}))\r\n    })\r\n    .catch(error => dispatch(errorAction(error.message)));\r\n};\r\n\r\nexport default updateMiddleware;","\r\nimport React, {useEffect, useState} from 'react';\r\nimport eventEmitter from '../../../EventEmitter';\r\nimport styled from 'styled-components';\r\n\r\n\r\nconst Title = styled.h1.attrs(props => ({\r\n    style: {\r\n        display: props.shadowDisplay ? 'none' : 'block',\r\n        left: props.coordX ? props.coordX : '50%',\r\n        top:  props.coordY,\r\n}}))`\r\n    position: absolute;\r\n    transform: translate(-50%);\r\n    font-size: ${props => props.size};\r\n    color: ${props => props.textColor};\r\n    text-align: center;\r\n    margin: 0;\r\n`;\r\n\r\n// left: ${props => props.coordX ? props.coordX : '50%'};\r\n// top:  ${props => props.coordY};\r\n\r\nconst TextComponent = props =>  {\r\n    const [id] = useState(props.id);\r\n    const [sizeParenBox] = useState({...props.sizeParenBox});\r\n\r\n    let [colorText, setColorText] = useState(props.color);\r\n    let [sizeText, setSizeText] = useState(props.size ? props.size : 120);\r\n    let [contentText, setText] = useState(props.content ? props.content : props.children);\r\n    const [shiftCoords, setShiftCoords] = useState(null)\r\n    const [dragNdrop, setDragNdrop] = useState(props.coords.left ? {x: props.coords.left, y: props.coords.top} : null);\r\n\r\n    const openTitleInstruments = event => {\r\n\r\n        eventEmitter.emit(`EventInstrumentPanel`,{\r\n            target: 'text',\r\n            id: id,\r\n            sizeTextValue: sizeText\r\n        });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const changeColorText = color => {\r\n        setColorText(color);\r\n    }\r\n\r\n    const changeSizeText = eventSize => {\r\n        const {size} = eventSize;\r\n        setSizeText(size);\r\n    }\r\n\r\n    const changeContentText = eventContent => {\r\n        const {content} = eventContent;\r\n        setText(content);\r\n    }\r\n\r\n\r\n    const didUpdate = event => {\r\n        eventEmitter.on(`EventChangeColorText${id}`, changeColorText);\r\n        eventEmitter.on(`EventChangeSizeText${id}`, changeSizeText);\r\n        eventEmitter.on(`EventChangeContentText${id}`, changeContentText);\r\n        return () => {\r\n            eventEmitter.off(`EventChangeColorText${id}`, changeColorText);\r\n            eventEmitter.off(`EventChangeSizeText${id}`, changeSizeText);\r\n            eventEmitter.off(`EventChangeContentText${id}`, changeContentText);\r\n        }\r\n    }\r\n\r\n    const saveCoords = event => {\r\n\r\n        let rect = event.target.getBoundingClientRect();\r\n        let left = rect.left;\r\n        let top = rect.top;\r\n        let width = rect.width;\r\n        let height = rect.height;\r\n        setShiftCoords({x: event.pageX - left - width/2, y: event.pageY - top + height/2.8});\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const moveText = event => {\r\n        let coordX = event.pageX - shiftCoords.x;\r\n        let coordY = event.pageY - shiftCoords.y;\r\n\r\n        coordX = coordX <= 130 ? 130 : coordX;\r\n        coordY = coordY <= 0 ? 0 : coordY;\r\n\r\n        let convertToPercentX = (coordX * 100) / sizeParenBox.width;\r\n        let convertToPercentY = (coordY * 100) / sizeParenBox.height;\r\n\r\n        const position = {\r\n            x: convertToPercentX.toFixed(1) + '%', \r\n            y: convertToPercentY.toFixed(1) + '%', \r\n            shadowDisplay: event.type === 'drag' ? true : false\r\n        };\r\n        setDragNdrop(position);\r\n        if (event.type === 'dragend') {\r\n            eventEmitter.emit('EventUpdatePosition', position);\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const weelResizeText = event => {\r\n\r\n        if (event.shiftKey && event.deltaY === -100) {\r\n            let counter = sizeText + 1;\r\n            counter = counter > 200 ? 200 : counter;\r\n            setSizeText(counter);\r\n            eventEmitter.emit('EventUpdateSizeText', counter);\r\n        }\r\n\r\n        if (event.shiftKey && event.deltaY === 100) {\r\n            let counter = sizeText - 1;\r\n             counter = counter <= 10 ? 10 : counter;\r\n             setSizeText(counter);\r\n             eventEmitter.emit('EventUpdateSizeText', counter);\r\n            }\r\n        event.stopPropagation();\r\n    }\r\n    useEffect(didUpdate);\r\n\r\n    return (\r\n        <Title\r\n            onClick={openTitleInstruments}\r\n            textColor = {colorText ? colorText : 'red'}\r\n            size = {sizeText ? sizeText + 'px' : '120px'}\r\n            draggable = {true}\r\n            onMouseDown = {saveCoords}\r\n            onDragStart = {openTitleInstruments}\r\n            onDrag   = {moveText}\r\n            onDragEnd = {moveText}\r\n            onWheel = {weelResizeText}\r\n            coordX = {dragNdrop ? dragNdrop.x : null}\r\n            coordY = {dragNdrop ? dragNdrop.y : null}\r\n            shadowDisplay = {dragNdrop ? dragNdrop.shadowDisplay : false}\r\n        >\r\n            {contentText}\r\n        </Title>\r\n    )\r\n}\r\n\r\nexport default TextComponent;","import React, {useEffect, useState} from 'react';\r\nimport eventEmitter from '../../../EventEmitter';\r\nimport styled from 'styled-components';\r\n\r\n\r\nconst Background = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 95vh;\r\n    background-size: cover;\r\n    background-color: ${props => props.backgroundColor};\r\n    background-image: url(${props => props.backgroundImage});\r\n`;\r\n\r\nconst BackgroundComponent = props => {\r\n\r\n    console.log('BG');\r\n    const [id] = useState(props.id);\r\n\r\n    const [count, setCount] = useState(0);\r\n    let boxComponent = React.createRef();\r\n\r\n    let [backgroundColor, setBgColor] = useState(props.background);\r\n    let [backgroundImage, setImage] = useState(props.backgroundImage ? props.backgroundImage : null);\r\n\r\n    const saveWidth = event => {\r\n        setCount(count + 1);\r\n        boxComponent.current.focus();\r\n        let boxInform =  boxComponent.current.getBoundingClientRect();\r\n        eventEmitter.emit('EventSaveWidth', {width: boxInform.width, height: boxInform.height});\r\n    }\r\n\r\n    const openBgInstruments = event => {\r\n        eventEmitter.emit('EventInstrumentPanel',{\r\n            target: 'background',\r\n            id: id,\r\n        });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const changeColor = color => {\r\n        setBgColor(color);\r\n    }\r\n\r\n    const setBackgroundImage = event => {\r\n        const {urlFull} = event;\r\n        setImage(urlFull);\r\n    };\r\n\r\n    const didUpdate = () => {\r\n        if (count === 0 ) saveWidth();\r\n        eventEmitter.on(`EventChangeColorBackground${id}`, changeColor);\r\n        eventEmitter.on(`EventSetBackgroundImage${id}`, setBackgroundImage);\r\n        return () => {\r\n            eventEmitter.off(`EventChangeColorBackground${id}`, changeColor);\r\n            eventEmitter.off(`EventSetBackgroundImage${id}`, setBackgroundImage);\r\n        }\r\n    }\r\n\r\n    useEffect(didUpdate);\r\n    return (\r\n        <Background\r\n            ref  = {boxComponent}\r\n            onClick={openBgInstruments}\r\n            backgroundColor = {backgroundColor ? backgroundColor : props.background}\r\n            backgroundImage = {backgroundImage ? backgroundImage : props.backgroundImage}\r\n        >\r\n            {props.children}\r\n        </Background>\r\n    )\r\n}\r\n\r\nexport default BackgroundComponent;","import React,{useState} from 'react';\r\n\r\n\r\nimport TextComponent from '../buildComponents/components/Text';\r\nimport BackgroundComponent from '../buildComponents/components/Background';\r\n\r\nconst BuilderComponents = props => {\r\n\r\n    console.log('builder');\r\n    const [target] = useState(props.target);\r\n    let [id] = useState(props.id);\r\n    let [size] = useState(props.size);\r\n    let [color] = useState(props.color ? props.color : 'red');\r\n    let [content] = useState(props.content ? props.content : null);\r\n    let [type] = useState(props.type);\r\n\r\n    if (type === 'text'){\r\n        return <TextComponent\r\n                    sizeParenBox = {{...props.sizeParenBox}}\r\n                    id = {id}\r\n                    size = {size}\r\n                    color = {color}\r\n                    coords = {{...props.coords}}\r\n                    key = {`text${id}`}\r\n                    target = {target}\r\n                >\r\n                    {content}\r\n                </TextComponent>\r\n    }\r\n\r\n    if (type === 'background'){\r\n        return <BackgroundComponent \r\n                target = {target}\r\n                color = {color}\r\n                size = {size}\r\n                id = {id} \r\n                key = {`bg${id}`}/>;\r\n    }\r\n};\r\n\r\nexport default BuilderComponents;","import React,{useState} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nimport './imageViewer.scss';\r\n\r\nfunction ImageViewer(props){\r\n\r\n    let [path] = useState(props.path);\r\n\r\n    const closeViewer = event => {\r\n        eventEmitter.emit(\"EventImageView\", { action: false, target: null});\r\n        event.stopPropagation();\r\n    }\r\n\r\n    return (\r\n        <div onClick = {closeViewer} className = 'ImageViewer'>\r\n            <img src = {path} alt = 'fullImage' />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageViewer;","import React, {Fragment} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport PropTypes from 'prop-types';\r\nimport { SketchPicker } from 'react-color';\r\nimport './instrumentsPanel.scss';\r\n\r\nimport Icon from '../Icon/icon';\r\n\r\nclass InstrumentsPanel extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        instrumentPanel:  PropTypes.object.isRequired, /** @Settings for panel and data about component */\r\n        editComponentName: PropTypes.string.isRequired /** @Name editable component */\r\n    };\r\n\r\n    state = {\r\n        instrumentPanel: {...this.props.instrumentPanel},\r\n        componentsStats: this.props.mainBuilderData.components.find(item =>\r\n                    {return item.id === this.props.instrumentPanel.idComponent }),\r\n        images: null,\r\n    };\r\n\r\n    updateSizeText = eventSize => {\r\n        this.setState({\r\n            ...this.state, \r\n            instrumentPanel: {...this.state.instrumentPanel},\r\n            componentsStats: {...this.state.componentsStats, fontSize: eventSize}\r\n        });\r\n    };\r\n\r\n    closePanel = event => {\r\n        eventEmitter.emit('EventClosePanel', {close: false});\r\n    };\r\n\r\n    setSize = event => {\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        let size = event.target.value > 200 ? 200 : event.target.value;\r\n        this.setState({\r\n            ...this.state, \r\n            instrumentPanel: {...this.state.instrumentPanel},\r\n            componentsStats: {...this.state.componentsStats,fontSize: size}\r\n        },\r\n            () => eventEmitter.emit(`EventChangeSizeText${idComponent}`, {size: size })\r\n        );\r\n\r\n        event.stopPropagation();\r\n    };\r\n\r\n    setContent = event => {\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        let contentValue = event.target.value;\r\n        this.setState({\r\n            ...this.state, \r\n            instrumentPanel: {...this.state.instrumentPanel},\r\n            componentsStats: {...this.state.componentsStats,content: contentValue}\r\n        },\r\n        () => eventEmitter.emit(`EventChangeContentText${idComponent}`,{content: contentValue}));\r\n        event.stopPropagation();\r\n    };\r\n\r\n    updatePosition = eventItem => {\r\n        this.setState({\r\n            ...this.state, \r\n            componentsStats: {\r\n                ...this.state.componentsStats,\r\n                coords: {\r\n                    ...this.state.componentsStats.coords,\r\n                    left: eventItem.x,\r\n                    top: eventItem.y\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    setColor = event => {\r\n        this.setState({...this.state,\r\n            instrumentPanel:{\r\n                ...this.state.instrumentPanel,\r\n                colorPickerActive: this.state.instrumentPanel.colorPickerActive ? false : true\r\n            }\r\n        });\r\n        event.stopPropagation();\r\n    };\r\n\r\n    updateBimageStats = eventItem => {\r\n        const {urlFull} = eventItem;\r\n        this.setState({\r\n            ...this.state,\r\n            componentsStats:{\r\n                ...this.state.componentsStats,\r\n                backgroundImage: urlFull\r\n            }\r\n        });\r\n    };\r\n\r\n    handleChangeComplete = event => {\r\n\r\n        const {rgb} = event;\r\n        let colorRGB = `rgb(${rgb.r},${rgb.g},${rgb.b},${rgb.a})`;\r\n\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        if (this.state.instrumentPanel.target === 'background'){\r\n            this.setState({\r\n                ...this.state,\r\n                componentsStats: {...this.state.componentsStats,color: colorRGB}\r\n            }, () => eventEmitter.emit(`EventChangeColorBackground${idComponent}`, colorRGB));\r\n        }\r\n\r\n        else if (this.state.instrumentPanel.target === 'text') {\r\n            this.setState({\r\n                ...this.state,\r\n                componentsStats: {...this.state.componentsStats,color: colorRGB}\r\n            },\r\n            () => eventEmitter.emit(`EventChangeColorText${idComponent}`, colorRGB));\r\n        }\r\n\r\n    };\r\n\r\n    saveChanges = event => {\r\n        eventEmitter.emit(\"EventSaveChangesComponent\", {\r\n            ...this.state.componentsStats,\r\n            id: this.state.instrumentPanel.idComponent,\r\n            type: this.state.instrumentPanel.target\r\n        });\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    searchImage = event => {\r\n\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        eventEmitter.emit('EventModalSearchOn', {idComponent: idComponent});\r\n\r\n        event.stopPropagation();\r\n    };\r\n\r\n    makePanelInstruments = (type) => {\r\n\r\n        let {colorPickerActive} = this.state.instrumentPanel;\r\n            switch (type){\r\n                case 'text':\r\n                    let {content} = this.state.componentsStats;\r\n                    let {fontSize} = this.state.componentsStats;\r\n                    let {coords} = this.state.componentsStats;\r\n                    return (\r\n                        <Fragment>\r\n                        <p className = 'titleInstument'>Position: </p>\r\n                        <span className = 'textCoordsPanel'>\r\n                        {coords.left ?\r\n                            coords.left + ' / ' + coords.top : ' drop for active'}\r\n                        </span>\r\n                        <p className = 'titleInstument'>Color: </p>\r\n                        <input onClick = {this.setColor} className = 'button_switchColor' type = 'button' value = 'color pick' />\r\n                        <p className = 'titleInstument'>Text size: </p>\r\n                        <input \r\n                            onChange = {this.setSize} \r\n                            type=\"number\"\r\n                            min = '10' max = '200'\r\n                            value = {fontSize ? fontSize : 120 }\r\n                        />\r\n                            { colorPickerActive ?\r\n                                <SketchPicker\r\n                                onChangeComplete={this.handleChangeComplete}\r\n                                />\r\n                                : null\r\n                            }\r\n                        <p className = 'titleInstument'>Content: </p>\r\n                        <input onChange = {this.setContent} maxLength = '20' type = 'text' defaultValue = {content} />\r\n                        <input onClick = {this.saveChanges} className = 'saveButtonInstument' type = 'button' value = 'save changes' />\r\n                        </Fragment>\r\n                )\r\n                case 'background': \r\n                    return (\r\n                        <Fragment>\r\n                        <p className = 'titleInstument'>Color: </p>\r\n                        <input onClick = {this.setColor} className = 'button_switchColor' type = 'button' value = 'color pick' />\r\n                            { colorPickerActive ?\r\n                                <SketchPicker\r\n                                onChangeComplete={this.handleChangeComplete}\r\n                                />\r\n                                : null\r\n                            }\r\n                            <input onClick = {this.searchImage} className = 'ImageSearchButton' type = 'button' value = 'background-image' />\r\n                            <input onClick = {this.saveChanges} className = 'saveButtonInstument' type = 'button' value = 'save changes' />\r\n                        </Fragment>\r\n                    )\r\n                default: return <p className = 'warningInstruments'>Select elements for accses edit instruments</p>\r\n            }\r\n    };\r\n\r\n    componentDidUpdate = (oldProps, oldState) => {\r\n        let targetBool = oldState.instrumentPanel.target !== this.props.instrumentPanel.target;\r\n        let idBool = oldState.instrumentPanel.idComponent !== this.props.instrumentPanel.idComponent;\r\n        if (idBool || targetBool)\r\n            this.setState({\r\n                ...this.state,\r\n                instrumentPanel: {...this.props.instrumentPanel, colorPickerActive: false},\r\n                componentsStats: this.props.mainBuilderData.components.find(item =>\r\n                    {return item.id === this.props.instrumentPanel.idComponent }),\r\n            })\r\n    };\r\n\r\n    componentDidMount = event => {\r\n        eventEmitter.on(\"EventUpdateSizeText\", this.updateSizeText);\r\n        eventEmitter.on(\"EventSetBImageInstumentPanel\", this.updateBimageStats);\r\n        eventEmitter.on(\"EventUpdatePosition\", this.updatePosition);\r\n    };\r\n\r\n    componentWillUnmount = event => {\r\n        eventEmitter.off(\"EventUpdateSizeText\", this.updateSizeText);\r\n        eventEmitter.off(\"EventUpdatePosition\", this.updatePosition);\r\n    };\r\n\r\n    render(){\r\n        let { instrumentActive } = this.state.instrumentPanel;\r\n        console.log(this.props);\r\n        console.log(this.state);\r\n        return (\r\n            <Fragment>\r\n                <div  className = 'instumentsPanel'>\r\n                <button onClick = {this.closePanel} className = 'closeInstrumentsPanel'><Icon path = '/img/close.svg' /></button>\r\n                    <h3>Instruments</h3>\r\n                    {\r\n                        instrumentActive ? \r\n                        <p className = 'TextComponent'>{this.state.instrumentPanel.target}</p>\r\n                        : null\r\n                    }\r\n                    {\r\n                        instrumentActive ?\r\n                        <div  className= 'instuments'>{this.makePanelInstruments(this.state.instrumentPanel.target)}</div>\r\n                        : null\r\n                    }\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    };\r\n};\r\n\r\nexport default InstrumentsPanel;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport BuilderComponents from '../componentsBuilder/BuilderComponents';\r\n\r\nimport eventEmitter from '../../EventEmitter';\r\nimport './buildMenu.scss';\r\n\r\nclass BuildMenu extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        components: PropTypes.object.isRequired, /** @Object with components data */\r\n        countComponents: PropTypes.number.isRequired, /** @Number last project */\r\n        sizeParenBox: PropTypes.object.isRequired /** @Object with width and height parent(bg) */\r\n    }\r\n\r\n    state = {\r\n        editComponentName: this.props.editComponentName,\r\n        componentsPatternStatus: {\r\n            id: null,\r\n            name: null,\r\n            type: null,\r\n            content: null,\r\n            fontSize: null,\r\n            color: null,\r\n            backgroundImage: null,\r\n            image: null,\r\n            coords: {left: null, top: null}, // x, y\r\n        },\r\n        sizeParenBox: {...this.props.sizeParenBox},\r\n        title: 'Title'\r\n    }\r\n\r\n    addText = event => {\r\n        console.log('add');\r\n        let id = this.props.countComponents;\r\n        eventEmitter.emit('EventBuildComponents',{\r\n            componentsPatternStatus: {\r\n                ...this.state.componentsPatternStatus,\r\n                id: id,\r\n                name: this.state.editComponentName,\r\n                type: 'text',\r\n            },\r\n            component: <BuilderComponents\r\n                            target = {this.state.editComponentName}\r\n                            key = {`text${id}`}\r\n                            sizeParenBox = {this.props.sizeParenBox}\r\n                            content = \"Title\"\r\n                            id = {id}\r\n                            type = 'text' />\r\n        });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    addBackground = event => {\r\n        let id = this.props.countComponents;\r\n        eventEmitter.emit('EventBuildComponents',{\r\n            componentsPatternStatus: {\r\n                ...this.state.componentsPatternStatus,\r\n                name: this.state.editComponentName,\r\n                type: 'background',\r\n            },\r\n            component: <BuilderComponents\r\n                            target = {this.state.editComponentName}\r\n                            key = {`bg${id}`}\r\n                            id = {id}\r\n                            type = 'background' />\r\n        });\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className = 'ComponentsMenu'>\r\n                <button onClick = {this.addBackground} className = 'ImageTool CompoentnsMenu_button' ><span>Image</span></button>\r\n                <button onClick = {this.addText} className = 'TextTool CompoentnsMenu_button' ><span>Text</span></button>\r\n                <button \r\n                    disabled = {this.state.editComponentName !== 'Header' ? false : true}\r\n                    className = 'ButtonTool CompoentnsMenu_button' >\r\n                    <span>Button</span>\r\n                </button>\r\n                <button className = 'VideoTool CompoentnsMenu_button' ><span>Video</span></button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BuildMenu;","import React,{Fragment} from 'react';\r\nimport styled from 'styled-components';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Icon from '../Icon/icon';\r\nimport BuildMenu from '../componentsBuildMenu/BuildMenu';\r\n\r\n\r\nconst ControllersBox = styled.div\r\n    .attrs(props =>({\r\n        style: {\r\n                left: props.coordX,\r\n                top: props.coordY,\r\n        }\r\n    })) `\r\n    position: absolute;\r\n    display: ${props => props.shadowDisplay}\r\n    `;\r\n\r\nclass Controllers extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        countComponents: PropTypes.number.isRequired, /** @number last project id */\r\n        sizeParenBox: PropTypes.object, /** @Object with width and height parent(bg) */\r\n        components: PropTypes.object.isRequired, /** @Object with componnents data */\r\n        menuActive: PropTypes.bool, /** @Bool value active menu or unactive */\r\n    }\r\n\r\n    state = {\r\n        viewComponentMenu: false,\r\n        shiftX: 0,\r\n        shiftY: 0,\r\n        coordsX: '50%',\r\n        coordsY: '0',\r\n        shadowDisplay: 'block'\r\n    }\r\n\r\n    componentMenu = event => {\r\n        this.setState({viewComponentMenu: this.state.viewComponentMenu ? false : true});\r\n        event.stopPropagation();\r\n    }\r\n\r\n    saveCoords = event => {\r\n        let left = this.controlBox.getBoundingClientRect().left;\r\n        let top = this.controlBox.getBoundingClientRect().top;\r\n        this.setState({...this.state, shiftX: event.pageX - left, \r\n        shiftY: event.pageY - top + 55 });\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    drag = event => {\r\n        if (!this.state.viewComponentMenu)\r\n            this.setState({\r\n                ...this.state,\r\n                coordsX: event.pageX - this.state.shiftX + 'px', \r\n                coordsY: event.pageY - this.state.shiftY + 'px',\r\n                shadowDisplay: event.type === 'drag' ? 'none' : 'block'\r\n            });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    controlBox = null;\r\n    refControll = (node) => this.controlBox = node;\r\n\r\n\r\n    render(){\r\n        return (\r\n            <Fragment>\r\n            { this.props.menuActive ?\r\n                <ControllersBox\r\n                ref = {this.refControll}\r\n                className = 'ControllersEditComponent'\r\n                coordX = {this.state.coordsX}\r\n                coordY = {this.state.coordsY}\r\n                draggable = {!this.state.viewComponentMenu}\r\n                onMouseDown = {this.saveCoords}\r\n                onClick = {this.componentMenu}\r\n                onDrag   = {this.drag}\r\n                onDragEnd = {this.drag}\r\n                shadowDisplay = {this.state.shadowDisplay}\r\n                >\r\n                    <Icon\r\n                        draggable = {true}\r\n                        onClick = {this.componentMenu}\r\n                        className = 'addButton'\r\n                        path = '/img/addButton.png'\r\n                    />\r\n                    {this.state.viewComponentMenu ? \r\n                        <BuildMenu\r\n                            editComponentName = {this.props.editComponentName}\r\n                            sizeParenBox = {this.props.sizeParenBox}\r\n                            countComponents = {this.props.countComponents}\r\n                            components = {{...this.props.components}}\r\n                        /> : null\r\n                    }\r\n                </ControllersBox>\r\n                : null\r\n            }\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Controllers;","import React, {Fragment} from 'react';\r\nimport eventEmitter from '../../../EventEmitter';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nimport BackgroundComponent from '../../buildComponents/components/Background';\r\nimport Controllers from '../../controllers/controllers';\r\nimport './headerBuild.scss';\r\n\r\nclass HeaderBuild extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        children: PropTypes.object.isRequired, /** @Object with name */\r\n        countComponents: PropTypes.number.isRequired, /** @Number last project */\r\n        editStart: PropTypes.bool.isRequired, /** @Bool start edit mode */\r\n        menuActive: PropTypes.bool.isRequired, /** @Bool active menu or unactive */\r\n        id: PropTypes.number.isRequired, /** @id current project */\r\n    }\r\n\r\n    state = {\r\n        idProject: this.props.id,\r\n        components: {...this.props.children},\r\n    }\r\n\r\n    changeMode = event => {\r\n        console.log(event);\r\n        if (!this.props.editStart) {\r\n            let rect = event.currentTarget.getBoundingClientRect();\r\n            const width = rect.width;\r\n            const height = rect.height;\r\n            eventEmitter.emit('EventModeEdit', {\r\n                ...this.state,\r\n                target: 'Header',\r\n                width: width,\r\n                height: height\r\n            });\r\n        }\r\n    }\r\n\r\n    refBox = null;\r\n    refBackground = node => this.refBox = node;\r\n\r\n    render() {\r\n        let bg = this.props.mainBuilderData.components.find(item => item.id === \"MainBackgroundHeader\");\r\n        if (bg === undefined) bg = {};\r\n        return (\r\n            <Fragment>\r\n                <div onClick = {this.changeMode} className = 'Header'>\r\n                    <BackgroundComponent id = 'MainBackgroundHeader' {...bg}>\r\n                    {  this.props.mainBuilderData.componentJSX ?\r\n                            this.props.mainBuilderData.componentJSX : null\r\n                    }\r\n                    </BackgroundComponent>\r\n                    {!this.props.editStart ? <p className = 'warningEdit'>Click for start edit</p> : null}\r\n                    {!this.state.readyBuild ? \r\n                        <Controllers\r\n                            editComponentName = {this.props.editComponentName}\r\n                            countComponents = {this.props.countComponents}\r\n                            menuActive = {this.props.menuActive}\r\n                            components = {{...this.state.components}}\r\n                            sizeParenBox = {this.props.sizeParenBox}\r\n\r\n                        />\r\n                        : null}\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\nexport default HeaderBuild;","import React,{Fragment} from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router-dom';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nimport {loadCurrentProjectAction, exitProjectAction} from '../../redux/actions';\r\nimport updateMiddleware from '../../redux/middleware/updateMiddleware';\r\nimport withFirebase from '../../components/firebaseHOC';\r\nimport {connect} from 'react-redux';\r\n\r\nimport BuilderComponents from '../../components/componentsBuilder/BuilderComponents';\r\n\r\nimport ImageViewer from '../../components/imageViewer/imageViewer';\r\nimport Loader from '../../components/loading/Loader';\r\nimport Header from '../../components/header/Header';\r\nimport InstrumentsPanel from '../../components/instrumentsPanel/InstrumentsPanel';\r\nimport ModalWindow from '../../components/modalWindow/ModalWindow';\r\nimport HeaderBuild from '../../components/buildComponents/header/headerBuild';\r\n\r\nimport './build.scss';\r\n\r\n\r\nclass Build extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        firebase: PropTypes.object.isRequired, /** @firebase class for use firebase functions */\r\n        active: PropTypes.bool, /** @active - status firebase auth */\r\n        dispatch: PropTypes.func.isRequired, /** @dispatch - redux */\r\n        history: PropTypes.object, /** @Router HTML5 history */\r\n        location: PropTypes.object, /** @Router */\r\n        match: PropTypes.object.isRequired, /** @Router */\r\n        userData: PropTypes.object.isRequired, /** @UserData data about projects,user and current edit prject */\r\n    }\r\n\r\n    state = {\r\n            idProject: parseInt(this.props.match.params.param),\r\n            mainBuilderData: {\r\n                mainBoxWidth: null,\r\n                mainBoxHeight: null,\r\n                buildGetComponents: false,\r\n                components: [],\r\n                componentJSX: []\r\n            },\r\n            instrumentPanel: {\r\n                colorPickerActive: false,\r\n                instrumentActive: false,\r\n                target: '',\r\n                idComponent: null,\r\n            },\r\n            editComponentName:  null,\r\n            menuActive: false,\r\n            editStart: false,\r\n            modalSearch: false,\r\n            modalImageViewer: {action: false, image: null },\r\n        }\r\n\r\n    modalSearchOn = itemEvent => {\r\n        this.setState({...this.state, modalSearch: this.state.modalSearch ? false : true});\r\n    }\r\n\r\n    imageViewerSwitch = itemEvent => {\r\n        this.setState({\r\n            ...this.state,\r\n            modalImageViewer: {\r\n                ...this.state.modalImageViewer, \r\n                action: itemEvent.action, \r\n                target: itemEvent.target\r\n            }\r\n        });\r\n    };\r\n\r\n    workModeEdit = itemEvent => {\r\n        if (!this.state.editStart)\r\n        this.setState({\r\n            ...this.state,\r\n            idProject: itemEvent.idProject,\r\n            editComponentName: itemEvent.target,\r\n            mainBuilderData: {\r\n                ...this.state.mainBuilderData,\r\n                mainBoxWidth: itemEvent.width,\r\n                mainBoxHeight: itemEvent.height,\r\n            },\r\n            menuActive: true,\r\n            editStart: true\r\n        });\r\n\r\n    }\r\n\r\n    openInstrument = itemEvent => {\r\n        const targetEqual = this.state.instrumentPanel.target !== itemEvent.target;\r\n        const idEqual = this.state.instrumentPanel.idComponent !== itemEvent.id;\r\n        const instumentActive = this.state.instrumentPanel.instrumentActive;\r\n        if ((targetEqual || !instumentActive || idEqual) && this.state.editStart)\r\n        this.setState({\r\n            ...this.state,\r\n            instrumentPanel: {\r\n                ...this.state.instrumentPanel,\r\n                instrumentActive: true,\r\n                sizeTextValue: itemEvent.sizeTextValue,\r\n                idComponent: itemEvent.id,\r\n                target: itemEvent.target\r\n            }\r\n        })\r\n    }\r\n\r\n    closePanel = itemEvent => {\r\n        this.setState({\r\n            ...this.state,\r\n            instrumentPanel: {\r\n                ...this.state.instrumentPanel,\r\n                colorPickerActive: false,\r\n                instrumentActive: itemEvent.close\r\n            }\r\n        });\r\n    };\r\n\r\n    addComponentsFromBD = array => {\r\n\r\n        let componentsFromDB = [];\r\n        let components = [...this.state.mainBuilderData.components];\r\n        array.forEach(item => {\r\n            if (item.type !== 'background'){\r\n                let component =\r\n                    <BuilderComponents\r\n                        sizeParenBox = {{...this.state.sizeParenBox}}\r\n                        coords = {{...item.coords}}\r\n                        size = {item.fontSize}\r\n                        color = {item.color}\r\n                        id = {item.id}\r\n                        type = {item.type}\r\n                        key = {`${item.type}${item.id}`}\r\n                        content = {item.content ? item.content : 'Title'}\r\n                    />\r\n                componentsFromDB.push(component);\r\n                components.push(item);\r\n            }\r\n            else components.push(item);\r\n        });\r\n        this.addComponent({\r\n            components: components,\r\n            target: this.state.editComponentName,\r\n            dataBaseData: componentsFromDB, mode: 'DB'});\r\n    }\r\n\r\n    addComponent = itemEvent => {\r\n        console.log('add');\r\n        let {componentJSX} = this.state.mainBuilderData;\r\n        if (itemEvent.mode !== 'DB')\r\n            this.setState({\r\n                ...this.state,\r\n                mainBuilderData: {\r\n                    ...this.state.mainBuilderData,\r\n                    components: [...this.state.mainBuilderData.components,\r\n                                itemEvent.componentsPatternStatus],\r\n                    componentJSX: [...componentJSX, {...itemEvent.component}]\r\n                },\r\n            });\r\n        else {\r\n            this.setState({\r\n                ...this.state,\r\n                mainBuilderData: {\r\n                    ...this.state.mainBuilderData,\r\n                    components: [...this.state.mainBuilderData.components,\r\n                                ...itemEvent.components],\r\n                    componentJSX: [...componentJSX, ...itemEvent.dataBaseData]\r\n                },\r\n            });\r\n        }\r\n    };\r\n\r\n    saveChangesComponent = itemEvent => {\r\n\r\n        const {userData} = this.props;\r\n        const _components = this.state.mainBuilderData.components.map(item => {\r\n            if (item.id === itemEvent.id) return {...itemEvent};\r\n            return item;\r\n        });\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            mainBuilderData: {\r\n                ...this.state.mainBuilderData,\r\n                components: _components\r\n            }\r\n        }, () => (\r\n        this.props.dispatch(updateMiddleware({\r\n            uid: userData.idUser,\r\n            projects: [...userData.projects],\r\n            components: [...this.state.mainBuilderData.components],\r\n            idProject: this.state.idProject}))\r\n        ));\r\n    };\r\n\r\n    saveWidth = eventItem => {\r\n        this.setState({sizeParenBox: {...eventItem}});\r\n    };\r\n\r\n\r\n    render(){\r\n        const {userData} = this.props;\r\n        const {currentProjectsData} = userData;\r\n        const {instrumentActive} = this.state.instrumentPanel;\r\n\r\n        if (userData.active && currentProjectsData.loadProject){\r\n            return (\r\n                    <Fragment key = 'build'>\r\n                    {   this.state.modalImageViewer.action ?\r\n                        <ImageViewer key = 'ImageViewer' path = {this.state.modalImageViewer.target} />\r\n                        : null\r\n                    }\r\n                    {this.state.modalSearch ?\r\n                        <ModalWindow\r\n                            idComponent = {this.state.instrumentPanel.idComponent}\r\n                            key = 'ModalWindow' workMode = 'Search' /> : null\r\n                    }\r\n                    { instrumentActive ?\r\n                        <InstrumentsPanel\r\n                            key = 'InstrumentsPanel'\r\n                            editComponentName = {this.state.editComponentName}\r\n                            mainBuilderData =  {{...this.state.mainBuilderData}}\r\n                            instrumentPanel = {{...this.state.instrumentPanel}}\r\n                        />\r\n                        : null\r\n                    }\r\n                        <Header key = 'Header' title = \"Constructor\"  />\r\n                        <HeaderBuild\r\n                                key = 'HeaderBuild'\r\n                                mainBuilderData = {{...this.state.mainBuilderData}}\r\n                                currentProjectsData = {{...this.props.userData.currentProjectsData}}\r\n                                editStart = {this.state.editStart}\r\n                                editComponentName = {this.state.editComponentName}\r\n                                countComponents = {this.state.mainBuilderData.componentJSX.length}\r\n                                menuActive = {this.state.menuActive}\r\n                                sizeParenBox = {this.state.sizeParenBox}\r\n                                id = {currentProjectsData.idProject}\r\n                        >\r\n                            {{name: this.state.editComponentName}}\r\n                        </HeaderBuild>\r\n                    </Fragment>\r\n            )\r\n        } else if (!this.props.firebase.getCurrentUser()) return <Redirect to = { '/'} />\r\n        else return <Loader  key = 'Loader' path = '/img/loading.gif' type = 'build' />\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n\r\n        let {userData} = this.props;\r\n        let {currentProjectsData} = userData;\r\n        const isIncludeComponent = currentProjectsData.components.length;\r\n        const isIncludeComponentJSX = this.state.mainBuilderData.componentJSX.length;\r\n        const isIclude = isIncludeComponent && !isIncludeComponentJSX;\r\n\r\n        if (userData.active && !currentProjectsData.loadProject) {\r\n            const current =  userData.projects.find(item => item.id === this.state.idProject)\r\n            this.props.dispatch(loadCurrentProjectAction({\r\n                id: current.id,\r\n                typeProject: current.type,\r\n                components: [...current.components]\r\n            }));\r\n        }\r\n        if (currentProjectsData.loadProject && isIclude && this.state.editStart)\r\n            this.addComponentsFromBD([...currentProjectsData.components]);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n\r\n        let {userData} = this.props;\r\n        let {currentProjectsData} = userData;\r\n\r\n        if (userData.active && !currentProjectsData.loadProject) {\r\n            const currentProject =  userData.projects.find(item => item.id === this.state.idProject)\r\n            this.props.dispatch(loadCurrentProjectAction({\r\n                id: currentProject.id,\r\n                typeProject: currentProject.type,\r\n                components: [...currentProject.components]\r\n            }));\r\n        };\r\n\r\n        eventEmitter.on('EventBuildComponents', this.addComponent);\r\n        eventEmitter.on('EventSaveChangesComponent', this.saveChangesComponent);\r\n        eventEmitter.on('EventSaveWidth', this.saveWidth);\r\n        eventEmitter.on('EventClosePanel', this.closePanel);\r\n        eventEmitter.on('EventModalSearchOn', this.modalSearchOn);\r\n        eventEmitter.on('EventInstrumentPanel', this.openInstrument);\r\n        eventEmitter.on('EventImageView', this.imageViewerSwitch);\r\n        eventEmitter.on('EventModeEdit', this.workModeEdit);\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n\r\n        let {userData} = this.props;\r\n\r\n        if (userData.active)  this.props.dispatch(exitProjectAction(true));\r\n        eventEmitter.off('EventBuildComponents', this.addComponent);\r\n        eventEmitter.off('EventSaveChangesComponent', this.saveChangesComponent);\r\n        eventEmitter.off('EventSaveWidth', this.saveWidth);\r\n        eventEmitter.off('EventModalSearchOn', this.modalSearchOn);\r\n        eventEmitter.off('EventClosePanel', this.closePanel);\r\n        eventEmitter.off('EventInstrumentPanel', this.openInstrument);\r\n        eventEmitter.off('EventImageView', this.imageViewerSwitch);\r\n        eventEmitter.off('EventModeEdit', this.workModeEdit);\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userData: {\r\n            active: state.cabinet.active,\r\n            idUser: state.cabinet.idUser,\r\n            projects: [...state.cabinet.projects],\r\n            currentProjectsData: {...state.builder}\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withFirebase(Build));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\nimport {middlewareLoadUserData} from './redux/middleware/loadUserMiddleware';\r\nimport {connect} from 'react-redux';\r\nimport withFirebase from './components/firebaseHOC';\r\nimport Loader from './components/loading/Loader';\r\n\r\nimport Index from './Pages/Index/Index';\r\nimport Cabinet from './Pages/Cabinet/Cabinet';\r\nimport About from './Pages/About/About';\r\nimport Build from './Pages/Build/Build';\r\nimport ErrorPage from './components/ErrorCatch/ErrorPage';\r\n\r\n// require('es6-promise').polyfill();\r\n\r\nclass App extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        config: PropTypes.object.isRequired, /** @Config app */\r\n        firebase: PropTypes.object.isRequired, /** @firebase class for use firebase functions */\r\n        dispatch: PropTypes.func.isRequired, /** @dispatch - redux */\r\n    }\r\n\r\n    state = {\r\n        firebase: this.props.firebase,\r\n        firebaseLoadState: false,\r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n        this.props.firebase.auth.onAuthStateChanged((user) => {\r\n\r\n            if (!this.state.firebaseLoadState){\r\n                if (user){console.log('load'); this.props.dispatch(middlewareLoadUserData(user.uid)); }\r\n                this.setState({...this.state, firebaseLoadState: true});\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    render(){\r\n        if (this.state.firebaseLoadState){\r\n            console.log('app');\r\n        return (\r\n                <Switch>\r\n                    <Route\r\n                        path = {'/'} exact\r\n                        render = {(props) => <Index {...props} />}\r\n                    />\r\n                    <Route path = '/Cabinet/' exact component = {Cabinet}/>\r\n                    <Route\r\n                        path = {'/Cabinet/About'}\r\n                        render = {(props) => <About {...props} config = {this.props.config} />}\r\n                    />\r\n                    <Route path = {'/Cabinet/Build/:param'} component = {Build}/>\r\n                    <Route path = {'*'} component = {Index} />\r\n                    <Route path = {'/crashPage'} component = {ErrorPage} />\r\n                </Switch>\r\n\r\n        )\r\n        } else return <Loader path = { '/img/loading.gif'} type = 'application' />\r\n    }\r\n}\r\n\r\n// const mapStateToProps = (state) => {\r\n//     return {\r\n//       active: state.cabinet.active\r\n//     }\r\n//   }\r\n\r\nexport default connect()(withFirebase(App));","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport firebase from './Firebase/Firebase';\nimport ErrorBoundary from './components/ErrorCatch/ErrorBoundary';\nimport {HashRouter } from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\nimport App from './App.jsx';\nimport 'normalize.css';\n\n\nfirebase.saveSession('SESSION');\nconst config = require('./config.json');\n\nReactDOM.render(\n        <HashRouter>\n            <ErrorBoundary>\n                <Provider store = {store}>\n                    <App config = {config} />\n                </Provider>\n            </ErrorBoundary>\n        </HashRouter >,\n        document.getElementById('root')\n);\n\nserviceWorker.register();\n\n"],"sourceRoot":""}