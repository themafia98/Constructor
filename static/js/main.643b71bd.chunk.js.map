{"version":3,"sources":["serviceWorker.js","EventEmitter.js","components/ErrorCatch/ErrorPage.jsx","components/ErrorCatch/ErrorBoundary.jsx","Firebase/firebaseConfig.js","Firebase/Firebase.js","redux/actions.js","redux/reducerBuilder.js","redux/reducerCabinet.js","redux/reducers.js","redux/store.js","redux/middleware/loadUserMiddleware.js","components/firebaseHOC.jsx","components/loading/Loader.jsx","components/Registration/Registration.jsx","Pages/Index/Index.jsx","redux/middleware/middlewareDelete.js","components/Icon/icon.jsx","components/header/Header.jsx","components/imageViewer/imageItem.jsx","components/modalWindow/ModalWindow.jsx","redux/middleware/createProjectMiddleware.js","components/List/Item.jsx","components/List/List.jsx","components/ProjectsSection/ProjectsSection.jsx","Pages/Cabinet/Cabinet.jsx","Pages/About/About.jsx","redux/middleware/updateMiddleware.js","components/imageViewer/imageViewer.jsx","components/instrumentsPanel/InstrumentsPanel.jsx","components/buildComponents/components/Background.jsx","components/buildComponents/components/Text.jsx","components/componentsBuildMenu/BuildMenu.jsx","components/controllers/controllers.jsx","components/buildComponents/header/headerBuild.jsx","Pages/Build/Build.jsx","App.jsx","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","stream","EventEmitter","ErrorPage","redirect","update","event","_this","setState","eventEmitter","emit","this","react_default","a","createElement","react_router","to","class","onClick","React","Component","ErrorBoundary","hasError","updateApplication","componentDidMount","on","componentWillUnmount","off","info","ErrorCatch_ErrorPage","props","children","PureComponent","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","interfaceFirebase","require","Firebase","Object","classCallCheck","firebase","auth","db","rules","setPersistence","Auth","Persistence","email","password","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","currentUser","saveSession","exitProjectAction","type","exit","loadCurrentProjectAction","id","typeProject","component","loadUserAction","active","idUser","uid","projects","errorAction","initialState","loadProject","haveUpdateLoading","idProject","combineReducers","builder","arguments","length","undefined","action","objectSpread","toConsumableArray","cabinet","map","item","middleware","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","withExtraArgument","reduxCatch","getState","lastAction","dispatch","debug","store","createStore","middlewareLogin","_ref2","asyncToGenerator","regenerator_default","mark","_callee","_ref","wrap","_context","prev","next","login","response","collection","doc","user","get","docUser","data","message","stop","_x","_x2","_x3","apply","middlewareLogOutUser","_ref6","_callee3","_ref5","_context3","_x7","_x8","_x9","withFirebase","assign","Loader","_useState","useState","path","slicedToArray","className","src","alt","emailRef","passwordRef","setRefEmail","node","setRefPassword","createUser","value","set","autoComplete","ref","Index","title","registrationActive","regStatus","wrongEnter","statusRegistration","additionalUserInfo","isNewUser","showBox","authTo","emailImput","passwordImput","e","currentSelected","components_Registration_Registration","connect","middlewareDelete","filter","itemdb","Icon","_useState3","_useState5","draggable","iconPath","CabinetIcon","Header","redirectAbout","redirectA","redirectCabinet","redirectC","logOut","stopPropagation","pathname","add","icon","withRouter","ImageItem","urls","regular","urlRegular","full","urlFull","_useState7","isFull","selected","url","ModalWindow","workMode","images","buttonSearchDisabled","selectedItem","showUrl","imageBoxView","newProject","validateName","validateType","disabled","name","imageMenuActive","warning","lengthMax","lengthMin","inputSearch","inputSelect","searchBackground","search","inages","isFetch","concat","ok","json","Error","results","showMenuImage","showImage","target","setSelectedImage","idComponent","makeImageResultBox","items","i","imageItem","key","addNewProject","mode","selectOption","inputs","defineProperty","lengthInput","cancel","refSelect","refSearch","onChange","placeholder","react","middlewareCreateProject","list","lastProject","lastIndex","push","_useState4","canBuild","setCanBuild","_useState9","data-id","List","makeList","project","List_Item","ProjectsSection","components_List_List","Cabinet","deletItem","getCurrentUser","changeWorkMode","header_Header","modalWindow_ModalWindow","components_ProjectsSection_ProjectsSection","about","developer","year","updateMiddleware","newProjects","JSON","parse","stringify","find","ImageViewer","InstrumentsPanel","instrumentPanel","componentsStats","content","fontSize","color","backgroundImage","image","coords","left","top","updateSizeText","eventSize","closePanel","close","setSize","size","setContent","contentValue","updatePosition","eventItem","x","y","setColor","colorPickerActive","updateBimageStats","handleChangeComplete","rgb","colorRGB","r","g","b","saveChanges","searchImage","makePanelInstruments","min","max","lib","onChangeComplete","maxLength","defaultValue","componentDidUpdate","oldProps","oldState","targetBool","idBool","instrumentActive","Background","styled","div","_templateObject","backgroundColor","BackgroundComponent","count","setCount","boxComponent","createRef","background","_useState6","setBgColor","_useState8","setImage","changeColor","setBackgroundImage","useEffect","current","focus","boxInform","getBoundingClientRect","width","height","saveWidth","Title","h1","attrs","style","display","shadowDisplay","coordX","coordY","Text_templateObject","textColor","TextComponent","sizeParenBox","colorText","setColorText","sizeText","setSizeText","_useState10","contentText","setText","_useState11","_useState12","shiftCoords","setShiftCoords","_useState13","_useState14","dragNdrop","setDragNdrop","changeColorText","changeSizeText","changeContentText","eventContent","moveText","pageX","pageY","position","sizeTextValue","onMouseDown","rect","onDrag","onDragEnd","onWheel","shiftKey","deltaY","counter","BuildMenu","addText","countComponents","Text","addBackground","components_Background","ControllersBox","controllers_templateObject","Controllers","viewComponentMenu","shiftX","shiftY","coordsX","coordsY","componentMenu","saveCoords","controlBox","drag","refControll","menuActive","componentsBuildMenu_BuildMenu","HeaderBuild","changeMode","editStart","currentTarget","refBox","refBackground","build","componentJSX","readyBuild","controllers","mainWidth","mainBoxWidth","mainHeight","mainBoxHeight","Build","parseInt","params","param","editComponent","edit","changeEdit","modalSearch","modalImageViewer","modalSearchOn","imageViewerSwitch","workModeEdit","itemEvent","openInstrument","targetEqual","instumentActive","addHeaderComponent","saveChangesComponent","componentSaveInBase","currentProject","imageViewer_imageViewer","instrumentsPanel_InstrumentsPanel","header_headerBuild","prevProps","prevState","_this2","App","firebaseLoadState","onAuthStateChanged","_ref4","_callee2","_ref3","_context2","_x4","_x5","_x6","_this3","exact","render","Pages_Index_Index","Pages_About_About","ReactDOM","react_router_dom","ErrorCatch_ErrorBoundary","es","src_App","document","getElementById","URL","href","origin","addEventListener","fetch","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.643b71bd.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {EventEmitter} from 'events';\r\nconst stream = new EventEmitter();\r\nexport default stream;","import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nimport './errorPage.scss';\r\n\r\n\r\nclass ErrorPage extends React.Component {\r\n\r\n    state = {\r\n        redirect: false,\r\n    }\r\n\r\n    update = event => {\r\n       this.setState({redirect: true},\r\n        () => eventEmitter.emit('EventErrorCatchUpdate'));\r\n    }\r\n\r\n    render(){\r\n        console.log('error');\r\n        if (this.state.redirect) return <Redirect to = '/' />\r\n        return (\r\n        <div class = 'container'>\r\n            <div class = 'flex-column'>\r\n                <h1>Application crash</h1>\r\n                <button onClick = {this.update}>Update</button>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ErrorPage;","\r\n\r\nimport React from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport ErrorPage from './ErrorPage';\r\nclass ErrorBoundary extends React.PureComponent {\r\n\r\n      state = { \r\n        hasError: false,\r\n      };\r\n\r\n    static getDerivedStateFromError(error) {\r\n        console.log(error);\r\n      // Обновить состояние с тем, чтобы следующий рендер показал запасной UI.\r\n      return { hasError: true};\r\n    }\r\n\r\n    updateApplication = event => {\r\n      this.setState({hasError: false});\r\n    };\r\n  \r\n    componentDidCatch(error, info) {\r\n      // Можно также сохранить информацию об ошибке в соответствующую службу журнала ошибок\r\n     console.error(error + \",\" + info);\r\n    }\r\n  \r\n    render() {\r\n      if (this.state.hasError) return <ErrorPage />\r\n      return this.props.children;\r\n    }\r\n\r\n    componentDidMount = () => {\r\n      eventEmitter.on('EventErrorCatchUpdate',this.updateApplication);\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n      eventEmitter.off('EventErrorCatchUpdate',this.updateApplication);\r\n    }\r\n  }\r\n\r\n  export default ErrorBoundary;","// setings in root folder / firebase.env\r\nconsole.log('config');\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_APPID\r\n};\r\n\r\nexport {firebaseConfig}","import * as firebase from 'firebase/app';\r\nimport {firebaseConfig} from './firebaseConfig';\r\n\r\nconst auth = require('firebase/auth');\r\nconst firestore = require('firebase/firestore');\r\n\r\nclass Firebase {\r\n\r\n        constructor(){\r\n                firebase.initializeApp(firebaseConfig);\r\n                this.auth = firebase.auth();\r\n                this.db = firebase.firestore();\r\n        }\r\n\r\n        saveSession(rules){\r\n                return this.auth.setPersistence(firebase.auth.Auth.Persistence[rules]);\r\n        }\r\n\r\n        login(email, password){\r\n                return this.auth.signInWithEmailAndPassword(email, password);\r\n        }\r\n\r\n        registration(email, password){\r\n                return this.auth.createUserWithEmailAndPassword(email, password)\r\n        }\r\n\r\n        signOut(){\r\n                return this.auth.signOut()\r\n        }\r\n\r\n        getCurrentUser() {\r\n                return this.auth.currentUser\r\n        }\r\n}\r\n\r\nlet interfaceFirebase = new Firebase();\r\ninterfaceFirebase.saveSession('SESSION');\r\n\r\nexport default interfaceFirebase;\r\n\r\nexport { auth, firestore };\r\n\r\n","const CREATE_PROJECT = 'CREATE_PROJECT';\r\nconst LOAD_UPDATE_PROJECT = \"LOAD_UPDATE_PROJECT\";\r\nconst LOAD_CURRENT = 'LOAD_CURRENT';\r\nconst LOG_OUT_CABINET = 'LOG_OUT_CABINET';\r\nconst LOAD_USER_CABINET = 'LOAD_USER_CABINET';\r\nconst ERROR_CABINET = 'ERROR_CABINET';\r\nconst EXIT_PROJECT = 'EXIT_PROJECT';\r\n\r\nconst createProjectAction = (state) => {\r\n    return {\r\n        type: CREATE_PROJECT,\r\n        projects: state,\r\n    }\r\n}\r\n\r\nconst exitProjectAction = (state) => {\r\n    return {\r\n        type: EXIT_PROJECT,\r\n        exit: state\r\n    }\r\n}\r\n\r\nconst loadCurrentProjectAction = (state) => {\r\n    return {\r\n        type: LOAD_CURRENT,\r\n        id: state.id,\r\n        typeProject: state.typeProject,\r\n        component: state.component\r\n    }\r\n}\r\n\r\nconst loadUpdateCurrentProject = (state) => {\r\n    return {\r\n        type: LOAD_UPDATE_PROJECT,\r\n        idProject: state.idProject,\r\n        component: state.component\r\n    }\r\n}\r\n\r\nconst loadUserAction = (state) => {\r\n    return {\r\n        type: LOAD_USER_CABINET,\r\n        active: true,\r\n        idUser: state.uid,\r\n        error: '',\r\n        projects: state.projects\r\n    }\r\n}\r\n\r\nconst logOutAction = (state) => {\r\n\r\n    return {\r\n        type: LOG_OUT_CABINET,\r\n        active: false,\r\n        idUser: null,\r\n        error: '',\r\n        projects: []\r\n    }\r\n}\r\n\r\nconst errorAction = (state) => {\r\n    return {\r\n        type: ERROR_CABINET,\r\n        error: state\r\n    }\r\n}\r\n\r\nexport {\r\n    CREATE_PROJECT, createProjectAction, /* cabinet */\r\n    LOAD_USER_CABINET, loadUserAction, /* cabinet */\r\n    LOG_OUT_CABINET, logOutAction, /* cabinet */\r\n    LOAD_CURRENT, loadCurrentProjectAction, /* builder */\r\n    LOAD_UPDATE_PROJECT, loadUpdateCurrentProject,\r\n    EXIT_PROJECT, exitProjectAction,\r\n    ERROR_CABINET, errorAction, /* both */\r\n}","import {LOAD_CURRENT,LOAD_UPDATE_PROJECT, EXIT_PROJECT} from './actions';\r\n\r\nconst initialState = {\r\n    loadProject: false,\r\n    haveUpdateLoading: true,\r\n    idProject: null,\r\n    typeProject: null,\r\n    component: []\r\n};\r\nexport default (state = initialState, action) => {\r\n    switch (action.type){\r\n\r\n        case LOAD_CURRENT: {\r\n            return {\r\n                ...state,\r\n                haveUpdateLoading: state.haveUpdateLoading ? false : true,\r\n                loadProject: true,\r\n                idProject: action.id,\r\n                typeProject: action.typeProject,\r\n                component: [...action.component]\r\n            }\r\n        }\r\n\r\n        case LOAD_UPDATE_PROJECT: {\r\n            return {\r\n                ...state,\r\n                haveUpdateLoading: false,\r\n                component: [...action.component]\r\n            }\r\n        }\r\n\r\n        case EXIT_PROJECT: {\r\n            if (action.exit)\r\n            return {\r\n                ...state,\r\n                haveUpdateLoading: true,\r\n                loadProject: false,\r\n                idProject: null,\r\n                typeProject: null,\r\n                component: []\r\n            }\r\n            else return state;\r\n        }\r\n        default: return state;\r\n    }\r\n};","import {LOAD_USER_CABINET, LOG_OUT_CABINET, ERROR_CABINET, CREATE_PROJECT, LOAD_UPDATE_PROJECT} from './actions';\r\n\r\nconst initialState = {\r\n    active: false,\r\n    idUser: null,\r\n    projects: [],\r\n    error: null,\r\n    //dateConnect: new Date(Date.now()).toLocaleString().replace(/\\s/ig,'').split(','),\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case LOAD_USER_CABINET: {\r\n\r\n            return {\r\n                ...state,\r\n                active: action.active,\r\n                idUser: action.idUser,\r\n                projects: [...action.projects]\r\n            }\r\n        }\r\n\r\n        case CREATE_PROJECT: {\r\n            return {\r\n                ...state,\r\n                projects: [...action.projects]\r\n            }\r\n        }\r\n\r\n        case LOAD_UPDATE_PROJECT: {\r\n            return {\r\n                ...state,\r\n                projects: state.projects.map(item => {\r\n                    if (item.id === action.idProject)\r\n                        item.component = [...action.component]\r\n                return item;\r\n                })\r\n            }\r\n        }\r\n\r\n        case LOG_OUT_CABINET: {\r\n            return {\r\n                ...state,\r\n                active: false,\r\n                idUser: null,\r\n                projects: []\r\n            }\r\n        }\r\n\r\n        case ERROR_CABINET: {\r\n            return {\r\n                ...state,\r\n                error: action.error\r\n            }\r\n        }\r\n        default: return state;\r\n    }\r\n}\r\n\r\n","import {combineReducers} from 'redux';\r\nimport reducerBuilder from './reducerBuilder';\r\nimport reducerCabinet from './reducerCabinet';\r\n\r\nexport default combineReducers({\r\n    builder: reducerBuilder,\r\n    cabinet: reducerCabinet,\r\n});","import {createStore, applyMiddleware, compose} from 'redux';\r\nimport firebase from  '../Firebase/Firebase';\r\nimport reduxCatch from 'redux-catch';\r\nimport thunk from 'redux-thunk';\r\nimport combineReducers from './reducers';\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' &&\r\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n    }) : compose;\r\n\r\n    function errorHandler(error, getState, lastAction, dispatch) {\r\n      console.error(error);\r\n      console.debug('current state', getState());\r\n      console.debug('last action was', lastAction);\r\n      // optionally dispatch an action due to the error using the dispatch parameter\r\n    }\r\n\r\nconst middleware = composeEnhancers(\r\n  applyMiddleware(thunk.withExtraArgument({firebase})),\r\n  applyMiddleware(reduxCatch(errorHandler))\r\n);\r\nconst store = createStore(combineReducers, middleware);\r\n\r\n\r\nexport default store;","import {loadUserAction, errorAction, logOutAction} from '../actions';\r\n\r\nconst middlewareLogin = (email,password) => async (dispatch,getState, {firebase}) => {\r\n        await firebase.login(email,password)\r\n        .then(response =>{\r\n            firebase.db.collection(\"users\").doc(response.user.uid).get()\r\n            .then(docUser => {\r\n                let user = docUser.data();\r\n                dispatch(loadUserAction({uid: docUser.id, projects: [...user.projects]}))\r\n            })\r\n        })\r\n        .catch((error) => {\r\n            console.error(error.message);\r\n            dispatch(errorAction(error.message));\r\n        });\r\n    }\r\n\r\nconst middlewareLoadUserData = (uid) => async (dispatch,getState, {firebase}) => {\r\n        await firebase.db.collection(\"users\").doc(uid).get()\r\n        .then(docUser => {\r\n            let user = docUser.data();\r\n            dispatch(loadUserAction({uid: uid, projects: [...user.projects]}))\r\n        })\r\n        .catch((error) => {\r\n            console.error(error.message);\r\n            dispatch(errorAction(error.message));\r\n        });\r\n    }\r\n\r\nconst middlewareLogOutUser = (uid) => async (dispatch,getState, {firebase}) => {\r\n    await firebase.signOut()\r\n    .then (response => {\r\n        dispatch(logOutAction());\r\n    })\r\n    .catch((error) => {\r\n        console.error(error.message);\r\n        dispatch(errorAction(error.message));\r\n    });\r\n}\r\nexport {\r\n    middlewareLogin,middlewareLoadUserData, middlewareLogOutUser\r\n}","import React from 'react';\r\nimport firebase from '../Firebase/Firebase';\r\n\r\nconst withFirebase = Component => props => (\r\n    <Component firebase = {firebase} {...props} />\r\n);\r\n\r\nexport default withFirebase;","import React,{useState} from 'react';\r\n\r\nexport default function(props) {\r\n    const [path] = useState(props.path);\r\n    return (\r\n            <div className = 'loaderBox'>\r\n                <img className = 'loader' src = {path} alt = 'loader'></img> \r\n                <p>Loading {props.type}</p>\r\n            </div>\r\n    )\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport './registration.scss';\r\n\r\nimport withFirebase from '../../components/firebaseHOC';\r\n\r\n\r\nclass Registration extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        firebase: PropTypes.object.isRequired,\r\n    }\r\n\r\n    state = {\r\n        firebase: this.props.firebase,\r\n        error: null,\r\n    }\r\n\r\n    emailRef = null;\r\n    passwordRef = null;\r\n\r\n    setRefEmail = (node) => this.emailRef = node;\r\n    setRefPassword = (node) => this.passwordRef = node;\r\n\r\n    createUser = (event) => {\r\n\r\n        const email = this.emailRef.value;\r\n        const password = this.passwordRef.value;\r\n        const { firebase } = this.props;\r\n\r\n        firebase.registration(email, password)\r\n        .then(response => {\r\n            firebase.db.collection(\"users\").doc(response.user.uid).set({\r\n                'projects': [],\r\n                'email': email,\r\n            }).then(() => eventEmitter.emit('EventRegistrationCorrect', response))\r\n        })\r\n        .catch((error) => {\r\n        console.error(error.message);\r\n        this.setState({error: error.message});\r\n        });\r\n    };\r\n\r\n    render(){\r\n        let  { error } = this.state;\r\n\r\n        return (\r\n            <div className = 'RegistrationBox'>\r\n                <div  className = 'RegistrationForm'>\r\n                    <h3>Registration</h3>\r\n                    <form autoComplete = 'off' className = 'RegForm'>\r\n                        { error ?\r\n                            <p className = 'error'>{error}</p>\r\n                            : null\r\n                        }\r\n                        <span>E-mail</span>\r\n                        <input ref = {this.setRefEmail} type = 'text' />\r\n                        <span>Password</span>\r\n                        <input  autoComplete = \"off\" ref = {this.setRefPassword} type = 'password' />\r\n                        <input onClick = {this.createUser}\r\n                                className = 'loginButton'\r\n                                type = 'button'\r\n                                value = 'registration'\r\n                        />\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default withFirebase(Registration);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport {middlewareLogin} from '../../redux/middleware/loadUserMiddleware';\r\n\r\nimport Loader from '../../components/loading/Loader';\r\nimport Registration from '../../components/Registration/Registration';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './index.scss';\r\n\r\nclass Index extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        config: PropTypes.object,\r\n    }\r\n\r\n    state = {\r\n        title:  \"Constructor\",\r\n        registrationActive: false,\r\n        regStatus: false,\r\n        wrongEnter: false,\r\n        error: ''\r\n    }\r\n\r\n    statusRegistration = (event) => {\r\n        event.additionalUserInfo.isNewUser ?\r\n        this.setState({...this.state,\r\n                        regStatus: true,\r\n                        registrationActive: false,\r\n                        error: 'Account create!'\r\n                    })\r\n        : console.error('error registration');\r\n    }\r\n\r\n    showBox = (event) => {\r\n        this.setState ({\r\n            ...this.state,\r\n        registrationActive: this.state.registrationActive ? false : true\r\n        })\r\n    }\r\n\r\n    authTo = (event) => {\r\n            this.props.dispatch(middlewareLogin(this.emailImput.value, this.passwordImput.value));\r\n}\r\n    emailImput = null;\r\n    passwordImput = null;\r\n    emailRef = (node) => this.emailImput = node;\r\n    passwordRef = (node) => this.passwordImput = node;\r\n\r\n    render(){\r\n        console.log('index render');\r\n        if (this.props.active) return <Redirect to = {process.env.PUBLIC_URL + '/Cabinet'} />\r\n        else if (!this.props.active) {\r\n            let currentSelected = this.state.registrationActive;\r\n            return (\r\n                <div className = 'LoginPage flex-column'>\r\n                        <h1>{this.state.title}</h1>\r\n                        <div className = 'LoginBox'>\r\n                            <div className = 'LoginForm'>\r\n                                <h3>Connect form</h3>\r\n                                {\r\n                                    this.props.wrongEnter || this.state.regStatus ?\r\n                                    <p className = 'error'>{this.props.wrongEnter}</p>\r\n                                    : null\r\n                                }\r\n                                <p>E-mail</p>\r\n                                <input ref = {this.emailRef} type = 'text' />\r\n                                <p>Password</p>\r\n                                <input ref = {this.passwordRef} type = 'password' />\r\n                                <input \r\n                                    onClick = {this.authTo} \r\n                                    className = 'loginButton'\r\n                                    type = 'button'\r\n                                    value = 'enter' />\r\n                                <input\r\n                                    onClick = {this.showBox}\r\n                                    className = {currentSelected ? `loginButton selected`\r\n                                        : 'loginButton'}\r\n                                    type = 'button'\r\n                                    value = 'registration'\r\n                                    />\r\n                            </div>\r\n                        </div>\r\n                        {\r\n                            this.state.registrationActive ?\r\n                            <Registration auth = {this.props.auth} />\r\n                            : null\r\n                        }\r\n                </div>\r\n            )\r\n        } else  return <Loader path = '/img/loading.gif' type = 'session' />\r\n    }\r\n\r\n    componentDidMount = (e) => {\r\n        eventEmitter.on('EventRegistrationCorrect', this.statusRegistration);\r\n    }\r\n    componentWillUnmount = (e) => {\r\n        eventEmitter.off('EventRegistrationCorrect', this.statusRegistration);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        active: state.cabinet.active, \r\n        wrongEnter: state.cabinet.error\r\n    }\r\n  }\r\n\r\nexport default connect(mapStateToProps)(Index);","\r\nimport {errorAction, loadUserAction} from '../actions';\r\n\r\nconst middlewareDelete = item => async (dispatch,getState, {firebase}) => {\r\n    console.log('middleware');\r\n    await firebase.db.collection('users').doc(item.uid).get()\r\n    .then(user => user.data())\r\n    .then(data => {\r\n        return {id: data.id, projects: data.projects.filter(itemdb => itemdb.id !== item.id)};\r\n    })\r\n    .then(data => {\r\n        firebase.db.collection(\"users\").doc(item.uid).update({\r\n            \"projects\": data.projects\r\n        })\r\n        .then(response => {\r\n            dispatch(loadUserAction({uid: data.id, projects: data.projects}));\r\n        });\r\n    })\r\n    .catch((error) => {\r\n        console.error(error.message);\r\n        dispatch(errorAction(error.message));\r\n    });\r\n}\r\n\r\nexport default middlewareDelete;\r\n","import React, {useState} from 'react';\r\n\r\n\r\nfunction Icon(props){\r\n    const [path] = useState(props.path);\r\n    const [className] = useState(props.className ? props.className : null);\r\n    const [draggable] = useState(props.draggable ? true : false);\r\n\r\n    return (\r\n    <img\r\n        draggable = {draggable}\r\n        onClick = {props.onClick ? props.onClick : null}\r\n        className = {className}\r\n        title = {props.title ? props.title : null}\r\n        src = {process.env.PUBLIC_URL + path } alt = 'icon'>\r\n    </img>\r\n    )\r\n}\r\n\r\nexport default Icon;","import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport './header.scss';\r\n\r\nimport {middlewareLogOutUser} from '../../redux/middleware/loadUserMiddleware';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\n\r\nimport eventEmitter from '../../EventEmitter.js';\r\nimport Icon from '../Icon/icon';\r\n\r\n\r\nconst iconPath = require('../../config.json').CabinetIcon;\r\n\r\nclass Header extends React.Component {\r\n\r\n    static propTypes = {\r\n        title: PropTypes.string.isRequired,\r\n    };\r\n\r\n    state = {\r\n        title: this.props.title,\r\n        redirectAbout: {\r\n            path: process.env.PUBLIC_URL + '/Cabinet/About',\r\n            redirectA: false,\r\n        },\r\n        redirectCabinet: {\r\n            path: process.env.PUBLIC_URL + '/Cabinet',\r\n            redirectC: false,\r\n        }\r\n    };\r\n\r\n    logOut = event => {\r\n        this.props.dispatch(middlewareLogOutUser(this.props.idUser));\r\n        event.stopPropagation();\r\n    };\r\n\r\n    redirectAbout = event => {\r\n        if (this.props.location.pathname !== this.state.redirectAbout.path)\r\n           this.setState({\r\n               redirectAbout: {\r\n                   ...this.state.redirectAbout,\r\n                   redirectA: true\r\n               }\r\n           });\r\n        event.stopPropagation()\r\n    };\r\n\r\n    redirectCabinet = event => {\r\n        if (this.props.location.pathname !== this.state.redirectCabinet.path)\r\n        this.setState({\r\n            redirectCabinet: {\r\n                ...this.state.redirectCabinet,\r\n                redirectC: true\r\n            }\r\n        });\r\n        event.stopPropagation()\r\n    }\r\n\r\n    add = (e) => {\r\n        eventEmitter.emit('EventChangeWorkMode',{action: 'newProject'});\r\n    };\r\n\r\n    render(){\r\n\r\n        let {redirectA} = this.state.redirectAbout;\r\n        let {redirectC} = this.state.redirectCabinet;\r\n\r\n        if (redirectA) return <Redirect to = {this.state.redirectAbout.path} />\r\n        if(redirectC) return <Redirect to = {this.state.redirectCabinet.path} />\r\n        console.log('heade');\r\n        return (\r\n            <header>\r\n                <div className = 'container'>\r\n                    <div className = 'flex-row'>\r\n                            <div className = 'header__CabinetInfo'>\r\n                                <Icon path = {iconPath} />\r\n                                <h3 className = 'tilteApp' onClick = {this.redirectCabinet}>{this.state.title}</h3>\r\n                            </div>\r\n                            {this.props.location.pathname === '/Cabinet' ?\r\n                                <div onClick = {this.add} className = 'header__newProject__AddButton'>\r\n                                    <Icon path = '/img/plus.png' />\r\n                                </div>\r\n                                : null\r\n                            }\r\n                                <div  className = 'Navigator'>\r\n                                    <Icon onClick = {this.redirectAbout} title = 'about' path = '/img/about_logo.svg' />\r\n                                    <Icon onClick = {this.logOut} title = 'logOut' path = '/img/logOut.svg' />\r\n                                </div>\r\n                    </div>\r\n               </div>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect()(withRouter(Header));","import React, {useState} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nconst ImageItem = props => {\r\n\r\n    const [id] = useState(props.id);\r\n    const [urlRegular] = useState(props.urls.regular);\r\n    const [urlFull] = useState(props.urls.full);\r\n    const [isFull] = useState(props.isFull);\r\n\r\n    const showImageMenu = event => {\r\n       eventEmitter.emit(\"EventShowMenuImage\", {id: id, url: urlRegular, urlFull: urlFull});\r\n    }\r\n\r\n\r\n    return (\r\n        <div className = {props.selected ? 'ItemBox selected' : 'ItemBox'}>\r\n            <img\r\n                onClick = {showImageMenu}\r\n                src = {isFull ? urlFull : urlRegular}\r\n                alt = 'item'\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageItem;","import React,{Fragment} from 'react';\r\nimport isFetch from 'isomorphic-fetch';\r\nimport PropTypes from 'prop-types';\r\nimport eventEmitter from '../../EventEmitter.js';\r\n\r\nimport ImageItem from '../imageViewer/imageItem';\r\nimport Icon from '../Icon/icon';\r\n\r\nimport './modal.scss';\r\n\r\nclass ModalWindow extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        workMode: PropTypes.string.isRequired,\r\n        idComponent: PropTypes.string || PropTypes.number\r\n    }\r\n\r\n    state = {\r\n        workMode: this.props.workMode,\r\n        images: {\r\n            buttonSearchDisabled: false,\r\n            selectedItem: null, \r\n            showUrl: null, \r\n            images: null,\r\n            urlFull: null,\r\n            imageBoxView: false, \r\n            error: ''\r\n        },\r\n        newProject: {\r\n            validateName: false,\r\n            validateType: false,\r\n            disabled: true,\r\n            name: '',\r\n            type: 'empty'\r\n        },\r\n        imageMenuActive: false,\r\n        warning: {\r\n            lengthMax: 'Max length: 20 symbols',\r\n            lengthMin: 'Min length: 4 symbol',\r\n            type: 'Select type of webpage',\r\n        }\r\n    }\r\n\r\n    inputSearch = null;\r\n    inputSelect = null;\r\n\r\n    searchBackground = event => {\r\n\r\n        const api = 'https://api.unsplash.com/search/photos/?page=1&per_page=40&query=';\r\n        const search = this.inputSearch.value;\r\n\r\n        this.setState({...this.state, images: {...this.state.inages, buttonSearchDisabled: true}})\r\n\r\n        isFetch(`${api + search}&client_id=${process.env.REACT_APP_UNSPLASH_TOKEN}`)\r\n        .then(response => {\r\n            if (response.ok) return response.json();\r\n            else throw new Error('request invalid');\r\n        })\r\n        .then(response => {\r\n\r\n            let {results} = response;\r\n            if (results.length)\r\n            this.setState({\r\n                ...this.state,\r\n                images: {\r\n                    ...this.state.images,\r\n                    imageBoxView: true,\r\n                    error: '',\r\n                    images: [...results],\r\n                    buttonSearchDisabled: false\r\n                },\r\n            });\r\n            else throw new Error('Photos not found');\r\n        })\r\n        .catch(error => {\r\n            console.error(error.message);\r\n            this.setState({\r\n                ...this.state,\r\n                images: {...this.state.images, error: error.message},\r\n                imageBoxView: false,\r\n                buttonSearchDisabled: false\r\n            });\r\n        });\r\n    }\r\n\r\n    showMenuImage = event => {\r\n        this.setState({\r\n            ...this.state, \r\n            imageMenuActive: true,\r\n            images: {\r\n                ...this.state.images,\r\n                selectedItem: event.id, \r\n                showUrl: event.url,\r\n                urlFull: event.urlFull\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    showImage = event => {\r\n\r\n        const {showUrl} = this.state.images;\r\n        eventEmitter.emit(\"EventImageView\", {action: true, target: showUrl ? showUrl : null});\r\n        event.stopPropagation();\r\n    }\r\n\r\n    setSelectedImage = event => {\r\n\r\n        let images = {...this.state.images};\r\n        eventEmitter.emit(`EventSetBackgroundImage${this.props.idComponent}`,images);\r\n        eventEmitter.emit(`EventSetBImageInstumentPanel`,images);\r\n        event.stopPropagation();\r\n    };\r\n\r\n    makeImageResultBox = (items) => {\r\n        if (!items) return null;\r\n        console.log('item');\r\n        return items.map((item,i) =>{\r\n           return <ImageItem \r\n                key = {`item${i}`} \r\n                id = {i}\r\n                selected = {this.state.images.selectedItem === i ? true : false} \r\n                isFull = {false}\r\n                urls = {{...item.urls}} \r\n            />\r\n        });\r\n    }\r\n\r\n    addNewProject = (event) => {\r\n        let mode = this.state[this.state.workMode];\r\n        if (mode.validateType &&  mode.validateName) {\r\n            eventEmitter.emit('EventAddProject',\r\n            {\r\n                title: this.state[this.state.workMode].name,\r\n                type: this.state[this.state.workMode].type\r\n            });\r\n\r\n            eventEmitter.emit('EventChangeWorkMode',{action: 'default'});\r\n        }\r\n    }\r\n\r\n    selectOption = (event) => {\r\n\r\n        let inputs = {...this.state[this.state.workMode]};\r\n        inputs.type = event.target.value;\r\n        inputs.validateType = inputs.type !== 'empty';\r\n        inputs.disabled = inputs.validateType && inputs.validateName ? false : true;\r\n        this.setState({\r\n            ...this.state,\r\n            [this.state.workMode]: inputs\r\n        });\r\n    }\r\n\r\n    validateName = (event) => {\r\n\r\n        let inputs = {...this.state[this.state.workMode]};\r\n        inputs.name = event.target.value;\r\n        let lengthInput = inputs.name.length;\r\n        inputs.validateName = lengthInput >= 4 && lengthInput < 20 ? true : false;\r\n        inputs.disabled = inputs.validateType && inputs.validateName ? false : true;\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            [this.state.workMode]: inputs\r\n        })\r\n    };\r\n\r\n    cancel = (event) => {\r\n\r\n        if (this.state.workMode === 'Search')\r\n            eventEmitter.emit(\"EventModalSearchOn\");\r\n        else  eventEmitter.emit('EventChangeWorkMode',{action: 'default'});\r\n    }\r\n\r\n    refSelect = (node) => this.inputSelect = node;\r\n    refSearch = node => this.inputSearch = node;\r\n\r\n    render(){\r\n\r\n        switch (this.state.workMode){\r\n            case 'newProject':\r\n                return (\r\n                    <div className = 'Modal'>\r\n                        <h3>Create new Project</h3>\r\n                        { this.state[this.state.workMode].name.length <= 3 ?\r\n                            <span className = 'warning'>{this.state.warning.lengthMin}</span> : null\r\n                        }\r\n                        { this.state[this.state.workMode].name.length >= 20 ?\r\n                            <span className = 'warning'>{this.state.warning.lengthMax}</span> : null\r\n                        }\r\n                        <input\r\n                            className = {this.state[this.state.workMode].validateName ? 'ready' : 'wrong'}\r\n                            value = {this.state[this.state.workMode].name}\r\n                            onChange = {this.validateName}\r\n                            type = 'text'\r\n                            placeholder = \"Project name\"\r\n                        />\r\n                        { !this.state[this.state.workMode].validateType ?\r\n                            <span className = 'warning'>{this.state.warning.type}</span> : null\r\n                        }\r\n                        <select onChange = {this.selectOption} >\r\n                            <option value = 'empty'>--------</option>\r\n                            <option value = 'landing'>Landing</option>\r\n                            <option value = 'portfolio'>Portfolio</option>\r\n                        </select>\r\n                        <input \r\n                            onClick = {this.addNewProject}\r\n                            className = 'acceptButton'\r\n                            disabled = {this.state[this.state.workMode].disabled}\r\n                            type = 'button'\r\n                            value = 'Submit'\r\n                        />\r\n                            <input onClick = {this.cancel} type ='button' value = 'Cancel' />\r\n                    </div>\r\n                )\r\n            case 'Search':\r\n                console.log('Search render');\r\n                return (\r\n                    <Fragment>\r\n                        <div className = 'Modal Modal-search'>\r\n                            <h3>Search background image</h3>\r\n                            { this.state.images.error ?\r\n                                <span className = 'error'>{this.state.images.error}</span> : null\r\n                            }\r\n                            <input ref = {this.refSearch} type = 'text' placeholder = \"Photo name\" />\r\n                            <input \r\n                                disabled = {this.state.images.buttonSearchDisabled} \r\n                                className = 'acceptButton' \r\n                                type = 'button' \r\n                                value = 'Search'\r\n                                onClick = {this.searchBackground}\r\n                            />\r\n                            <input onClick = {this.cancel} type ='button' value = 'Cancel' />\r\n                            {\r\n                                this.state.images.imageBoxView ?\r\n                                <div className = 'searchResultBox'>\r\n                                    {this.makeImageResultBox([...this.state.images['images']])}\r\n                                </div>\r\n                                : null\r\n                            }\r\n                        </div>\r\n                        {  this.state.imageMenuActive ?\r\n                            <div className = 'ActionModalSearch'>\r\n                            <button onClick = {this.showImage} className = 'actionModalSearch__view'>\r\n                                <Icon path = '/img/view.png' />\r\n                            </button>\r\n                            <button onClick = {this.setSelectedImage} className = 'actionModalSearch__settings'>\r\n                                <Icon path = '/img/settings.png' />\r\n                            </button>\r\n                            </div>\r\n                            : null\r\n                        }\r\n                    </Fragment>\r\n                )\r\n            default: return <Fragment></Fragment>\r\n        }\r\n    }\r\n\r\n    componentDidMount = event => {\r\n        if (this.state.workMode === 'Search')\r\n            eventEmitter.on('EventShowMenuImage', this.showMenuImage);\r\n    }\r\n\r\n    componentWillUnmount = event => {\r\n        if (this.state.workMode === 'Search')\r\n            eventEmitter.off('EventShowMenuImage', this.showMenuImage);\r\n    }\r\n}\r\n\r\nexport default ModalWindow;\r\n\r\n","import {createProjectAction, errorAction} from '../actions';\r\n\r\n\r\nconst middlewareCreateProject = (uid, list, title, type) => async (dispatch,getState, {firebase}) => {\r\n    let lastProject = [...list];\r\n    const lastIndex = lastProject.length  ? lastProject[lastProject.length-1].id + 1 : 0;\r\n    lastProject.push({\"id\": lastIndex, \"title\": title, \"type\": type, component: []});\r\n\r\n    await firebase.db.collection(\"users\").doc(uid).update({\r\n        'projects': lastProject,\r\n    })\r\n    .then (() => dispatch(createProjectAction(lastProject)))\r\n    .catch(error => {\r\n        console.error(error.message);\r\n        dispatch(errorAction(error.message));\r\n    })\r\n};\r\n\r\nexport {\r\n    middlewareCreateProject\r\n}","import React, {useState} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport {withRouter, Redirect} from 'react-router-dom';\r\n\r\nfunction Item(props) {\r\n\r\n    const [path] = useState(process.env.PUBLIC_URL + `/Cabinet/Build/${props.id}`);\r\n\r\n    let [canBuild,setCanBuild] = useState(false);\r\n\r\n    const [id] = useState(props.id);\r\n    const [name] = useState(props.name);\r\n    const [type] = useState(props.type);\r\n\r\n\r\n    const build = event => {\r\n        if(props.location.pathname !== path)\r\n            setCanBuild(true);\r\n        event.stopPropagation();\r\n    };\r\n\r\n    const deleteItem = event => {\r\n        eventEmitter.emit('EventDeleteItem',{id: props.id, name: props.name, type: props.type});\r\n        event.stopPropagation();\r\n    };\r\n\r\n    if (canBuild) return <Redirect to = {path} />\r\n    else return (\r\n            <div className = 'item' data-id = {id}>\r\n                <p className = 'ProjectName'>{name}</p>\r\n                <p className = 'ProjectType'>{type}</p>\r\n                <div className = 'projectController'>\r\n                <input onClick = {build} className = 'projectControllerButton_enter' type = 'button' value = 'enter build' />\r\n                <input onClick = {deleteItem} className = 'projectControllerButton_delete' type = 'button' value = 'delete' />\r\n                </div>\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default withRouter(Item);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {middlewareCreateProject} from '../../redux/middleware/createProjectMiddleware';\r\n\r\nimport './list.scss';\r\n\r\nimport Item from './Item';\r\nimport eventEmitter from '../../EventEmitter.js';\r\n\r\nclass List extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        children: PropTypes.shape({\r\n            projects: PropTypes.array.isRequired,\r\n           count: PropTypes.number.isRequired,\r\n        }),\r\n        list: PropTypes.array.isRequired,\r\n    }\r\n\r\n    state = {\r\n        redirect: false,\r\n    }\r\n\r\n    addNewProject = (item) => {\r\n        if (this.props.idUser) {\r\n            this.props.dispatch(middlewareCreateProject(this.props.idUser, this.props.list, item.title, item.type));\r\n        } else this.setState({...this.state, redirect: true});\r\n    }\r\n\r\n\r\n    makeList = (list) => {\r\n\r\n        return list.map (project => {\r\n\r\n            return(\r\n                <Item\r\n                    key = {project.id}\r\n                    id = {project.id}\r\n                    name = {project.title}\r\n                    type = {project.type}\r\n                />\r\n            )\r\n        });\r\n    }\r\n\r\n    render(){\r\n        if (this.state.redirect)\r\n            return <Redirect to = {process.env.PUBLIC_URL + '/'} />\r\n            else return (\r\n                    <div className = 'projectsList__list'>\r\n                        {this.makeList([...this.props.list])}\r\n                    </div>\r\n                )\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        eventEmitter.on('EventAddProject',this.addNewProject);\r\n    }\r\n\r\n      componentWillUnmount = () => {\r\n        eventEmitter.off('EventAddProject',this.addNewProject);\r\n      }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        idUser: state.cabinet.idUser,\r\n        list: [...state.cabinet.projects]\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(List);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nimport List from '../List/List.jsx';\r\n\r\nimport './ProjectsSection.scss';\r\n\r\nclass ProjectsSection extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        projects: PropTypes.array,\r\n    }\r\n\r\n    render(){\r\n        return (\r\n                <section className = 'projectsList'>\r\n                <div className = 'container'>\r\n                <div className = 'flex-column'>\r\n                        <div className = 'projectsList__about'>\r\n                            <h3>Your Projects</h3>\r\n                        </div>\r\n                        <List />\r\n                    </div>\r\n                </div>\r\n                </section>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default ProjectsSection;","import React,{Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport eventEmitter from '../../EventEmitter.js';\nimport {Redirect} from 'react-router-dom';\nimport withFirebase from '../../components/firebaseHOC';\n\nimport {middlewareLogOutUser} from '../../redux/middleware/loadUserMiddleware';\nimport middlewareDelete from '../../redux/middleware/middlewareDelete';\nimport Loader from '../../components/loading/Loader';\nimport {connect} from 'react-redux';\n\nimport Header from '../../components/header/Header';\nimport Modal from '../../components/modalWindow/ModalWindow';\nimport ProjectsSection from '../../components/ProjectsSection/ProjectsSection';\n\nimport './Cabinet.scss';\n\nconst title = require('../../config.json').title;\n\nclass Cabinet extends React.PureComponent {\n\n  static propTypes = {\n    firebase: PropTypes.object.isRequired\n  }\n\n  state = {\n    workMode: 'default',\n  }\n\n  logOut = event => {\n    this.props.dispatch(middlewareLogOutUser(this.props.idUser));\n  }\n\n  deletItem = event => {\n    this.props.dispatch(middlewareDelete({...event, uid: this.props.firebase.getCurrentUser().uid}));\n  }\n\n  changeWorkMode = event => {\n    this.setState ({\n      ...this.state,\n      workMode: event.action,\n    });\n  }\n\n  render(){\n    if (this.props.active){\n      console.log('CAbinet');\n      return (\n        <Fragment>\n          <Header title = {title} idUser = {this.props.idUser} />\n          {(this.state.workMode === 'newProject') ? <Modal workMode = {this.state.workMode} /> : null}\n            <ProjectsSection />\n        </Fragment>\n      )\n    } else if (!this.props.firebase.getCurrentUser()) return <Redirect to = {process.env.PUBLIC_URL + '/'} />\n    else return <Loader path = '/img/loading.gif' type = 'Cabinet' />\n    }\n\n\n  componentDidMount = () => {\n    eventEmitter.on('EventDeleteItem', this.deletItem);\n    eventEmitter.on('EventChangeWorkMode', this.changeWorkMode);\n  }\n\n  componentWillUnmount = () => {\n    eventEmitter.off('EventDeleteItem', this.deletItem);\n    eventEmitter.off('EventChangeWorkMode', this.changeWorkMode);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    idUser: state.cabinet.idUser,\n    projects: [...state.cabinet.projects],\n    active: state.cabinet.active\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(withFirebase(Cabinet));\n","import React, {Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport withFirebase from '../../components/firebaseHOC';\r\nimport Header from '../../components/header/Header';\r\n\r\nimport './about.scss';\r\n\r\nclass About extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        config: PropTypes.object.isRequired,\r\n        firebase: PropTypes.object.isRequired,\r\n    }\r\n\r\n    state = {\r\n        config: this.props.config\r\n    };\r\n\r\n    render(){\r\n        if (this.props.firebase.getCurrentUser()) {\r\n            const { config } = this.state;\r\n            return (\r\n                <Fragment>\r\n                    <Header title = {config.title} />\r\n                    <section className = 'About'>\r\n                        <div className = 'container'>\r\n                            <div className = 'col-12'>\r\n                                <div className = 'information'>\r\n                                <img alt = 'img' className = 'logoAbout' src = {process.env.PUBLIC_URL + '/img/about.jpg'}/>\r\n                                    <p className ='developer'><span>Developer:</span> {config.about.developer}</p>\r\n                                    <p className = 'year'><span>Year:</span> {config.about.year}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n                </Fragment>\r\n            )\r\n        } else return <Redirect to = {process.env.PUBLIC_URL + '/'} />\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default withFirebase(About);","import {errorAction, loadUpdateCurrentProject} from '../actions';\r\n\r\nconst updateMiddleware = (item) => async (dispatch,getState, {firebase}) => {\r\n    console.log('update');\r\n\r\n    let newProjects = item.projects.map(project => {\r\n        if (project.id === item.idProject) { project.component = [...item.component] }\r\n        return project;\r\n    });\r\n    await firebase.db.collection(\"users\").doc(item.uid).update({\r\n        'projects': JSON.parse(JSON.stringify(newProjects))\r\n    })\r\n    .then(response => {\r\n        let project = item.projects.find(itemdb => itemdb.id === item.idProject);\r\n        dispatch(loadUpdateCurrentProject({component: [...project.component], idProject: item.idProject}))\r\n    })\r\n    .catch(error => dispatch(errorAction(error.message)));\r\n};\r\n\r\nexport default updateMiddleware;","import React,{useState} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nimport './imageViewer.scss';\r\n\r\nfunction ImageViewer(props){\r\n\r\n    let [path] = useState(props.path);\r\n\r\n    const closeViewer = event => {\r\n        eventEmitter.emit(\"EventImageView\", { action: false, target: null});\r\n        event.stopPropagation();\r\n    }\r\n\r\n    return (\r\n        <div onClick = {closeViewer} className = 'ImageViewer'>\r\n            <img src = {path} alt = 'fullImage' />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageViewer;","import React, {Fragment} from 'react';\r\nimport eventEmitter from '../../EventEmitter';\r\nimport PropTypes from 'prop-types';\r\nimport { SketchPicker } from 'react-color';\r\nimport './instrumentsPanel.scss';\r\n\r\nimport Icon from '../Icon/icon';\r\n\r\nclass InstrumentsPanel extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        instrumentPanel:  PropTypes.object.isRequired,\r\n        editComponent: PropTypes.object.isRequired\r\n    };\r\n\r\n    state = {\r\n        instrumentPanel: {...this.props.instrumentPanel},\r\n        componentsStats: {\r\n            content: null,\r\n            fontSize: null,\r\n            color: null,\r\n            backgroundImage: null,\r\n            image: null,\r\n            coords: {left: null, top: null} // x, y\r\n        },\r\n        images: null,\r\n    };\r\n\r\n    updateSizeText = eventSize => {\r\n        this.setState({\r\n            ...this.state, \r\n            instrumentPanel: {...this.state.instrumentPanel},\r\n            componentsStats: {...this.state.componentsStats, fontSize: eventSize}\r\n        });\r\n    };\r\n\r\n    closePanel = event => {\r\n        eventEmitter.emit('EventClosePanel', {close: false});\r\n    };\r\n\r\n    setSize = event => {\r\n        // let {fontSize} = this.state.componentsStats;\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        let size = event.target.value > 200 ? 200 : event.target.value;\r\n        this.setState({\r\n            ...this.state, \r\n            instrumentPanel: {...this.state.instrumentPanel},\r\n            componentsStats: {...this.state.componentsStats,fontSize: size}\r\n        },\r\n            () => eventEmitter.emit(`EventChangeSizeText${idComponent}`, {size: size })\r\n        );\r\n\r\n        event.stopPropagation();\r\n    };\r\n\r\n    setContent = event => {\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        let contentValue = event.target.value;\r\n        this.setState({\r\n            ...this.state, \r\n            instrumentPanel: {...this.state.instrumentPanel},\r\n            componentsStats: {...this.state.componentsStats,content: contentValue}\r\n        },\r\n        () => eventEmitter.emit(`EventChangeContentText${idComponent}`,{content: contentValue}));\r\n        event.stopPropagation();\r\n    };\r\n\r\n    updatePosition = eventItem => {\r\n\r\n        this.setState({\r\n            ...this.state, \r\n            componentsStats: {\r\n                ...this.state.componentsStats,\r\n                coords: {\r\n                    ...this.state.componentsStats.coords,\r\n                    left: eventItem.x,\r\n                    top: eventItem.y\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    setColor = event => {\r\n        this.setState({...this.state,\r\n            instrumentPanel:{\r\n                ...this.state.instrumentPanel,\r\n                colorPickerActive: this.state.instrumentPanel.colorPickerActive ? false : true\r\n            }\r\n        });\r\n        event.stopPropagation();\r\n    };\r\n\r\n    updateBimageStats = eventItem => {\r\n        const {urlFull} = eventItem;\r\n        this.setState({\r\n            ...this.state,\r\n            componentsStats:{\r\n                ...this.state.componentsStats,\r\n                backgroundImage: urlFull\r\n            }\r\n        });\r\n    };\r\n\r\n    handleChangeComplete = event => {\r\n\r\n        const {rgb} = event;\r\n        let colorRGB = `rgb(${rgb.r},${rgb.g},${rgb.b},${rgb.a})`;\r\n\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        if (this.state.instrumentPanel.target === 'background'){\r\n            this.setState({\r\n                ...this.state,\r\n                componentsStats: {...this.state.componentsStats,color: colorRGB}\r\n            }, () => eventEmitter.emit(`EventChangeColorBackground${idComponent}`, colorRGB));\r\n        }\r\n\r\n        else if (this.state.instrumentPanel.target === 'text') {\r\n            this.setState({\r\n                ...this.state,\r\n                componentsStats: {...this.state.componentsStats,color: colorRGB}\r\n            },\r\n            () => eventEmitter.emit(`EventChangeColorText${idComponent}`, colorRGB));\r\n        }\r\n\r\n    };\r\n\r\n    saveChanges = event => {\r\n        eventEmitter.emit(\"EventSaveChangesComponent\", {\r\n            ...this.state.componentsStats,\r\n            type: this.state.instrumentPanel.target\r\n        });\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    searchImage = event => {\r\n\r\n        let {idComponent} = this.state.instrumentPanel;\r\n        eventEmitter.emit('EventModalSearchOn', {idComponent: idComponent});\r\n\r\n        event.stopPropagation();\r\n    };\r\n\r\n    makePanelInstruments = (type) => {\r\n\r\n        let {colorPickerActive} = this.state.instrumentPanel;\r\n        let {fontSize} = this.state.componentsStats;\r\n            switch (type){\r\n                case 'text':\r\n                    return (\r\n                        <Fragment>\r\n                        <p className = 'titleInstument'>Color: </p>\r\n                        <input onClick = {this.setColor} className = 'button_switchColor' type = 'button' value = 'color pick' />\r\n                        <p className = 'titleInstument'>Text size: </p>\r\n                        <input \r\n                            onChange = {this.setSize} \r\n                            type=\"number\"\r\n                            min = '10' max = '200'\r\n                            value = {fontSize ? fontSize : 120 }\r\n                        />\r\n                            { colorPickerActive ?\r\n                                <SketchPicker\r\n                                onChangeComplete={this.handleChangeComplete}\r\n                                />\r\n                                : null\r\n                            }\r\n                        <p className = 'titleInstument'>Content: </p>\r\n                        <input onChange = {this.setContent} maxLength = '20' type = 'text' defaultValue = 'Title' />\r\n                        <input onClick = {this.saveChanges} className = 'saveButtonInstument' type = 'button' value = 'save changes' />\r\n                        </Fragment>\r\n                )\r\n                case 'background': \r\n                    return (\r\n                        <Fragment>\r\n                        <p className = 'titleInstument'>Color: </p>\r\n                        <input onClick = {this.setColor} className = 'button_switchColor' type = 'button' value = 'color pick' />\r\n                            { colorPickerActive ?\r\n                                <SketchPicker\r\n                                onChangeComplete={this.handleChangeComplete}\r\n                                />\r\n                                : null\r\n                            }\r\n                            <input onClick = {this.searchImage} className = 'ImageSearchButton' type = 'button' value = 'background-image' />\r\n                            <input onClick = {this.saveChanges} className = 'saveButtonInstument' type = 'button' value = 'save changes' />\r\n                        </Fragment>\r\n                    )\r\n                default: return <p className = 'warningInstruments'>Select elements for accses edit instruments</p>\r\n            }\r\n    };\r\n\r\n    componentDidUpdate = (oldProps, oldState) => {\r\n        let targetBool = oldState.instrumentPanel.target !== this.props.instrumentPanel.target;\r\n        let idBool = oldState.instrumentPanel.idComponent !== this.props.instrumentPanel.idComponent;\r\n        console.log(this.props.instrumentPanel);\r\n        if (idBool || targetBool)\r\n            this.setState({\r\n                ...this.state,\r\n                instrumentPanel: {...this.props.instrumentPanel, colorPickerActive: false},\r\n                componentsStats: {\r\n                    content: null, fontSize: null, color: null,\r\n                    backgroundImage: null, image: null,\r\n                    coords: {left: null, top: null} // x, y\r\n                },\r\n            })\r\n    };\r\n\r\n    componentDidMount = event => {\r\n        eventEmitter.on(\"EventUpdateSizeText\", this.updateSizeText);\r\n        eventEmitter.on(\"EventSetBImageInstumentPanel\", this.updateBimageStats);\r\n        eventEmitter.on(\"EventUpdatePosition\", this.updatePosition);\r\n    };\r\n\r\n    componentWillUnmount = event => {\r\n        eventEmitter.off(\"EventUpdateSizeText\", this.updateSizeText);\r\n        eventEmitter.off(\"EventUpdatePosition\", this.updatePosition);\r\n    };\r\n\r\n    render(){\r\n        let { instrumentActive } = this.state.instrumentPanel;\r\n        return (\r\n            <Fragment>\r\n                <div  className = 'instumentsPanel'>\r\n                <button onClick = {this.closePanel} className = 'closeInstrumentsPanel'><Icon path = '/img/close.svg' /></button>\r\n                    <h3>Instruments</h3>\r\n                    {\r\n                        instrumentActive ? \r\n                        <p className = 'TextComponent'>{this.state.instrumentPanel.target}</p>\r\n                        : null\r\n                    }\r\n                    {\r\n                        instrumentActive ?\r\n                        <div  className= 'instuments'>{this.makePanelInstruments(this.state.instrumentPanel.target)}</div>\r\n                        : null\r\n                    }\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    };\r\n};\r\n\r\nexport default InstrumentsPanel;","import React, {useEffect, useState} from 'react';\r\nimport eventEmitter from '../../../EventEmitter';\r\nimport styled from 'styled-components';\r\n\r\n\r\nconst Background = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 95vh;\r\n    background-size: cover;\r\n    background-color: ${props => props.backgroundColor};\r\n    background-image: url(${props => props.backgroundImage});\r\n`;\r\n\r\nconst BackgroundComponent = props => {\r\n\r\n    const [id] = useState(props.id);\r\n\r\n    const [count, setCount] = useState(0);\r\n    let boxComponent = React.createRef();\r\n\r\n    let [backgroundColor, setBgColor] = useState(props.background);\r\n    let [backgroundImage, setImage] = useState(props.backgroundImage ? props.backgroundImage : null);\r\n\r\n    const saveWidth = event => {\r\n        setCount(count + 1);\r\n        boxComponent.current.focus();\r\n        let boxInform =  boxComponent.current.getBoundingClientRect();\r\n        eventEmitter.emit('EventSaveWidth', {width: boxInform.width, height: boxInform.height});\r\n    }\r\n\r\n    const openBgInstruments = event => {\r\n        console.log(Background);\r\n        eventEmitter.emit('EventInstrumentPanel',{\r\n            target: 'background',\r\n            id: id,\r\n        });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const changeColor = color => {\r\n        setBgColor(color);\r\n    }\r\n\r\n    const setBackgroundImage = event => {\r\n        const {urlFull} = event;\r\n        setImage(urlFull);\r\n    };\r\n\r\n    const didUpdate = () => {\r\n        console.log('didUpdate');\r\n        if (count === 0 ) saveWidth();\r\n        eventEmitter.on(`EventChangeColorBackground${id}`, changeColor);\r\n        eventEmitter.on(`EventSetBackgroundImage${id}`, setBackgroundImage);\r\n        return () => {\r\n            eventEmitter.off(`EventChangeColorBackground${id}`, changeColor);\r\n            eventEmitter.off(`EventSetBackgroundImage${id}`, setBackgroundImage);\r\n        }\r\n    }\r\n\r\n    useEffect(didUpdate);\r\n    return (\r\n        <Background\r\n            ref  = {boxComponent}\r\n            onClick={openBgInstruments}\r\n            backgroundColor = {backgroundColor}\r\n            backgroundImage = {backgroundImage}\r\n        >\r\n            {props.children}\r\n        </Background>\r\n    )\r\n}\r\n\r\nexport default BackgroundComponent;","\r\nimport React, {useEffect, useState} from 'react';\r\nimport eventEmitter from '../../../EventEmitter';\r\nimport styled from 'styled-components';\r\n\r\n\r\nconst Title = styled.h1.attrs(props => ({\r\n    style: {\r\n        display: props.shadowDisplay ? 'none' : 'block',\r\n        left: props.coordX ? props.coordX : '50%',\r\n        top:  props.coordY,\r\n}}))`\r\n    position: absolute;\r\n    transform: translate(-50%);\r\n    font-size: ${props => props.size};\r\n    color: ${props => props.textColor};\r\n    text-align: center;\r\n    margin: 0;\r\n`;\r\n\r\n// left: ${props => props.coordX ? props.coordX : '50%'};\r\n// top:  ${props => props.coordY};\r\n\r\nconst TextComponent = props =>  {\r\n\r\n    const [id] = useState(props.id);\r\n\r\n    console.log ('text');\r\n    const [sizeParenBox] = useState({...props.sizeParenBox});\r\n\r\n    let [colorText, setColorText] = useState(props.color);\r\n    let [sizeText, setSizeText] = useState(props.size ? props.size : 120);\r\n    let [contentText, setText] = useState(props.children);\r\n    const [shiftCoords, setShiftCoords] = useState(null)\r\n    const [dragNdrop, setDragNdrop] = useState(null);\r\n\r\n    const openTitleInstruments = event => {\r\n\r\n        eventEmitter.emit(`EventInstrumentPanel`,{\r\n            target: 'text',\r\n            id: id,\r\n            sizeTextValue: sizeText\r\n        });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const changeColorText = color => {\r\n        setColorText(color);\r\n    }\r\n\r\n    const changeSizeText = eventSize => {\r\n        const {size} = eventSize;\r\n        setSizeText(size);\r\n    }\r\n\r\n    const changeContentText = eventContent => {\r\n        const {content} = eventContent;\r\n        setText(content);\r\n    }\r\n\r\n\r\n    const didUpdate = event => {\r\n        eventEmitter.on(`EventChangeColorText${id}`, changeColorText);\r\n        eventEmitter.on(`EventChangeSizeText${id}`, changeSizeText);\r\n        eventEmitter.on(`EventChangeContentText${id}`, changeContentText);\r\n        return () => {\r\n            eventEmitter.off(`EventChangeColorText${id}`, changeColorText);\r\n            eventEmitter.off(`EventChangeSizeText${id}`, changeSizeText);\r\n            eventEmitter.off(`EventChangeContentText${id}`, changeContentText);\r\n        }\r\n    }\r\n\r\n    const saveCoords = event => {\r\n\r\n        let rect = event.target.getBoundingClientRect();\r\n        let left = rect.left;\r\n        let top = rect.top;\r\n        let width = rect.width;\r\n        let height = rect.height;\r\n        setShiftCoords({x: event.pageX - left - width/2, y: event.pageY - top + height/2.8});\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const moveText = event => {\r\n\r\n        let coordX = event.pageX - shiftCoords.x;\r\n        let coordY = event.pageY - shiftCoords.y;\r\n        console.log(Title);\r\n        coordX = coordX <= 130 ? 130 : coordX;\r\n        coordY = coordY <= 0 ? 0 : coordY;\r\n        console.log(sizeParenBox);\r\n        let convertToPercentX = (coordX * 100) / sizeParenBox.width;\r\n        let convertToPercentY = (coordY * 100) / sizeParenBox.height;\r\n\r\n        const position = {\r\n            x: convertToPercentX + '%', \r\n            y: convertToPercentY + '%', \r\n            shadowDisplay: event.type === 'drag' ? true : false\r\n        };\r\n        setDragNdrop(position);\r\n        \r\n        if (event.type === 'dragend') \r\n            eventEmitter.emit('EventUpdatePosition', position);\r\n        event.stopPropagation();\r\n    }\r\n\r\n    const weelResizeText = event => {\r\n\r\n        if (event.shiftKey && event.deltaY === -100) {\r\n            let counter = sizeText + 1;\r\n            counter = counter > 200 ? 200 : counter;\r\n            setSizeText(counter);\r\n            eventEmitter.emit('EventUpdateSizeText', counter);\r\n        }\r\n\r\n        if (event.shiftKey && event.deltaY === 100) {\r\n            let counter = sizeText - 1;\r\n             counter = counter <= 10 ? 10 : counter;\r\n             setSizeText(counter);\r\n             eventEmitter.emit('EventUpdateSizeText', counter);\r\n            }\r\n        event.stopPropagation();\r\n    }\r\n    useEffect(didUpdate);\r\n\r\n    return (\r\n        <Title\r\n            onClick={openTitleInstruments}\r\n            textColor = {colorText ? colorText : 'red'}\r\n            size = {sizeText ? sizeText + 'px' : '120px'}\r\n            draggable = {true}\r\n            onMouseDown = {saveCoords}\r\n            onDrag   = {moveText}\r\n            onDragEnd = {moveText}\r\n            onWheel = {weelResizeText}\r\n            coordX = {dragNdrop ? dragNdrop.x : null}\r\n            coordY = {dragNdrop ? dragNdrop.y : null}\r\n            shadowDisplay = {dragNdrop ? dragNdrop.shadowDisplay : false}\r\n        >\r\n            {contentText}\r\n        </Title>\r\n    )\r\n}\r\n\r\nexport default TextComponent;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport TextComponent from '../buildComponents/components/Text';\r\nimport BackgroundComponent from '../buildComponents/components/Background';\r\n\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nimport './buildMenu.scss';\r\n\r\nclass BuildMenu extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        component: PropTypes.object\r\n    }\r\n\r\n    state = {\r\n        component: {...this.props.component},\r\n        sizeParenBox: {...this.props.sizeParenBox},\r\n        title: 'Title'\r\n    }\r\n\r\n    addText = event => {\r\n        let id = this.props.countComponents;\r\n        let component = [<TextComponent sizeParenBox = {{...this.props.sizeParenBox}} id = {id} key = {`text${id}`}>{this.state.title}</TextComponent>];\r\n        eventEmitter.emit('EventBuildHeaderComponents',{target: 'Header', type: 'text', component: component});\r\n        event.stopPropagation();\r\n    }\r\n\r\n    addBackground = event => {\r\n        let id = this.props.countComponents;\r\n        let background = [<BackgroundComponent id = {id} key = {`bg${id}`}/>];\r\n        eventEmitter.emit('EventBuildHeaderComponents',{target: 'Header', type: 'background', component: background});\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render(){\r\n        console.log('menuBuild');\r\n        return (\r\n            <div className = 'ComponentsMenu'>\r\n                <button onClick = {this.addBackground} className = 'ImageTool CompoentnsMenu_button' ><span>Image</span></button>\r\n                <button onClick = {this.addText} className = 'TextTool CompoentnsMenu_button' ><span>Text</span></button>\r\n                <button \r\n                    disabled = {this.state.component.name !== 'Header' ? false : true}\r\n                    className = 'ButtonTool CompoentnsMenu_button' >\r\n                    <span>Button</span>\r\n                </button>\r\n                <button className = 'VideoTool CompoentnsMenu_button' ><span>Video</span></button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BuildMenu;","import React,{Fragment} from 'react';\r\nimport styled from 'styled-components';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Icon from '../Icon/icon';\r\nimport BuildMenu from '../componentsBuildMenu/BuildMenu';\r\n\r\n\r\nconst ControllersBox = styled.div\r\n    .attrs(props =>({\r\n        style: {\r\n                left: props.coordX,\r\n                top: props.coordY,\r\n        }\r\n    })) `\r\n    position: absolute;\r\n    display: ${props => props.shadowDisplay}\r\n    `;\r\n\r\nclass Controllers extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        menuActive: PropTypes.bool,\r\n    }\r\n\r\n    state = {\r\n        viewComponentMenu: false,\r\n        shiftX: 0,\r\n        shiftY: 0,\r\n        coordsX: '50%',\r\n        coordsY: '0',\r\n        shadowDisplay: 'block'\r\n    }\r\n\r\n    componentMenu = (event) => {\r\n        this.setState({viewComponentMenu: this.state.viewComponentMenu ? false : true});\r\n        event.stopPropagation();\r\n    }\r\n\r\n    saveCoords = event => {\r\n        let left = this.controlBox.getBoundingClientRect().left;\r\n        let top = this.controlBox.getBoundingClientRect().top;\r\n        this.setState({...this.state, shiftX: event.pageX - left, \r\n        shiftY: event.pageY - top + 55 });\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    drag = event => {\r\n        if (!this.state.viewComponentMenu)\r\n            this.setState({\r\n                ...this.state,\r\n                coordsX: event.pageX - this.state.shiftX + 'px', \r\n                coordsY: event.pageY - this.state.shiftY + 'px',\r\n                shadowDisplay: event.type === 'drag' ? 'none' : 'block'\r\n            });\r\n        event.stopPropagation();\r\n    }\r\n\r\n    controlBox = null;\r\n    refControll = (node) => this.controlBox = node;\r\n\r\n\r\n    render(){\r\n        console.log('controllers');\r\n        return (\r\n            <Fragment>\r\n            { this.props.menuActive ?\r\n                <ControllersBox\r\n                ref = {this.refControll}\r\n                className = 'ControllersEditComponent'\r\n                coordX = {this.state.coordsX}\r\n                coordY = {this.state.coordsY}\r\n                draggable = {!this.state.viewComponentMenu}\r\n                onMouseDown = {this.saveCoords}\r\n                onClick = {this.componentMenu}\r\n                onDrag   = {this.drag}\r\n                onDragEnd = {this.drag}\r\n                shadowDisplay = {this.state.shadowDisplay}\r\n                >\r\n                    <Icon\r\n                        draggable = {true}\r\n                        onClick = {this.componentMenu}\r\n                        className = 'addButton'\r\n                        path = '/img/addButton.png'\r\n                    />\r\n                    {this.state.viewComponentMenu ? \r\n                        <BuildMenu\r\n                            sizeParenBox = {this.props.sizeParenBox}\r\n                            countComponents = {this.props.countComponents}\r\n                            component = {{...this.props.component}}\r\n                        /> : null\r\n                    }\r\n                </ControllersBox>\r\n                : null\r\n            }\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n        console.log('componentDidUpdate controllers');\r\n    }\r\n    \r\n    componentDidMount = () => {\r\n        console.log('componentDidMount controllers');\r\n    }\r\n    \r\n}\r\n\r\nexport default Controllers;","import React, {Fragment} from 'react';\r\nimport eventEmitter from '../../../EventEmitter';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nimport BackgroundComponent from '../../buildComponents/components/Background';\r\nimport Controllers from '../../controllers/controllers';\r\n\r\n\r\nimport './headerBuild.scss';\r\n\r\nclass HeaderBuild extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        id: PropTypes.number.isRequired,\r\n    }\r\n\r\n    state = {\r\n        idProject: this.props.id,\r\n        component: {...this.props.children},\r\n        sizeParenBox: null,\r\n    }\r\n\r\n    saveWidth = eventItem => {\r\n        this.setState({sizeParenBox: {...eventItem}});\r\n    };\r\n\r\n\r\n    changeMode = (event) => {\r\n        if (!this.props.editStart) {\r\n            let rect = event.currentTarget.getBoundingClientRect();\r\n            const width = rect.width;\r\n            const height = rect.height;\r\n        eventEmitter.emit('EventModeEdit', {...this.state, width: width, height: height});\r\n        }\r\n    }\r\n\r\n    refBox = null;\r\n    refBackground = node => this.refBox = node;\r\n\r\n    render() {\r\n\r\n        console.log('header');\r\n        console.log(this.props);\r\n        return (\r\n            <Fragment>\r\n                <div onClick = {this.changeMode} className = 'Header'>\r\n                    <BackgroundComponent id = 'MainBackgroundHeader' background = 'grey'>\r\n                    {  this.props.children.build.componentJSX && this.props.children.build.type === 'text'  ?\r\n                            this.props.children.build.componentJSX : null\r\n                    }\r\n                    </BackgroundComponent>\r\n                    {!this.props.editStart ? <p className = 'warningEdit'>Click for start edit</p> : null}\r\n                    {!this.state.readyBuild ? \r\n                        <Controllers\r\n                            countComponents = {this.props.countComponents}\r\n                            menuActive = {this.props.menuActive}\r\n                            component = {{...this.state.component}}\r\n                            sizeParenBox = {this.state.sizeParenBox}\r\n                            mainWidth = {this.props.children.mainBoxWidth}\r\n                            mainHeight = {this.props.children.mainBoxHeight}\r\n\r\n                        />\r\n                        : null}\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n    componentDidMount = event => {\r\n        eventEmitter.on('EventSaveWidth', this.saveWidth);\r\n    }\r\n\r\n    componentWillUnmount = event => {\r\n        eventEmitter.off('EventSaveWidth', this.saveWidth);\r\n    }\r\n}\r\nexport default HeaderBuild;","import React,{Fragment} from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router-dom';\r\nimport eventEmitter from '../../EventEmitter';\r\n\r\nimport {loadCurrentProjectAction, exitProjectAction} from '../../redux/actions';\r\nimport updateMiddleware from '../../redux/middleware/updateMiddleware';\r\nimport withFirebase from '../../components/firebaseHOC';\r\nimport {connect} from 'react-redux';\r\n\r\nimport ImageViewer from '../../components/imageViewer/imageViewer';\r\nimport Loader from '../../components/loading/Loader';\r\nimport Header from '../../components/header/Header';\r\nimport InstrumentsPanel from '../../components/instrumentsPanel/InstrumentsPanel';\r\nimport ModalWindow from '../../components/modalWindow/ModalWindow';\r\nimport HeaderBuild from '../../components/buildComponents/header/headerBuild';\r\n\r\nimport './build.scss';\r\n\r\n\r\nclass Build extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        param: PropTypes.string,\r\n        match: PropTypes.shape({\r\n            params: PropTypes.shape({\r\n                param: PropTypes.string.isRequired\r\n            }).isRequired\r\n        }).isRequired\r\n    }\r\n\r\n    state = {\r\n            idProject: parseInt(this.props.match.params.param),\r\n            editComponent: {\r\n                name: null,\r\n                build: {\r\n                    name: null,\r\n                    target: null,\r\n                    type: null,\r\n                    mainBoxWidth: null,\r\n                    mainBoxHeight: null,\r\n                    component: [],\r\n                    componentJSX: []\r\n                },\r\n                edit: false\r\n            },\r\n            changeEdit: false,\r\n            instrumentPanel: {\r\n                colorPickerActive: false,\r\n                instrumentActive: false,\r\n                target: '',\r\n                idComponent: null,\r\n            },\r\n            menuActive: false,\r\n            editStart: false,\r\n            modalSearch: false,\r\n            modalImageViewer: {action: false, image: null },\r\n        }\r\n\r\n    modalSearchOn = event => {\r\n        this.setState({...this.state, modalSearch: this.state.modalSearch ? false : true});\r\n    }\r\n\r\n    imageViewerSwitch = event => {\r\n        this.setState({\r\n            ...this.state,\r\n            modalImageViewer: {\r\n                ...this.state.modalImageViewer, \r\n                action: event.action, \r\n                target: event.target\r\n            }\r\n        });\r\n    };\r\n\r\n    workModeEdit = itemEvent => {\r\n        if (!this.state.editStart || this.state.changeEdit)\r\n        this.setState({\r\n            ...this.state,\r\n            idProject: itemEvent.idProject,\r\n            editComponent: {\r\n                ...itemEvent.component,\r\n                mainBoxWidth: itemEvent.width,\r\n                mainBoxHeight: itemEvent.height\r\n            },\r\n            menuActive: true,\r\n            editStart: true\r\n        });\r\n\r\n    }\r\n\r\n    openInstrument = itemEvent => {\r\n        let targetEqual = this.state.instrumentPanel.target !== itemEvent.target;\r\n        let {instumentActive} = this.state.instrumentPanel;\r\n        if (targetEqual && this.state.editStart && !instumentActive)\r\n        this.setState({\r\n            ...this.state,\r\n            instrumentPanel: {\r\n                ...this.state.instrumentPanel,\r\n                instrumentActive: true,\r\n                sizeTextValue: itemEvent.sizeTextValue,\r\n                idComponent: itemEvent.id,\r\n                target: itemEvent.target\r\n            }\r\n        })\r\n    }\r\n\r\n    closePanel = event => {\r\n        this.setState({\r\n            ...this.state,\r\n            instrumentPanel: {\r\n                ...this.state.instrumentPanel,\r\n                colorPickerActive: false,\r\n                instrumentActive: event.close\r\n            }\r\n        });\r\n    };\r\n\r\n    addHeaderComponent = itemEvent => {\r\n\r\n        let {componentJSX} = this.state.editComponent.build;\r\n        this.setState({\r\n            ...this.state,\r\n            editComponent: {\r\n                ...this.state.editComponent,\r\n                build: {\r\n                    ...this.state.editComponent.build,\r\n                    target: itemEvent.target,\r\n                    type: itemEvent.type,\r\n                    componentJSX: [...componentJSX, ...itemEvent.component]},\r\n            },\r\n        });\r\n    };\r\n\r\n    saveChangesComponent = itemEvent => {\r\n        console.log(itemEvent);\r\n        let componentSaveInBase = {...itemEvent, name: this.state.editComponent.name};\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            editComponent: {\r\n                ...this.state.editComponent,\r\n                build: {\r\n                    ...this.state.editComponent.build,\r\n                    component: [...this.state.editComponent.build.component, componentSaveInBase]\r\n                }\r\n            }\r\n        }, () => (\r\n        this.props.dispatch(updateMiddleware({\r\n            uid: this.props.idUser,\r\n            projects: [...this.props.currentProject],\r\n            component: [...this.state.editComponent.build.component],\r\n            idProject: this.state.idProject}))\r\n        ));\r\n    };\r\n\r\n\r\n    render(){\r\n        console.log('render build');\r\n        let instrumentActive = this.state.instrumentPanel.instrumentActive;\r\n        if (this.props.active && this.props.loadProject){\r\n            console.log('build');\r\n            return (\r\n                    <Fragment key = 'build'>\r\n                    {   this.state.modalImageViewer.action ?\r\n                        <ImageViewer key = 'ImageViewer' path = {this.state.modalImageViewer.target} /> : null\r\n                    }\r\n                    {this.state.modalSearch ?\r\n                        <ModalWindow\r\n                            idComponent = {this.state.instrumentPanel.idComponent}\r\n                            key = 'ModalWindow' workMode = 'Search' /> : null\r\n                    }\r\n                    { instrumentActive ?\r\n                        <InstrumentsPanel\r\n                            key = 'InstrumentsPanel'\r\n                            editComponent =  {{...this.state.editComponent}}\r\n                            instrumentPanel = {{...this.state.instrumentPanel}}\r\n                        />\r\n                        : null\r\n                    }\r\n                        <Header key = 'Header' title = \"Constructor\"  />\r\n                        <HeaderBuild\r\n                                key = 'HeaderBuild'\r\n                                editStart = {this.state.editStart}\r\n                                countComponents = {this.state.editComponent.build.componentJSX.length}\r\n                                menuActive = {this.state.menuActive}\r\n                                id = {this.state.idProject}\r\n                        >\r\n                            {{...this.state.editComponent, name: 'Header'}}\r\n                        </HeaderBuild>\r\n                    </Fragment>\r\n            )\r\n        } else if (!this.props.firebase.getCurrentUser()) return <Redirect to = {process.env.PUBLIC_URL + '/'} />\r\n        else return <Loader  key = 'Loader' path = '/img/loading.gif' type = 'build' />\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        console.log('componentDidUpdate');\r\n        if (prevProps.loadProject === this.props.loadProject && this.props.haveUpdateLoading) {\r\n            console.log('componentDidUpdate build dispatch');\r\n            let current =  this.props.currentProject.find(item => item.id === this.state.idProject)\r\n            this.props.dispatch(loadCurrentProjectAction({\r\n                id: current.id,\r\n                typeProject: current.type,\r\n                component: [...current.component]\r\n            }))\r\n        }\r\n    }\r\n    \r\n\r\n    componentDidMount = () => {\r\n        console.log('componentDidMount build');\r\n        if (this.props.active && !this.props.loadProject && this.props.haveUpdateLoading) {\r\n            console.log('componentDidMount build dispatch');\r\n            let current =  this.props.currentProject.find(item => item.id === this.state.idProject)\r\n            this.props.dispatch(loadCurrentProjectAction({\r\n                id: current.id,\r\n                typeProject: current.type,\r\n                component: [...current.component]\r\n            }))\r\n        };\r\n        eventEmitter.on('EventBuildHeaderComponents', this.addHeaderComponent);\r\n        eventEmitter.on('EventSaveChangesComponent', this.saveChangesComponent);\r\n        eventEmitter.on('EventClosePanel', this.closePanel);\r\n        eventEmitter.on('EventModalSearchOn', this.modalSearchOn);\r\n        eventEmitter.on('EventInstrumentPanel', this.openInstrument);\r\n        eventEmitter.on('EventImageView', this.imageViewerSwitch);\r\n        eventEmitter.on('EventModeEdit', this.workModeEdit);\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        console.log('componentWillUnmount');\r\n        if (this.props.active)  this.props.dispatch(exitProjectAction(true));\r\n        eventEmitter.off('EventBuildHeaderComponents', this.addHeaderComponent);\r\n        eventEmitter.off('EventSaveChangesComponent', this.saveChangesComponent);\r\n        eventEmitter.off('EventModalSearchOn', this.modalSearchOn);\r\n        eventEmitter.off('EventClosePanel', this.closePanel);\r\n        eventEmitter.off('EventInstrumentPanel', this.openInstrument);\r\n        eventEmitter.off('EventImageView', this.imageViewerSwitch);\r\n        eventEmitter.off('EventModeEdit', this.workModeEdit);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n    console.log(\"mapStateToProps\" + state);\r\n    return {\r\n        ...state.builder,\r\n        active: state.cabinet.active,\r\n        idUser: state.cabinet.idUser,\r\n        currentProject: state.cabinet.projects\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withFirebase(Build));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\nimport {middlewareLoadUserData} from './redux/middleware/loadUserMiddleware';\r\nimport {connect} from 'react-redux';\r\nimport withFirebase from './components/firebaseHOC';\r\nimport Loader from './components/loading/Loader';\r\n\r\nimport Index from './Pages/Index/Index';\r\nimport Cabinet from './Pages/Cabinet/Cabinet';\r\nimport About from './Pages/About/About';\r\nimport Build from './Pages/Build/Build';\r\nimport ErrorPage from './components/ErrorCatch/ErrorPage';\r\n\r\n// require('es6-promise').polyfill();\r\n\r\nclass App extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        config: PropTypes.object.isRequired,\r\n        firebase: PropTypes.object.isRequired,\r\n    }\r\n\r\n    state = {\r\n        firebase: this.props.firebase,\r\n        firebaseLoadState: false,\r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n        this.props.firebase.auth.onAuthStateChanged((user) => {\r\n            \r\n            if (!this.state.firebaseLoadState){\r\n                if (user){console.log('load'); this.props.dispatch(middlewareLoadUserData(user.uid)); }\r\n                this.setState({...this.state, firebaseLoadState: true});\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    render(){\r\n        if (this.state.firebaseLoadState){\r\n            console.log('app');\r\n        return (\r\n                <Switch>\r\n                    <Route\r\n                        path = {process.env.PUBLIC_URL + '/'} exact\r\n                        render = {(props) => <Index {...props} />}\r\n                    />\r\n                    <Route path = {process.env.PUBLIC_URL + '/Cabinet/'} exact component = {Cabinet}/>\r\n                    <Route\r\n                        path = {process.env.PUBLIC_URL + '/Cabinet/About'}\r\n                        render = {(props) => <About {...props} config = {this.props.config} />}\r\n                    />\r\n                    <Route path = {process.env.PUBLIC_URL + '/Cabinet/Build/:param'} component = {Build}/>\r\n                    <Route path = {process.env.PUBLIC_URL + '*'} component = {Index} />\r\n                    <Route path = {process.env.PUBLIC_URL + '/crashPage'} component = {ErrorPage} />\r\n                </Switch>\r\n\r\n        )\r\n        } else return <Loader path = {process.env.PUBLIC_URL + '/img/loading.gif'} type = 'application' />\r\n    }\r\n}\r\n\r\n// const mapStateToProps = (state) => {\r\n//     return {\r\n//       active: state.cabinet.active\r\n//     }\r\n//   }\r\n\r\nexport default connect()(withFirebase(App));","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport ErrorBoundary from './components/ErrorCatch/ErrorBoundary';\nimport {HashRouter } from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\nimport App from './App.jsx';\nimport 'normalize.css';\n\nconst config = require('./config.json');\n\nconsole.log('test production');\nReactDOM.render(\n        <HashRouter>\n            <ErrorBoundary>\n                <Provider store = {store}>\n                    <App config = {config} />\n                </Provider>\n            </ErrorBoundary>\n        </HashRouter >,\n        document.getElementById('root')\n);\n\nserviceWorker.register();\n\n"],"sourceRoot":""}