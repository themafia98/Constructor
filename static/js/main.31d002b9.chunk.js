(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e){e.exports={title:"Constructor",CabinetIcon:"/img/logo.svg",about:{developer:"Pavel Petrovich",year:"2019"}}},192:function(e,t,n){e.exports=n(457)},264:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},451:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){},455:function(e,t,n){},457:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(47),r=n.n(c),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var l=n(6),u=n(7),m=n(63),p={apiKey:"AIzaSyBrLv9RyGWXCeEETRqBbBo3EVOcibmnJwU",authDomain:"constructor-acb61.firebaseapp.com",databaseURL:"https://constructor-acb61.firebaseio.com",projectId:"constructor-acb61",storageBucket:"",messagingSenderId:"654914699801",appId:"1:654914699801:web:245a75eea5c628d5"},d=(n(258),n(260),new(function(){function e(t){Object(l.a)(this,e),m.initializeApp(t),this.auth=m.auth(),this.db=m.firestore()}return Object(u.a)(e,[{key:"saveSession",value:function(e){return this.auth.setPersistence(m.auth.Auth.Persistence[e])}},{key:"login",value:function(e,t){try{return this.auth.signInWithEmailAndPassword(e,t)}catch(n){return console.error(n),null}}},{key:"registration",value:function(e,t){return this.auth.createUserWithEmailAndPassword(e,t)}},{key:"signOut",value:function(){return this.auth.signOut()}},{key:"getCurrentUser",value:function(){return this.auth.currentUser}}]),e}())(p)),h=n(9),g=n(8),b=n(10),f=new(n(181).EventEmitter),v=n(43),j=(n(264),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={redirect:!1},n.update=function(e){n.setState({redirect:!0},function(){return f.emit("EventErrorCatchUpdate")})},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.redirect?o.a.createElement(v.a,{to:"/"}):o.a.createElement("div",{class:"container"},o.a.createElement("div",{class:"flex-column"},o.a.createElement("h1",null,"Application crash"),o.a.createElement("button",{className:"button_updateApp",onClick:this.update},"Update")))}}]),t}(o.a.Component)),S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1},n.updateApplication=function(e){n.setState({hasError:!1})},n.componentDidMount=function(){f.on("EventErrorCatchUpdate",n.updateApplication)},n.componentWillUnmount=function(){f.off("EventErrorCatchUpdate",n.updateApplication)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidCatch",value:function(e,t){console.error(e+","+t)}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(j,null):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.log(e),{hasError:!0}}}]),t}(o.a.PureComponent),E=n(30),O=n(18),C=n(40),P=n(184),y=n.n(P),w=n(185),k=n(3),N=n(1),x=function(e){return{type:"EXIT_PROJECT",exit:e}},B=function(e){return{type:"LOAD_CURRENT",id:e.id,typeProject:e.typeProject,sectionTitleProject:e.sectionTitleProject,components:e.components}},I=function(e){return{type:"LOAD_USER_CABINET",active:!0,idUser:e.uid,error:"",projects:e.projects}},M=function(e){return{type:"ERROR_CABINET",error:e}},A={loadProject:!1,idProject:null,typeProject:null,components:[],sectionTitleProject:[]},T={active:!1,idUser:null,projects:[],error:null},D=Object(C.c)({builder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_CURRENT":return Object(N.a)({},e,{loadProject:!0,idProject:t.id,typeProject:t.typeProject,components:Object(k.a)(t.components),sectionTitleProject:Object(k.a)(t.sectionTitleProject)});case"LOAD_UPDATE_PROJECT":return Object(N.a)({},e,{components:Object(k.a)(t.components),sectionTitleProject:Object(k.a)(t.sectionTitleProject)});case"EXIT_PROJECT":return t.exit?Object(N.a)({},e,{loadProject:!1,idProject:null,typeProject:null,components:[]}):e;default:return e}},cabinet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER_CABINET":return Object(N.a)({},e,{active:t.active,idUser:t.idUser,projects:Object(k.a)(t.projects)});case"CREATE_PROJECT":return Object(N.a)({},e,{projects:Object(k.a)(t.projects)});case"LOAD_UPDATE_PROJECT":return Object(N.a)({},e,{projects:e.projects.map(function(e){return e.id===t.idProject&&(e.components=Object(k.a)(t.components)),e})});case"LOG_OUT_CABINET":return Object(N.a)({},e,{active:!1,idUser:null,projects:[]});case"ERROR_CABINET":return Object(N.a)({},e,{error:t.error});default:return e}}});var U=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):C.d)(Object(C.a)(w.a.withExtraArgument({firebase:d})),Object(C.a)(y()(function(e,t,n,a){console.error(e),console.debug("current state",t()),console.debug("last action was",n)}))),z=Object(C.e)(D,U),R=n(15),_=n.n(R),F=n(34),W=function(e,t){return function(){var n=Object(F.a)(_.a.mark(function n(a,o,c){var r;return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=c.firebase,n.next=3,r.login(e,t).then(function(e){r.db.collection("users").doc(e.user.uid).get().then(function(e){var t=e.data();a(I({uid:e.id,projects:Object(k.a)(t.projects)}))})}).catch(function(e){console.error(e.message),a(M(e.message))});case 3:case"end":return n.stop()}},n)}));return function(e,t,a){return n.apply(this,arguments)}}()},L=function(e){return function(){var e=Object(F.a)(_.a.mark(function e(t,n,a){var o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.firebase,e.next=3,o.signOut().then(function(e){t({type:"LOG_OUT_CABINET",active:!1,idUser:null,error:"",projects:[]})}).catch(function(e){console.error(e.message),t(M(e.message))});case 3:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()},X=o.a.createContext(d),V=function(e){return function(t){return o.a.createElement(X.Consumer,null,function(n){return o.a.createElement(e,Object.assign({},t,{firebase:n}))})}},J=n(2),Y=function(e){var t=Object(a.useState)(e.path?e.path:"/img/loading.gif"),n=Object(J.a)(t,1)[0];return o.a.createElement("div",{className:"loaderBox"},o.a.createElement("img",{className:"loader",src:n,alt:"loader"}),o.a.createElement("p",null,"Loading ",e.type))},H=(n(271),V(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={firebase:n.props.firebase,error:null},n.emailRef=null,n.passwordRef=null,n.setRefEmail=function(e){return n.emailRef=e},n.setRefPassword=function(e){return n.passwordRef=e},n.createUser=function(e){var t=n.emailRef?n.emailRef.value:null,a=n.passwordRef?n.passwordRef.value:null,o=n.props.firebase;if(!a||!t)return n.setState({error:"invalid user data"});o.registration(t,a).then(function(e){if(!e)throw new Error("Ivaid registration");o.db.collection("users").doc(e.user.uid).set({projects:[],email:t}).then(function(){return f.emit("EventRegistrationCorrect",e)})}).catch(function(e){console.error(e.message),n.setState({error:e.message})})},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.error;return o.a.createElement("div",{className:"RegistrationBox"},o.a.createElement("div",{className:"RegistrationForm"},o.a.createElement("h3",null,"Registration"),o.a.createElement("form",{autoComplete:"off",className:"RegForm"},e?o.a.createElement("p",{className:"error"},e):null,o.a.createElement("span",null,"E-mail"),o.a.createElement("input",{ref:this.setRefEmail,type:"text"}),o.a.createElement("span",null,"Password"),o.a.createElement("input",{className:"password",autoComplete:"off",ref:this.setRefPassword,type:"password"}),o.a.createElement("input",{onClick:this.createUser,className:"loginButton",type:"button",value:"registration"}))))}}]),t}(o.a.PureComponent))),G=(n(272),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={title:"Constructor",registrationActive:!1,regStatus:!1,wrongEnter:!1,error:""},n.emailImput=null,n.passwordImput=null,n.statusRegistration=function(e){e.additionalUserInfo.isNewUser?n.setState(Object(N.a)({},n.state,{regStatus:!0,registrationActive:!1,error:"Account create!"})):console.error("error registration")},n.showBox=function(e){n.setState(Object(N.a)({},n.state,{registrationActive:!n.state.registrationActive})),e.stopPropagation()},n.authTo=function(e){n.emailImput&&n.passwordImput&&n.props.dispatch(W(n.emailImput.value,n.passwordImput.value)),e.stopPropagation()},n.emailRef=function(e){return n.emailImput=e},n.passwordRef=function(e){return n.passwordImput=e},n.componentDidMount=function(e){f.on("EventRegistrationCorrect",n.statusRegistration)},n.componentWillUnmount=function(e){f.off("EventRegistrationCorrect",n.statusRegistration)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.active?o.a.createElement(v.a,{to:"/Cabinet"}):this.props.active?o.a.createElement(Y,{path:"/img/loading.gif",type:"session"}):o.a.createElement("div",{className:"LoginPage flex-column"},o.a.createElement("h1",null,this.state.title),o.a.createElement("div",{className:"LoginBox"},o.a.createElement("div",{className:"LoginForm"},o.a.createElement("h3",null,"Connect form"),this.props.wrongEnter||this.state.regStatus?o.a.createElement("p",{className:"error"},this.props.wrongEnter):null,o.a.createElement("p",null,"E-mail"),o.a.createElement("input",{ref:this.emailRef,type:"text"}),o.a.createElement("p",null,"Password"),o.a.createElement("input",{ref:this.passwordRef,type:"password"}),o.a.createElement("input",{onClick:this.authTo,className:"loginButton enterInput",type:"button",value:"enter"}),o.a.createElement("input",{onClick:this.showBox,className:this.state.registrationActive?"loginButton registration selected":"loginButton registration",type:"button",value:"registration"}))),this.state.registrationActive?o.a.createElement(H,null):null)}}]),t}(o.a.PureComponent)),K=Object(O.b)(function(e){return{active:e.cabinet.active,wrongEnter:e.cabinet.error}})(G),q=function(e){return function(){var t=Object(F.a)(_.a.mark(function t(n,a,o){var c;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=o.firebase,t.next=3,c.db.collection("users").doc(e.uid).get().then(function(e){return e.data()}).then(function(t){return{id:t.id,projects:t.projects.filter(function(t){return t.id!==e.id})}}).then(function(t){c.db.collection("users").doc(e.uid).update({projects:t.projects}).then(function(e){n(I({uid:t.id,projects:t.projects}))})}).catch(function(e){console.error(e.message),n(M(e.message))});case 3:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}()};n(273);var Z=function(e){var t=Object(a.useState)(e.path),n=Object(J.a)(t,1)[0],c=Object(a.useState)(e.className?e.className:null),r=Object(J.a)(c,1)[0],i=Object(a.useState)(!!e.draggable),s=Object(J.a)(i,1)[0];return o.a.createElement("img",{draggable:s,onClick:e.onClick?e.onClick:null,className:r,title:e.title?e.title:null,src:"/constructor"+n,alt:"icon"})},$=n(102).CabinetIcon,Q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={title:n.props.title,redirectAbout:{path:"/Cabinet/About",redirectA:!1},redirectCabinet:{path:"/Cabinet",redirectC:!1}},n.logOut=function(e){n.props.idUser&&n.props.dispatch(L(n.props.idUser)),e.stopPropagation()},n.redirectAbout=function(e){n.props.location.pathname!==n.state.redirectAbout.path&&n.setState({redirectAbout:Object(N.a)({},n.state.redirectAbout,{redirectA:!0})}),e.stopPropagation()},n.redirectCabinet=function(e){n.props.location.pathname!==n.state.redirectCabinet.path&&n.setState({redirectCabinet:Object(N.a)({},n.state.redirectCabinet,{redirectC:!0})}),e.stopPropagation()},n.add=function(e){f.emit("EventChangeWorkMode",{action:"newProject"})},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.redirectAbout.redirectA,t=this.state.redirectCabinet.redirectC;return e?o.a.createElement(v.a,{to:this.state.redirectAbout.path}):t?o.a.createElement(v.a,{to:this.state.redirectCabinet.path}):o.a.createElement("header",null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"flex-row"},o.a.createElement("div",{onClick:this.redirectCabinet,className:"header__CabinetInfo"},o.a.createElement(Z,{className:"mainIcon",path:$}),o.a.createElement("h3",{className:"tilteApp"},this.state.title)),"/Cabinet"===this.props.location.pathname?o.a.createElement("div",{onClick:this.add,className:"header__newProject__AddButton"},o.a.createElement(Z,{className:"Cabinet",path:"/img/plus.png"})):null,o.a.createElement("div",{className:"Navigator"},o.a.createElement(Z,{className:"about",onClick:this.redirectAbout,title:"about",path:"/img/about_logo.svg"}),o.a.createElement(Z,{className:"logoutButton",onClick:this.logOut,title:"logOut",path:"/img/logOut.svg"})))))}}]),t}(o.a.Component),ee=Object(O.b)()(Object(v.g)(Q)),te=n(62),ne=n(186),ae=n.n(ne),oe=function(e){var t=Object(a.useState)(e.id),n=Object(J.a)(t,1)[0],c=Object(a.useState)(e.urls.regular),r=Object(J.a)(c,1)[0],i=Object(a.useState)(e.urls.full),s=Object(J.a)(i,1)[0],l=Object(a.useState)(e.isFull),u=Object(J.a)(l,1)[0];return o.a.createElement("div",{className:e.selected?"ItemBox selected":"ItemBox"},o.a.createElement("img",{className:"ImageItem",onClick:function(e){f.emit("EventShowMenuImage",{id:n,url:r,urlFull:s})},src:u?s:r,alt:"item"}))},ce=(n(275),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(c)))).state={workMode:n.props.workMode,images:{buttonSearchDisabled:!1,selectedItem:null,showUrl:null,images:null,urlFull:null,imageBoxView:!1,error:""},newProject:{validateName:!1,validateType:!1,disabled:!0,name:"",type:"empty"},imageMenuActive:!1,warning:{lengthMax:"Max length: 20 symbols",lengthMin:"Min length: 4 symbol",type:"Select type of webpage"}},n.inputSearch=null,n.inputSelect=null,n.searchBackground=function(e){var t="https://api.unsplash.com/".concat("search/photos/?page=1&per_page=40&query="),a=n.inputSearch.value;n.setState(Object(N.a)({},n.state,{images:Object(N.a)({},n.state.inages,{buttonSearchDisabled:!0})})),ae()("".concat(t+a,"&client_id=").concat("421b12ae729e1f6e4a0cac207496874099ab8a738378ec07a8e2598b11201802")).then(function(e){if(e.ok)return e.json();throw new Error("request invalid")}).then(function(e){var t=e.results;if(!t.length)throw new Error("Photos not found");n.setState(Object(N.a)({},n.state,{images:Object(N.a)({},n.state.images,{imageBoxView:!0,error:"",images:Object(k.a)(t),buttonSearchDisabled:!1})}))}).catch(function(e){console.error(e.message),n.setState(Object(N.a)({},n.state,{images:Object(N.a)({},n.state.images,{error:e.message}),imageBoxView:!1,buttonSearchDisabled:!1}))})},n.showMenuImage=function(e){n.setState(Object(N.a)({},n.state,{imageMenuActive:!0,images:Object(N.a)({},n.state.images,{selectedItem:e.id,showUrl:e.url,urlFull:e.urlFull})}))},n.showImage=function(e){var t=n.state.images.showUrl;f.emit("EventImageView",{action:!0,target:t||null}),e.stopPropagation()},n.setSelectedImage=function(e){var t=Object(N.a)({},n.state.images);"image"!==n.props.modalSearchMode?(f.emit("EventSetBackgroundImage".concat(n.props.idComponent),t),f.emit("EventSetBImageInstumentPanel",{images:t,mode:n.props.modalSearchMode})):(f.emit("EventSetCurrentImage".concat(n.props.idComponent),t),f.emit("EventSetBImageInstumentPanel",{images:t,mode:n.props.modalSearchMode})),e.stopPropagation()},n.makeImageResultBox=function(e){return e?e.map(function(e,t){return o.a.createElement(oe,{key:"item".concat(t),id:t,selected:n.state.images.selectedItem===t,isFull:!1,urls:Object(N.a)({},e.urls)})}):null},n.addNewProject=function(e){var t=n.state[n.state.workMode];t.validateType&&t.validateName&&(f.emit("EventAddProject",{title:n.state[n.state.workMode].name,type:n.state[n.state.workMode].type}),f.emit("EventChangeWorkMode",{action:"default"}))},n.selectOption=function(e){var t=Object(N.a)({},n.state[n.state.workMode]);t.type=e.target.value,t.validateType="empty"!==t.type,t.disabled=!t.validateType||!t.validateName,n.setState(Object(N.a)({},n.state,Object(te.a)({},n.state.workMode,t)))},n.validateName=function(e){var t=Object(N.a)({},n.state[n.state.workMode]);t.name=e.target.value;var a=t.name.length;t.validateName=a>=4&&a<20,t.disabled=!t.validateType||!t.validateName,n.setState(Object(N.a)({},n.state,Object(te.a)({},n.state.workMode,t)))},n.cancel=function(e){"Search"===n.state.workMode?f.emit("EventModalSearchOn",{action:"offline",mode:null}):f.emit("EventChangeWorkMode",{action:"default"})},n.refSelect=function(e){return n.inputSelect=e},n.refSearch=function(e){return n.inputSearch=e},n.componentDidMount=function(e){"Search"===n.state.workMode&&f.on("EventShowMenuImage",n.showMenuImage)},n.componentWillUnmount=function(e){"Search"===n.state.workMode&&f.off("EventShowMenuImage",n.showMenuImage)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){switch(this.state.workMode){case"newProject":return o.a.createElement("div",{className:"Modal"},o.a.createElement("h3",null,"Create new Project"),this.state[this.state.workMode].name.length<=3?o.a.createElement("span",{className:"warning"},this.state.warning.lengthMin):null,this.state[this.state.workMode].name.length>=20?o.a.createElement("span",{className:"warning"},this.state.warning.lengthMax):null,o.a.createElement("input",{className:this.state[this.state.workMode].validateName?"ready":"wrong",value:this.state[this.state.workMode].name,onChange:this.validateName,type:"text",placeholder:"Project name"}),this.state[this.state.workMode].validateType?null:o.a.createElement("span",{className:"warning"},this.state.warning.type),o.a.createElement("select",{onChange:this.selectOption},o.a.createElement("option",{value:"empty"},"--------"),o.a.createElement("option",{value:"landing"},"Landing"),o.a.createElement("option",{value:"portfolio"},"Portfolio")),o.a.createElement("input",{onClick:this.addNewProject,className:"acceptButton",disabled:this.state[this.state.workMode].disabled,type:"button",value:"Submit"}),o.a.createElement("input",{onClick:this.cancel,type:"button",value:"Cancel"}));case"Search":return console.log(this.props),o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"Modal Modal-search"},o.a.createElement("h3",null,"Search ".concat("image"!==this.props.modalSearchMode?"background image":"image")),this.state.images.error?o.a.createElement("span",{className:"error"},this.state.images.error):null,o.a.createElement("input",{ref:this.refSearch,type:"text",placeholder:"Photo name"}),o.a.createElement("input",{disabled:this.state.images.buttonSearchDisabled,className:"acceptButton",type:"button",value:"Search",onClick:this.searchBackground}),o.a.createElement("input",{onClick:this.cancel,type:"button",value:"Cancel"}),this.state.images.imageBoxView?o.a.createElement("div",{className:"searchResultBox"},this.makeImageResultBox(Object(k.a)(this.state.images.images))):null),this.state.imageMenuActive?o.a.createElement("div",{className:"ActionModalSearch"},o.a.createElement("button",{onClick:this.showImage,className:"actionModalSearch__view"},o.a.createElement(Z,{path:"/img/view.png"})),o.a.createElement("button",{onClick:this.setSelectedImage,className:"actionModalSearch__settings"},o.a.createElement(Z,{path:"/img/settings.png"}))):null);case"SearchImage":return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"Modal Modal-search"},o.a.createElement("h3",null,"Search background image"),this.state.images.error?o.a.createElement("span",{className:"error"},this.state.images.error):null,o.a.createElement("input",{ref:this.refSearch,type:"text",placeholder:"Photo name"}),o.a.createElement("input",{disabled:this.state.images.buttonSearchDisabled,className:"acceptButton",type:"button",value:"Search",onClick:this.searchBackground}),o.a.createElement("input",{onClick:this.cancel,type:"button",value:"Cancel"}),this.state.images.imageBoxView?o.a.createElement("div",{className:"searchResultBox"},this.makeImageResultBox(Object(k.a)(this.state.images.images))):null),this.state.imageMenuActive?o.a.createElement("div",{className:"ActionModalSearch"},o.a.createElement("button",{onClick:this.showImage,className:"actionModalSearch__view"},o.a.createElement(Z,{path:"/img/view.png"})),o.a.createElement("button",{onClick:this.setSelectedImage,className:"actionModalSearch__settings"},o.a.createElement(Z,{path:"/img/settings.png"}))):null);default:return o.a.createElement(a.Fragment,null)}}}]),t}(o.a.PureComponent));var re=function(e,t,n,a){return function(){var o=Object(F.a)(_.a.mark(function o(c,r,i){var s,l,u,m,p;return _.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return s=i.firebase,l=Object(k.a)(t),u=l.length?l[l.length-1].id+1:0,(m=[]).push("Header"),p={backgroundImage:null,color:null,id:"MainBackgroundHeader".concat((r=0,d=1e4,"".concat(Math.floor(r+Math.random()*(d-r))))),targetSection:"Header",type:"background"},l.push({id:u,title:n,type:a,components:[p],sectionTitleProject:[].concat(m)}),o.next=9,s.db.collection("users").doc(e).update({projects:l}).then(function(){return c({type:"CREATE_PROJECT",projects:l})}).catch(function(e){console.error(e.message),c(M(e.message))});case 9:case"end":return o.stop()}var r,d},o)}));return function(e,t,n){return o.apply(this,arguments)}}()};n(276);var ie=Object(v.g)(function(e){var t=Object(a.useState)("/Cabinet/Build/".concat(e.id)),n=Object(J.a)(t,1)[0],c=Object(a.useState)(!1),r=Object(J.a)(c,2),i=r[0],s=r[1],l=Object(a.useState)(e.id),u=Object(J.a)(l,1)[0],m=Object(a.useState)(e.name),p=Object(J.a)(m,1)[0],d=Object(a.useState)(e.type),h=Object(J.a)(d,1)[0];return i?o.a.createElement(v.a,{to:n}):o.a.createElement("div",{className:"item","data-id":u},o.a.createElement("p",{className:"ProjectName"},p),o.a.createElement("p",{className:"ProjectType"},h),o.a.createElement("div",{className:"projectController"},o.a.createElement("input",{onClick:function(t){e.location.pathname!==n&&s(!0),t.stopPropagation()},className:"projectControllerButton_enter",type:"button",value:"enter build"}),o.a.createElement("input",{onClick:function(t){f.emit("EventDeleteItem",{id:e.id,name:e.name,type:e.type}),t.stopPropagation()},className:"projectControllerButton_delete",type:"button",value:"delete"})),o.a.createElement("input",{onClick:function(e){e.stopPropagation()},className:"productionButton",type:"button",value:"Show demo"}))}),se=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(c)))).state={redirect:!1},n.addNewProject=function(e){n.props.idUser?n.props.dispatch(re(n.props.idUser,n.props.list,e.title,e.type)):n.setState(Object(N.a)({},n.state,{redirect:!0}))},n.makeList=function(e){return e.map(function(e){return o.a.createElement(ie,{key:e.id,id:e.id,name:e.title,type:e.type})})},n.componentDidMount=function(){f.on("EventAddProject",n.addNewProject)},n.componentWillUnmount=function(){f.off("EventAddProject",n.addNewProject)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.redirect?o.a.createElement(v.a,{to:"/"}):o.a.createElement("div",{className:"projectsList__list"},this.makeList(Object(k.a)(this.props.list)))}}]),t}(o.a.PureComponent),le=Object(O.b)(function(e){return{idUser:e.cabinet.idUser,list:Object(k.a)(e.cabinet.projects)}})(se),ue=(n(277),function(e){return o.a.createElement("section",{className:"projectsList"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"flex-column"},o.a.createElement("div",{className:"projectsList__about"},o.a.createElement("h3",null,"Your Projects")),le?o.a.createElement(le,null):null)))}),me=(n(278),n(102).title),pe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={workMode:"default"},n.logOut=function(){n.props.dispatch(L(n.props.idUser))},n.deletItem=function(e){n.props.dispatch(q(Object(N.a)({},e,{uid:n.props.firebase.getCurrentUser().uid})))},n.changeWorkMode=function(e){n.setState(Object(N.a)({},n.state,{workMode:e.action}))},n.componentDidMount=function(){f.on("EventDeleteItem",n.deletItem),f.on("EventChangeWorkMode",n.changeWorkMode)},n.componentWillUnmount=function(){f.off("EventDeleteItem",n.deletItem),f.off("EventChangeWorkMode",n.changeWorkMode)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.active?o.a.createElement(a.Fragment,null,o.a.createElement(ee,{title:me,idUser:this.props.idUser}),o.a.createElement("div",{className:"Cabinet"},"newProject"===this.state.workMode?o.a.createElement(ce,{workMode:this.state.workMode}):null,o.a.createElement(ue,null))):this.props.firebase.getCurrentUser()?o.a.createElement(Y,{path:"/img/loading.gif",type:"Cabinet"}):o.a.createElement(v.a,{to:"/"})}}]),t}(o.a.PureComponent),de=Object(O.b)(function(e){return{idUser:e.cabinet.idUser,projects:Object(k.a)(e.cabinet.projects),active:e.cabinet.active}})(V(pe)),he=(n(279),V(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={config:n.props.config},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(this.props.firebase.getCurrentUser()){var e=this.state.config;return o.a.createElement(a.Fragment,null,o.a.createElement(ee,{title:e.title}),o.a.createElement("section",{className:"About"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"information"},o.a.createElement("img",{alt:"img",className:"logoAbout",src:"/constructor/img/about.jpg"}),o.a.createElement("p",{className:"developer"},o.a.createElement("span",null,"Developer:")," ",e.about.developer),o.a.createElement("p",{className:"year"},o.a.createElement("span",null,"Year:")," ",e.about.year))))))}return o.a.createElement(v.a,{to:"/"})}}]),t}(o.a.PureComponent))),ge=n(128),be=function(e){return function(){var t=Object(F.a)(_.a.mark(function t(n,a,o){var c,r;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=o.firebase,r=e.projects.map(function(t){return t.id===e.idProject&&(t.components=Object(k.a)(e.components),t.sectionTitleProject=Object(k.a)(e.sectionTitleProject)),t}),t.next=4,c.db.collection("users").doc(e.uid).update({projects:JSON.parse(JSON.stringify(r))}).then(function(t){var a,o=e.projects.find(function(t){return t.id===e.idProject});n({type:"LOAD_UPDATE_PROJECT",idProject:(a={components:Object(k.a)(o.components),idProject:e.idProject,sectionTitleProject:e.sectionTitleProject}).idProject,sectionTitleProject:a.sectionTitleProject,components:a.components})}).catch(function(e){return n(M(e.message))});case 4:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}()};n(287);var fe=function(e){var t=Object(a.useState)(e.path),n=Object(J.a)(t,1)[0];return o.a.createElement("div",{onClick:function(e){f.emit("EventImageView",{action:!1,target:null}),e.stopPropagation()},className:"ImageViewer"},o.a.createElement("img",{src:n,alt:"fullImage"}))},ve=(n(288),function(e){return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Border radius: "),o.a.createElement("input",{onClick:e.cbSetColor,className:"button_switch radius",type:"number",min:"10",max:"200"}),o.a.createElement("p",{className:"titleInstument"},"Opacity: "),o.a.createElement("input",{onClick:e.cbSearchImage,className:"ImageSearchButton",type:"number",min:"0",max:"1"}),o.a.createElement("input",{onClick:e.cbSearchImage,className:"ImageSearchButton",type:"button",value:"search image"}),o.a.createElement("input",{onClick:e.cbSaveChanges,className:"saveButtonInstument",type:"button",value:"save changes"}))}),je=n(89),Se=function(e){var t=Object(a.useState)(e.componentStats).componentsStats,n=null;return"object"===typeof t&&t.hasOwnProperty("color")&&(n=t.color),o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Color: "),o.a.createElement("input",{onClick:e.cbSetColor,className:"button_switch Color",type:"button",value:"color pick"}),e.colorPickerActive?o.a.createElement(je.SketchPicker,{onChangeComplete:e.cbHandleChangeComplete,color:n||"red"}):null,o.a.createElement("input",{onClick:e.cbSearchImage,className:"ImageSearchButton",type:"button",value:"background-image"}),o.a.createElement("input",{onClick:e.cbSaveChanges,className:"saveButtonInstument",type:"button",value:"save changes"}))},Ee=function(e){var t=e.instrumentPanel.colorPickerActive,n=e.componentStats.content,c=e.componentStats.fontSize,r=e.componentStats.coords,i=e.componentStats.color;return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"titleInstument"},"Position: "),o.a.createElement("span",{className:"textCoordsPanel"},r.x?r.x+" / "+r.y:" drop for active"),o.a.createElement("p",{className:"titleInstument"},"Color: "),o.a.createElement("input",{onClick:e.cbSetColor,className:"button_switch",type:"button",value:"color pick"}),o.a.createElement("p",{className:"titleInstument"},"Text size: "),o.a.createElement("input",{onChange:e.cbSetSize,type:"number",min:"10",max:"200",value:c||120}),t?o.a.createElement(je.SketchPicker,{onChangeComplete:e.cbHandleChangeComplete,color:i||"red"}):null,o.a.createElement("p",{className:"titleInstument"},"Content: "),o.a.createElement("input",{onChange:e.cbSetContent,maxLength:"20",type:"text",value:n||"Title"}),o.a.createElement("input",{onClick:e.cbSaveChanges,className:"saveButtonInstument",type:"button",value:"save changes"}))},Oe=(n(451),function(e){return o.a.createElement("div",{className:"wrapperConfirm"},o.a.createElement("div",{className:"confirmSave"},o.a.createElement("span",null,"Detected new changes"),o.a.createElement("input",{className:"saveCofirm",onClick:e.cbSaveChanges,type:"button",value:"Save changes"}),o.a.createElement("input",{className:"cancelCofirm",onClick:e.cbCancelSave,type:"button",value:"Cancel"})))}),Ce=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(c)))).state={isChange:!1,confirmActive:!1,instrumentPanel:Object(N.a)({},n.props.instrumentPanel),componentStats:n.props.componentStats,images:null},n.updateSizeText=function(e){n.setState(Object(N.a)({},n.state,{instrumentPanel:Object(N.a)({},n.state.instrumentPanel),componentStats:Object(N.a)({},n.state.componentStats,{fontSize:e})}))},n.closePanel=function(e){n.state.isChange?n.setState(Object(N.a)({},n.state,{confirmActive:!0})):f.emit("EventClosePanel",{close:!1})},n.setSize=function(e){var t=n.state.componentStats.id,a=e.target.value>200?200:e.target.value;n.setState(Object(N.a)({},n.state,{instrumentPanel:Object(N.a)({},n.state.instrumentPanel),componentStats:Object(N.a)({},n.state.componentStats,{fontSize:a})}),function(){return f.emit("EventChangeSizeText".concat(t),{targetSection:n.state.editComponentName,size:a})})},n.setContent=function(e){var t=n.state.componentStats.id,a=e.target.value;n.setState(Object(N.a)({},n.state,{instrumentPanel:Object(N.a)({},n.state.instrumentPanel),componentStats:Object(N.a)({},n.state.componentStats,{content:a})}),function(){return f.emit("EventChangeContentText".concat(t),{targetSection:n.state.editComponentName,content:a})})},n.updatePosition=function(e){n.setState(Object(N.a)({},n.state,{componentStats:Object(N.a)({},n.state.componentStats,{coords:Object(N.a)({},n.state.componentStats.coords,{x:e.x,y:e.y})})}))},n.setColor=function(e){n.setState(Object(N.a)({},n.state,{instrumentPanel:Object(N.a)({},n.state.instrumentPanel,{colorPickerActive:!n.state.instrumentPanel.colorPickerActive})}))},n.updateBimageStats=function(e){var t=e.images;"image"!==e.mode?n.setState(Object(N.a)({},n.state,{componentStats:Object(N.a)({},n.state.componentStats,{backgroundImage:t.urlFull})})):n.setState(Object(N.a)({},n.state,{componentStats:Object(N.a)({},n.state.componentStats,{image:t.urlFull})}))},n.handleChangeComplete=function(e){var t=e.rgb,a="rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")"),o=n.state.componentStats.id;"background"===n.state.componentStats.type?n.setState(Object(N.a)({},n.state,{componentStats:Object(N.a)({},n.state.componentStats,{color:a})}),function(){return f.emit("EventChangeColorBackground".concat(o),{colorRGB:n.state.componentStats.color})}):"text"===n.state.componentStats.type&&n.setState(Object(N.a)({},n.state,{componentStats:Object(N.a)({},n.state.componentStats,{color:a})}),function(){return f.emit("EventChangeColorText".concat(o),a)})},n.saveChanges=function(e){n.setState(Object(N.a)({},n.state,{isChange:!1,confirmActive:!1}),function(){return f.emit("EventSaveChangesComponent",Object(N.a)({},n.state.componentStats,{id:n.state.componentStats.id,type:n.state.componentStats.type}))}),e.stopPropagation()},n.searchImage=function(e){var t=n.state.componentStats.id;f.emit("EventModalSearchOn",{idComponent:t,mode:n.state.componentStats.type}),e.stopPropagation()},n.makePanelInstruments=function(e){switch(e){case"text":return o.a.createElement(Ee,{instrumentPanel:Object(N.a)({},n.state.instrumentPanel),componentStats:Object(N.a)({},n.state.componentStats),cbSetColor:n.setColor,cbSetSize:n.setSize,cbHandleChangeComplete:n.handleChangeComplete,cbSetContent:n.setContent,cbSaveChanges:n.saveChanges});case"background":return o.a.createElement(Se,{colorPickerActive:n.state.instrumentPanel.colorPickerActive,componentStats:Object(N.a)({},n.state.componentStats),cbSetColor:n.setColor,cbHandleChangeComplete:n.handleChangeComplete,cbSearchImage:n.searchImage,cbSaveChanges:n.saveChanges});case"image":return o.a.createElement(ve,{instrumentPanel:Object(N.a)({},n.state.instrumentPanel),componentStats:Object(N.a)({},n.state.componentStats),cbSearchImage:n.searchImage,cbSaveChanges:n.saveChanges});default:return o.a.createElement("p",{className:"warningInstruments"},"No found element")}},n.cancelSave=function(e){n.setState(Object(N.a)({},n.state,{isChange:!1,confirmActive:!1})),e.stopPropagation()},n.componentDidUpdate=function(e,t){var a=t.componentStats.targetSection!==n.props.componentStats.targetSection,o=t.componentStats.id!==n.props.componentStats.id,c=n.state.componentStats!==t.componentStats&&!n.state.isChange,r=o||a;r&&!n.state.isChange?n.setState(Object(N.a)({},n.state,{instrumentPanel:Object(N.a)({},n.props.instrumentPanel,{colorPickerActive:!1,isChange:!1}),componentStats:n.props.mainBuilderData.components.find(function(e){return e.id===n.props.componentStats.id})})):!n.state.isChange&&c?n.setState(Object(N.a)({},n.state,{componentStats:Object(N.a)({},n.state.componentStats),isChange:!0})):r&&n.state.isChange&&n.setState(Object(N.a)({},n.state,{confirmActive:!0}))},n.componentDidMount=function(e){f.on("EventUpdateSizeText".concat(n.state.componentStats.id),n.updateSizeText),f.on("EventSetBImageInstumentPanel",n.updateBimageStats),f.on("EventUpdatePosition".concat(n.state.componentStats.id),n.updatePosition)},n.componentWillUnmount=function(e){f.off("EventUpdateSizeText".concat(n.state.componentStats.id),n.updateSizeText),f.off("EventSetBImageInstumentPanel",n.updateBimageStats),f.off("EventUpdatePosition".concat(n.state.componentStats.id),n.updatePosition)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.instrumentPanel.instrumentActive;return o.a.createElement(a.Fragment,null,this.state.confirmActive?o.a.createElement(Oe,{cbSaveChanges:this.saveChanges,cbCancelSave:this.cancelSave}):null,o.a.createElement("div",{className:"instumentsPanel"},o.a.createElement("button",{onClick:this.closePanel,className:"closeInstrumentsPanel"},o.a.createElement(Z,{path:"/img/close.svg"})),o.a.createElement("h3",null,"Instruments"),e?o.a.createElement("p",{className:"TextComponent"},this.state.componentStats.type):null,e?o.a.createElement("div",{className:"instuments"},this.makePanelInstruments(this.state.componentStats.type)):null))}}]),t}(o.a.PureComponent),Pe=function(e){return o.a.createElement(a.Fragment,{key:"AdditionalBuild"},e.modalImageViewer.action&&o.a.createElement(fe,{key:"ImageViewer",path:e.modalImageViewer.target}),e.modalSearch&&o.a.createElement(ce,{idComponent:e.componentStats.id,modalSearchMode:e.modalSearchMode,key:"ModalWindow",workMode:"Search"}),o.a.createElement(Ce,{key:"InstrumentsPanel".concat(e.componentStats.id),editComponentName:e.editComponentName,componentStats:Object(N.a)({},e.componentStats),mainBuilderData:e.mainBuilderData,instrumentPanel:e.instrumentPanel}))},ye=n(37),we=n(38);function ke(){var e=Object(ye.a)(["\n    transform: translate(-50%,-50%);\n    width: 30%;\n    height: 50%;\n    left: 50%;\n    top: 50%;\n    position: absolute;\n    z-index: 10;\n    border: 1px solid red;\n    background: grey;\n    padding: 25px;\n"]);return ke=function(){return e},e}var Ne=we.a.iframe(ke()),xe=function(e){return console.log("media"),o.a.createElement(Ne,{onClick:function(e){f.emit("EventInstrumentPanel",{target:"media"}),e.stopPropagation()},width:e.width,height:e.height,src:"https://www.youtube.com/embed/B0b59jgudto",allowfullscreen:!0},e.children)};function Be(){var e=Object(ye.a)(["\n    position: absolute;\n    width: ","%;\n    transform: translate(-50%,50%);\n"]);return Be=function(){return e},e}var Ie=we.a.img.attrs(function(e){return{style:{left:e.coordX?e.coordX:"45%",top:e.coordY?e.coordY:"0"}}})(Be(),function(e){return e.size}),Me=function(e){var t=Object(a.useState)(e.id),n=Object(J.a)(t,1)[0],c=Object(a.useState)(e.path),r=Object(J.a)(c,2),i=r[0],s=r[1],l=Object(a.useState)(e.size?e.size:30),u=Object(J.a)(l,2),m=u[0],p=u[1],d=Object(a.useState)(e.targetSection),h=Object(J.a)(d,1)[0],g=Object(a.useState)(0),b=Object(J.a)(g,2),v=b[0],j=b[1],S=Object(a.useState)(Object(N.a)({},e.sizeParentBox)),E=Object(J.a)(S,2),O=E[0],C=E[1],P=Object(a.useState)(null),y=Object(J.a)(P,2),w=y[0],k=y[1],x=Object(a.useState)(e.coords.x?{x:e.coords.x,y:e.coords.y}:null),B=Object(J.a)(x,2),I=B[0],M=B[1],A=function(e){var t={id:n,targetSection:h,type:"image",borderRadius:null,opacity:1,zIndex:null,image:i,coords:Object(N.a)({},I)};f.emit("EventInstrumentPanel",{componentStats:t,targetSection:h,id:n,sizeTextValue:m}),e.stopPropagation()},T=function(e){var t=e.pageX-w.x,a=e.pageY-w.y,o=100*t/O.width,c=100*a/O.height;(isNaN(o)||isNaN(c))&&console.log("error");var r={x:o.toFixed(1)+"%",y:c.toFixed(1)+"%",shadowDisplay:"drag"===e.type,type:"image"};M(r),"dragend"===e.type&&f.emit("EventUpdatePosition".concat(n),r),e.stopPropagation()},D=function(e){var t=e.urlFull;s(t)},U=function e(t){0===v?(C({width:t.width,height:t.height}),j(v+1)):f.off("EventSaveWidth",e)};return Object(a.useEffect)(function(e){return f.on("EventSaveWidth".concat(h),U),f.on("EventSetCurrentImage".concat(n),D),function(){f.off("EventSaveWidth".concat(h),U),f.off("EventSetCurrentImage".concat(n),D)}}),o.a.createElement(Ie,{size:m,src:i,alt:"img",onDoubleClick:A,draggable:!0,onMouseDown:function(e){var t=e.target.getBoundingClientRect(),n=t.left,a=t.top,o=t.width,c=t.height;k({x:e.pageX-n-o/2,y:e.pageY-a+c/2}),e.stopPropagation()},onDragStart:A,onDrag:T,onDragEnd:T,coordX:I?I.x:null,coordY:I?I.y:null,onWheel:function(e){if(e.shiftKey&&-100===e.deltaY){var t=m+1;p(t=t>100?100:t),f.emit("EventUpdateSizeText",t)}if(e.shiftKey&&100===e.deltaY){var n=m-1;p(n=n<=0?0:n),f.emit("EventUpdateSizeText",n)}e.stopPropagation()},shadowDisplay:!!I&&I.shadowDisplay})};function Ae(){var e=Object(ye.a)(["\n    width: 100%;\n    height: 100%;\n    text-align: center;\n    margin: 0;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    user-select: none;  \n"]);return Ae=function(){return e},e}function Te(){var e=Object(ye.a)(["\n    position: absolute;\n    transform: translate(-50%);\n    font-size: ",";\n    color: ",";\n    text-align: center;\n    margin: 0;\n    border: 1px solid red;\n"]);return Te=function(){return e},e}var De=we.a.div.attrs(function(e){return{style:{zIndex:e.indexZ?"9999999":null,left:e.coordX?e.coordX:"50%",top:e.coordY}}})(Te(),function(e){return e.size},function(e){return e.textColor}),Ue=we.a.h1(Ae()),ze=function(e){var t=Object(a.useState)(e.id),n=Object(J.a)(t,1)[0],c=Object(a.useState)(Object(N.a)({},e.sizeParentBox)),r=Object(J.a)(c,2),i=r[0],s=r[1],l=Object(a.useState)(0),u=Object(J.a)(l,2),m=u[0],p=(u[1],Object(a.useState)(e.targetSection)),d=Object(J.a)(p,1)[0],h=Object(a.useState)(0),g=Object(J.a)(h,2),b=g[0],v=g[1],j=Object(a.useState)(e.color),S=Object(J.a)(j,2),E=S[0],O=S[1],C=Object(a.useState)(e.size?e.size:120),P=Object(J.a)(C,2),y=P[0],w=P[1],k=Object(a.useState)(e.content?e.content:e.children),x=Object(J.a)(k,2),B=x[0],I=x[1],M=Object(a.useState)(null),A=Object(J.a)(M,2),T=A[0],D=A[1],U=Object(a.useState)(e.coords.x?{x:e.coords.x,y:e.coords.y}:null),z=Object(J.a)(U,2),R=z[0],_=z[1],F=Object(a.useState)(!1),W=Object(J.a)(F,2),L=W[0],X=W[1],V=o.a.createRef(),Y=function(e){"string"===typeof e&&O(e)},H=function(e){var t=e.size;w(t)},G=function e(t){0===b?(s({width:t.width,height:t.height}),v(b+1)):f.off("EventSaveWidth",e)},K=function(e){if(e.content||""===e.content){var t=e.content;I(t)}},q=function(e){L&&(X(!1),f.emit("EventUpdatePosition".concat(n),R)),e.stopPropagation()};return Object(a.useEffect)(function(e){return f.on("EventChangeColorText".concat(n),Y),f.on("EventChangeSizeText".concat(n),H),f.on("EventChangeContentText".concat(n),K),f.on("EventSaveWidth".concat(d),G),function(){f.off("EventChangeColorText".concat(n),Y),f.off("EventSaveWidth".concat(d),G),f.off("EventChangeSizeText".concat(n),H),f.off("EventChangeContentText".concat(n),K)}}),o.a.createElement(De,{ref:V,onClick:function(e){var t={id:n,targetSection:d,type:"text",color:E,fontSize:y,content:B,coords:Object(N.a)({},R)};f.emit("EventInstrumentPanel",{type:"text",targetSection:d,id:n,componentStats:t,sizeTextValue:y}),e.stopPropagation()},textColor:E||"red",size:y?y+"px":"120px",onMouseDown:function(e){void 0===m&&(m=0);var t=e.target.getBoundingClientRect(),n=function(e){return{left:e.left,top:e.top+m}}(t),a=t.width,o=t.height;D({x:e.pageX-n.left-a/2,y:e.pageY-n.top+o/4}),L||X(!0),e.stopPropagation()},onMouseMove:function(e){if(L){V.current.focus();var t=e.pageX-T.x,n=e.pageY-T.y,a=100*t/i.width,o=100*n/i.height,c={x:a.toFixed(1)+"%",y:o.toFixed(1)+"%"};_(c)}e.stopPropagation()},onMouseLeave:q,onMouseUp:q,onWheel:function(e){if(e.shiftKey&&-100===e.deltaY){var t=y+1;w(t=t>200?200:t),f.emit("EventUpdateSizeText".concat(n),t)}if(e.shiftKey&&100===e.deltaY){var a=y-1;w(a=a<=10?10:a),f.emit("EventUpdateSizeText".concat(n),a)}e.stopPropagation()},coordX:R?R.x:null,coordY:R?R.y:null,indexZ:L},o.a.createElement(Ue,null,B))};function Re(){var e=Object(ye.a)(["\n    position: relative;\n    width: ",";\n    height: ",";\n    background-size: cover;\n    background-color: ",";\n    background-image: url(",");\n"]);return Re=function(){return e},e}var _e=we.a.div(Re(),function(e){return e.width},function(e){return e.height},function(e){return e.backgroundColor},function(e){return e.backgroundImage}),Fe=function(e){var t=Object(a.useState)(e.id),n=Object(J.a)(t,1)[0],c=Object(a.useState)(e.targetSection),r=Object(J.a)(c,1)[0],i=o.a.createRef(),s=Object(a.useState)(e.background||e.color),l=Object(J.a)(s,2),u=l[0],m=l[1],p=Object(a.useState)(e.backgroundImage?e.backgroundImage:null),d=Object(J.a)(p,2),h=d[0],g=d[1],b=Object(a.useState)(e.width?e.width:"100%"),v=Object(J.a)(b,1)[0],j=Object(a.useState)(e.height?e.height:"100%"),S=Object(J.a)(j,1)[0],E=function(e){m(e.colorRGB)},O=function(e){var t=e.urlFull;g(t)},C=function(e){console.log(e)};return Object(a.useEffect)(function(){return function(e){i.current.focus();var t=i.current.getBoundingClientRect();f.emit("EventSaveWidth".concat(r),{width:t.width,height:t.height})}(),f.on("EventChangeColorBackground".concat(n),E),f.on("EventSaveSize".concat(n),C),f.on("EventSetBackgroundImage".concat(n),O),function(){f.off("EventChangeColorBackground".concat(n),E),f.off("EventSaveSize".concat(n),C),f.off("EventSetBackgroundImage".concat(n),O)}}),o.a.createElement(_e,{ref:i,onDoubleClick:function(e){var t={id:n,targetSection:r,type:"background",color:u,backgroundImage:h};f.emit("EventInstrumentPanel",{componentStats:t,targetSection:r,type:"background",id:n}),e.stopPropagation()},"data-name":r,backgroundColor:u||e.background,backgroundImage:h||e.backgroundImage,width:v,height:S},e.children)},We=function(e){var t=Object(a.useState)(e.targetSection),n=Object(J.a)(t,1)[0],c=Object(a.useState)(e.id),r=Object(J.a)(c,1)[0],i=Object(a.useState)(e.size||e.fontSize),s=Object(J.a)(i,1)[0],l=Object(a.useState)(e.color?e.color:"red"),u=Object(J.a)(l,1)[0],m=Object(a.useState)(e.content?e.content:null),p=Object(J.a)(m,1)[0],d=Object(a.useState)(e.type),h=Object(J.a)(d,1)[0],g=Object(a.useState)(e.width),b=Object(J.a)(g,1)[0],f=Object(a.useState)(e.height),v=Object(J.a)(f,1)[0];return"text"===h?o.a.createElement(ze,{key:"text".concat(r),targetSection:n,sizeParentBox:Object(N.a)({},e.sizeParentBox),id:r,size:s,color:u,coords:Object(N.a)({},e.coords)},p):"background"===h?o.a.createElement(Fe,{targetSection:n,color:u,width:b,height:v,size:s,id:r,key:"bg".concat(r)}):"image"===h?o.a.createElement(Me,{targetSection:n,size:s,path:e.path?e.path:e.image,coords:Object(N.a)({},e.coords),sizeParentBox:Object(N.a)({},e.sizeParentBox),id:r,key:"image".concat(r)}):"media"===h?o.a.createElement(xe,{key:"media".concat(r),id:r,targetSection:n,sizeParentBox:Object(N.a)({},e.sizeParentBox),path:e.path?e.path:e.content,coords:Object(N.a)({},e.coords)}):void 0},Le=(n(453),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(c)))).state={mode:n.props.mode,componentsPatternBackground:{id:null,targetSection:null,type:"background",color:null,backgroundImage:null},componentsPatternText:{id:null,targetSection:null,type:"text",color:null,fontSize:null,content:null,coords:{x:null,y:null}},componentsPatternImage:{id:null,targetSection:null,type:"image",borderRadius:null,opacity:null,zIndex:null,image:"/img/photoPattern.svg",coords:{x:null,y:null}},componentsPatternMedia:{id:null,targetSection:null,type:"media",size:null,content:null,coords:{x:null,y:null}},sizeParentBox:Object(N.a)({},n.props.sizeParentBox),title:"Title"},n.addText=function(e){var t=n.props.countComponents;f.emit("EventBuildComponents",{componentsPatternText:Object(N.a)({},n.state.componentsPatternText,{id:t,targetSection:n.props.editComponentName}),type:n.state.componentsPatternText.type,component:o.a.createElement(We,{key:"text".concat(t),sizeParentBox:n.props.sizeParentBox,targetSection:n.props.editComponentName,content:"Title",id:t,type:"text"})}),e.stopPropagation()},n.addBackground=function(e){var t=n.props.countComponents;f.emit("EventBuildComponents",{componentsPatternBackground:Object(N.a)({},n.state.componentsPatternBackground,{targetSection:n.state.editComponentName}),type:n.state.componentsPatternBackground.type,component:o.a.createElement(We,{targetSection:n.props.editComponentName,key:"bg".concat(t),id:t,type:"background"})}),e.stopPropagation()},n.addImage=function(e){var t=n.props.countComponents;f.emit("EventBuildComponents",{componentsPatternImage:Object(N.a)({},n.state.componentsPatternImage,{id:t,targetSection:n.props.editComponentName}),type:n.state.componentsPatternImage.type,component:o.a.createElement(We,{key:"text".concat(t),targetSection:n.props.editComponentName,sizeParentBox:n.props.sizeParentBox,id:t,coords:Object(N.a)({},n.state.componentsPatternImage.coords),path:"/img/photoPattern.svg",type:"image"})}),e.stopPropagation()},n.addMedia=function(e){var t=Math.random().toFixed(3);console.log(e),f.emit("EventBuildComponents",{componentsPatternMedia:Object(N.a)({},n.state.componentsPatternMedia,{id:t,targetSection:n.props.editComponentName}),type:n.state.componentsPatternMedia.type,component:o.a.createElement(We,{key:"media".concat(t),targetSection:n.props.editComponentName,sizeParentBox:n.props.sizeParentBox,id:t,coords:Object(N.a)({},n.state.componentsPatternMedia.coords),path:"/img/photoPattern.mp4",type:"media"})}),e.stopPropagation()},n.addSection=function(e){var t=Math.random().toFixed(3);f.emit("EventNewSection",{componentsPatternBackground:Object(N.a)({},n.state.componentsPatternBackground,{targetSection:"Section".concat(t),id:"Section".concat(t),type:"background"}),component:o.a.createElement(We,{targetSection:n.props.editComponentName,key:"bg".concat(t),id:t,width:"100%",height:"800px",type:"background"})}),e.stopPropagation()},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return"build"===this.state.mode?o.a.createElement("div",{className:"ComponentsMenu"},o.a.createElement("button",{onClick:this.addImage,className:"ImageTool CompoentnsMenu_button"},o.a.createElement("span",null,"Image")),o.a.createElement("button",{onClick:this.addText,className:"TextTool CompoentnsMenu_button"},o.a.createElement("span",null,"Text")),o.a.createElement("button",{disabled:"Header"===this.props.editComponentName,className:"ButtonTool CompoentnsMenu_button"},o.a.createElement("span",null,"Button")),o.a.createElement("button",{onClick:this.addMedia,className:"VideoTool CompoentnsMenu_button"},o.a.createElement("span",null,"Video"))):"section"===this.state.mode?o.a.createElement("div",{className:"sectionMode"},o.a.createElement("button",{onClick:this.addSection,className:"newSectionTool CompoentnsMenu_button"},o.a.createElement("span",null,"New section"))):void 0}}]),t}(o.a.PureComponent)),Xe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={viewComponentMenu:!1,editComponentName:n.props.editComponentName,shiftX:0,shiftY:0,coordsX:"50%",coordsY:"0",shadowDisplay:"block"},n.componentMenu=function(e){n.setState({viewComponentMenu:!n.state.viewComponentMenu}),e.stopPropagation()},n.componentDidUpdate=function(){n.props.editComponentName!==n.state.editComponentName&&n.setState(Object(N.a)({},n.state,{editComponentName:n.props.editComponentName}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(a.Fragment,null,o.a.createElement("div",{ref:this.refControll,className:"ControllersEditComponent",onClick:this.componentMenu},o.a.createElement(Z,{onClick:this.componentMenu,className:"addButton",path:"/img/addButton.png"}),this.state.viewComponentMenu?o.a.createElement(Le,{key:"buildMenu ".concat(this.state.editComponentName),mode:"build",editComponentName:this.state.editComponentName,sizeParentBox:this.props.sizeParentBox,countComponents:this.props.countComponents}):null))}}]),t}(o.a.PureComponent),Ve=(n(454),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={targetSection:n.props.id,editRedy:!1,component:null,children:null},n.changeMode=function(){n.state.editStart&&n.state.idProject===n.props.editComponentName||n.setState(Object(N.a)({},n.state,{editStart:!0}),function(){return f.emit("EventModeEdit",Object(N.a)({},n.state,{editStart:!0,targetSection:n.state.targetSection}))})},n.refSection=null,n.refSectionFunc=function(e){return e?n.refSection={data:e.getBoundingClientRect(),node:e}:e},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.currentProjectsData.components.find(function(t){return t.targetSection===e.props.id})||null,n=this.props.mainBuilderData.componentJSX.filter(function(t){return t.targetSection===e.props.id});return t?o.a.createElement(a.Fragment,null,o.a.createElement("section",{"data-id":"".concat(this.props.sectionNumber),onWheel:this.getSize,ref:this.refSectionFunc,"data-class":"editable",onClick:this.changeMode},o.a.createElement(Fe,t,n.map(function(e){return e.component})||null),!this.state.editStart&&o.a.createElement("div",{className:"warningEdit"},o.a.createElement("p",null,"Click for start edit")))):o.a.createElement(Y,null)}}]),t}(o.a.PureComponent)),Je=function(e){var t=e.userData.currentProjectsData;return t.sectionTitleProject.map(function(n,a){return o.a.createElement(Ve,{key:n,mainBuilderData:Object(N.a)({},e.mainBuilderData),currentProjectsData:Object(N.a)({},t),editComponentName:e.editComponentName,countComponents:e.mainBuilderData.componentJSX.length,menuActive:e.menuActive,sizeParentBox:e.sizeParentBox,id:n,sectionNumber:a},{targetSection:e.editComponentName})})},Ye=(n(455),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(c)))).state={idProject:parseInt(n.props.match.params.param),editStart:!1,position:0,isLoadComponents:!0,projectEmpty:!1,showSectionAddMenu:!1,componentStats:{},mainBuilderData:{components:[],componentJSX:[]},instrumentPanel:{colorPickerActive:!1,instrumentActive:!1},editComponentName:null,menuActive:!1,modalSearch:!1,modalSearchMode:null,modalImageViewer:{action:!1,image:null}},n.modalSearchOn=function(e){var t=e.hasOwnProperty("mode");n.setState(Object(N.a)({},n.state,{modalSearch:!n.state.modalSearch,modalSearchMode:t?e.mode:null}))},n.imageViewerSwitch=function(e){n.setState(Object(N.a)({},n.state,{modalImageViewer:Object(N.a)({},n.state.modalImageViewer,{action:e.action,target:e.target})}))},n.workModeEdit=function(e){e.editStart&&n.setState(Object(N.a)({},n.state,{editStart:e.editStart,editComponentName:e.targetSection,mainBuilderData:Object(N.a)({},n.state.mainBuilderData),menuActive:!0}))},n.openInstrument=function(e){n.state.componentStats.id===e.componentStats.id||n.setState(Object(N.a)({},n.state,{editComponentName:e.targetSection,componentStats:Object(N.a)({},n.state.componentStats,e.componentStats),instrumentPanel:Object(N.a)({},n.state.instrumentPanel,{instrumentActive:!0})}))},n.closePanel=function(e){n.setState(Object(N.a)({},n.state,{instrumentPanel:Object(N.a)({},n.state.instrumentPanel,{colorPickerActive:!1,instrumentActive:e.close})}))},n.addComponentsFromBD=function(e){var t=n.state.mainBuilderData.componentJSX,a=[],c=Object(k.a)(n.state.mainBuilderData.components);e.forEach(function(e){if("background"!==e.type){var t=o.a.createElement(We,Object.assign({sizeParentBox:Object(N.a)({},n.mainComponent.data)},e,{key:"".concat(e.type).concat(e.id)})),r={id:e.id,targetSection:e.targetSection,component:t};a.push(r),c.push(e)}else c.push(e)}),n.setState(Object(N.a)({},n.state,{isLoadComponents:!1,mainBuilderData:Object(N.a)({},n.state.mainBuilderData,{components:[].concat(Object(k.a)(n.state.mainBuilderData.components),Object(k.a)(c)),componentJSX:[].concat(Object(k.a)(t),a)})}))},n.addComponent=function(e){var t=n.state.mainBuilderData.componentJSX,a=null;"text"===e.type?a=e.componentsPatternText:"background"===e.type?a=e.componentsPatternBackground:"image"===e.type?a=e.componentsPatternImage:"media"===e.type&&(a=e.componentsPatternMedia);var o={id:a.id,targetSection:a.targetSection,component:e.component};n.setState(Object(N.a)({},n.state,{mainBuilderData:Object(N.a)({},n.state.mainBuilderData,{components:[].concat(Object(k.a)(n.state.mainBuilderData.components),[a]),componentJSX:[].concat(Object(k.a)(t),[o])})}))},n.saveChangesComponent=function(e){var t=n.props.userData,a=!1,o=n.state.mainBuilderData.components.map(function(t){return t.id===e.id?(a=!0,Object(N.a)({},e)):t});a||o.push(e),n.setState(Object(N.a)({},n.state,{mainBuilderData:Object(N.a)({},n.state.mainBuilderData,{isChange:!1,components:o})}),function(){var e=n.props.userData.currentProjectsData;return n.props.dispatch(be({uid:t.idUser,projects:Object(k.a)(t.projects),components:Object(k.a)(n.state.mainBuilderData.components),sectionTitleProject:Object(k.a)(e.sectionTitleProject),idProject:n.state.idProject}))})},n.showAddSection=function(e){e.pageY>780&&!n.state.showSectionAddMenu?n.setState(Object(N.a)({},n.state,{showSectionAddMenu:!0})):e.pageY<780&&n.state.showSectionAddMenu&&n.setState(Object(N.a)({},n.state,{showSectionAddMenu:!1})),e.stopPropagation()},n.mainComponent=null,n.mainRefComponent=function(e){return e?n.mainComponent={data:e.getBoundingClientRect(),node:e}:e},n.addNewSection=function(e){var t=n.props.userData;n.setState(Object(N.a)({},n.state,{mainBuilderData:Object(N.a)({},n.state.mainBuilderData,{components:[].concat(Object(k.a)(n.state.mainBuilderData.components),[e.componentsPatternBackground]),componentJSX:[].concat(Object(k.a)(n.state.mainBuilderData.componentJSX),[e.component])})}),function(){return n.props.dispatch(be({uid:t.idUser,projects:Object(k.a)(t.projects),components:Object(k.a)(n.state.mainBuilderData.components),sectionTitleProject:[].concat(Object(k.a)(n.props.userData.currentProjectsData.sectionTitleProject),[e.componentsPatternBackground.id]),idProject:n.state.idProject}))})},n.updateCoordsComponents=function(e){f.emit("ScrollRecalcPosition",n.mainComponent.node.scrollTop)},n.scrolllS=function(e){console.log(n.mainComponent.data),console.log(n.mainComponent.node),100===e.deltaY&&n.state.position<n.mainComponent.data.height?n.setState(Object(N.a)({},n.state,{position:n.state.position+800}),function(){return ge.animateScroll.scrollTo(n.state.position)}):100!==e.deltaY&&n.state.position>0&&n.setState(Object(N.a)({},n.state,{position:n.state.position-800}),function(){return ge.animateScroll.scrollTo(n.state.position)})},n.componentDidUpdate=function(){var e=n.props.userData,t=e.currentProjectsData,a=n.state.isLoadComponents;if(e.active&&!t.loadProject){var o=e.projects.find(function(e){return e.id===n.state.idProject});o?n.props.dispatch(B({id:o.id,typeProject:o.type,sectionTitleProject:Object(k.a)(o.sectionTitleProject),components:Object(k.a)(o.components)})):n.setState(Object(N.a)({},n.state,{projectEmpty:!0}))}t.loadProject&&a&&n.addComponentsFromBD(Object(k.a)(t.components))},n.componentDidMount=function(){var e=n.props.userData,t=e.currentProjectsData;if(e.active&&!t.loadProject){var a=e.projects.find(function(e){return e.id===n.state.idProject});n.props.dispatch(B({id:a.id,sectionTitleProject:Object(k.a)(a.sectionTitleProject),typeProject:a.type,components:Object(k.a)(a.components)}))}console.log("build"),f.on("EventBuildComponents",n.addComponent),f.on("EventNewSection",n.addNewSection),f.on("EventSaveChangesComponent",n.saveChangesComponent),f.on("EventClosePanel",n.closePanel),f.on("EventModalSearchOn",n.modalSearchOn),f.on("EventInstrumentPanel",n.openInstrument),f.on("EventImageView",n.imageViewerSwitch),f.on("EventModeEdit",n.workModeEdit)},n.componentWillUnmount=function(){n.props.userData.active&&n.props.dispatch(x(!0)),f.off("EventBuildComponents",n.addComponent),f.off("EventNewSection",n.addNewSection),f.off("EventSaveChangesComponent",n.saveChangesComponent),f.off("EventModalSearchOn",n.modalSearchOn),f.off("EventClosePanel",n.closePanel),f.off("EventInstrumentPanel",n.openInstrument),f.off("EventImageView",n.imageViewerSwitch),f.off("EventModeEdit",n.workModeEdit)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(this.state.projectEmpty)return o.a.createElement(v.a,{to:"/Cabinet"});var e=this.state.instrumentPanel.instrumentActive,t=this.props.userData,n=t.currentProjectsData,c=n.sectionTitleProject;return t.active&&n.loadProject?o.a.createElement(a.Fragment,null,o.a.createElement(ee,{key:"Header",title:"Constructor"}),o.a.createElement("div",{ref:this.mainRefComponent,onWheel:this.scrolllS,onMouseMove:this.showAddSection,className:"Build",key:"Build"},this.state.editStart&&o.a.createElement(Xe,{key:"controllers",editComponentName:this.state.editComponentName,countComponents:this.state.mainBuilderData.components.length,menuActive:this.state.menuActive,sizeParentBox:this.mainComponent.data}),this.state.showSectionAddMenu&&o.a.createElement(Le,{key:"buildMenu",countSection:5*this.state.mainBuilderData.componentJSX.length,mode:"section",className:"menu"}),e&&o.a.createElement(Pe,Object.assign({key:"tools"},this.state)),c.length&&o.a.createElement(Je,Object.assign({key:"section"},this.state,{userData:t})))):this.props.firebase.getCurrentUser()?o.a.createElement(Y,{key:"Loader",path:"/img/loading.gif",type:"build"}):o.a.createElement(v.a,{to:"/"})}}]),t}(o.a.PureComponent)),He=Object(O.b)(function(e){return{userData:{active:e.cabinet.active,idUser:e.cabinet.idUser,projects:Object(k.a)(e.cabinet.projects),currentProjectsData:Object(N.a)({},e.builder)}}})(V(Ye)),Ge=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={firebase:n.props.firebase,firebaseLoadState:!1},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth.onAuthStateChanged(function(t){var n;e.state.firebaseLoadState||(t&&e.props.dispatch((n=t.uid,function(){var e=Object(F.a)(_.a.mark(function e(t,a,o){var c;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.firebase,e.next=3,c.db.collection("users").doc(n).get().then(function(e){var a=e.data();t(I({uid:n,projects:Object(k.a)(a.projects)}))}).catch(function(e){console.error(e.message),t(M(e.message))});case 3:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}())),e.setState(Object(N.a)({},e.state,{firebaseLoadState:!0})))})}},{key:"render",value:function(){var e=this;return this.state.firebaseLoadState?o.a.createElement("div",null,o.a.createElement(v.d,null,o.a.createElement(v.b,{path:"/",exact:!0,render:function(e){return o.a.createElement(K,e)}}),o.a.createElement(v.b,{path:"/Cabinet/",exact:!0,component:de}),o.a.createElement(v.b,{path:"/Cabinet/About",render:function(t){return o.a.createElement(he,Object.assign({},t,{config:e.props.config}))}}),o.a.createElement(v.b,{path:"/Cabinet/Build/:param",component:He}),o.a.createElement(v.b,{path:"*",component:K}),o.a.createElement(v.b,{path:"/crashPage",component:j}))):o.a.createElement(Y,{path:"/img/loading.gif",type:"application"})}}]),t}(o.a.PureComponent),Ke=Object(O.b)()(V(Ge));n(456);d.saveSession("SESSION");var qe=n(102);r.a.render(o.a.createElement(E.a,null,o.a.createElement(S,null,o.a.createElement(X.Provider,{value:d},o.a.createElement(O.a,{store:z},o.a.createElement(Ke,{config:qe}))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/constructor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/constructor","/service-worker.js");i?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker.")})):s(t,e)})}}()}},[[192,1,2]]]);
//# sourceMappingURL=main.31d002b9.chunk.js.map